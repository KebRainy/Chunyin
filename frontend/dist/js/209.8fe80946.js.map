{"version":3,"file":"js/209.8fe80946.js","mappings":"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","sources":["webpack://Chunyin/./src/api/search.js","webpack://Chunyin/./src/views/Search.vue","webpack://Chunyin/./src/views/Search.vue?a55f"],"sourcesContent":["import request from './request'\n\nexport const searchAll = (params) => {\n  return request({\n    url: '/search',\n    method: 'get',\n    params\n  })\n}\n\n","<template>\n  <div class=\"search-page\">\n    <section class=\"search-hero\">\n      <div>\n        <p class=\"eyebrow\">Search</p>\n        <h1>探索醇饮社区</h1>\n      </div>\n      <el-input\n        v-model=\"keyword\"\n        placeholder=\"输入关键词，例如 IPA、陈年葡萄酒、用户名\"\n        @keyup.enter=\"handleSearch\"\n      >\n        <template #append>\n          <el-button type=\"primary\" :loading=\"loading\" @click=\"handleSearch\">\n            <el-icon><Search /></el-icon>\n          </el-button>\n        </template>\n      </el-input>\n      <div class=\"search-tabs\">\n        <button\n          v-for=\"tab in tabs\"\n          :key=\"tab.value\"\n          :class=\"['tab-chip', { active: type === tab.value }]\"\n          @click=\"switchType(tab.value)\"\n        >\n          {{ tab.label }}\n        </button>\n      </div>\n    </section>\n\n    <section class=\"result-panel\">\n      <div v-if=\"loading\" class=\"loading\">\n        <el-skeleton :rows=\"5\" animated />\n      </div>\n      <div v-else>\n        <header class=\"result-header\">\n          <div>\n            <p class=\"eyebrow\">{{ activeTab.label }}</p>\n            <h3>{{ activeTab.description }}</h3>\n          </div>\n          <span class=\"result-count\">{{ activeList.length }} 条结果</span>\n        </header>\n        <div v-if=\"activeList.length === 0\" class=\"empty\">\n          <el-empty description=\"暂无相关内容\" />\n        </div>\n        <div v-else class=\"result-list\">\n          <template v-if=\"type === 'post'\">\n            <div class=\"result-card post\" v-for=\"post in activeList\" :key=\"post.id\">\n              <div class=\"card-meta\">\n                <strong>{{ post.author?.username || '匿名用户' }}</strong>\n                <span>{{ formatTime(post.createdAt) }}</span>\n              </div>\n              <p class=\"card-content\">{{ post.content }}</p>\n              <div class=\"card-actions\">\n                <el-tag size=\"small\" v-if=\"post.ipRegion\">{{ post.ipRegion }}</el-tag>\n                <el-button text type=\"primary\" @click=\"goPost(post.id)\">查看动态</el-button>\n              </div>\n            </div>\n          </template>\n          <template v-else-if=\"type === 'wiki'\">\n            <div class=\"result-card wiki\" v-for=\"wiki in activeList\" :key=\"wiki.id\">\n              <div class=\"card-meta\">\n                <h4>{{ wiki.title }}</h4>\n                <span>{{ formatTime(wiki.updatedAt) }}</span>\n              </div>\n              <p class=\"card-content\">{{ wiki.summary || '这条词条暂未添加摘要' }}</p>\n              <div class=\"card-actions\">\n                <span>{{ wiki.lastEditorName || '系统' }}</span>\n                <el-button text type=\"primary\" @click=\"goWiki(wiki.slug || wiki.id)\">查看词条</el-button>\n              </div>\n            </div>\n          </template>\n          <template v-else>\n            <div class=\"result-card user\" v-for=\"user in activeList\" :key=\"user.id\" @click=\"goUser(user.id)\">\n              <el-avatar :src=\"user.avatarUrl\" :alt=\"`${user.username}的头像`\">\n                <el-icon><User /></el-icon>\n              </el-avatar>\n              <div>\n                <strong>{{ user.username }}</strong>\n                <p>{{ user.bio || '这个人还没有简介' }}</p>\n              </div>\n              <el-button text type=\"primary\">查看</el-button>\n            </div>\n          </template>\n        </div>\n      </div>\n    </section>\n  </div>\n</template>\n\n<script setup>\nimport { reactive, ref, computed, watch } from 'vue'\nimport dayjs from 'dayjs'\nimport { useRoute, useRouter } from 'vue-router'\nimport { searchAll } from '@/api/search'\nimport { ElMessage } from 'element-plus'\n\nconst route = useRoute()\nconst router = useRouter()\nconst keyword = ref(route.query.q || '')\nconst type = ref('post')\nconst loading = ref(false)\nconst results = reactive({\n  posts: [],\n  wikis: [],\n  users: []\n})\n\nconst tabs = [\n  { label: '动态', value: 'post', description: '相关动态' },\n  { label: '维基', value: 'wiki', description: '百科词条' },\n  { label: '用户', value: 'user', description: '创作者与饮者' }\n]\n\nconst activeTab = computed(() => tabs.find(tab => tab.value === type.value) || tabs[0])\nconst activeKeyMap = {\n  post: 'posts',\n  wiki: 'wikis',\n  user: 'users'\n}\n\nconst activeList = computed(() => results[activeKeyMap[type.value]] || [])\n\nconst handleSearch = async () => {\n  if (!keyword.value) return\n  loading.value = true\n  router.replace({ path: '/search', query: { q: keyword.value } })\n  const targetKey = activeKeyMap[type.value]\n  results[targetKey] = []\n  try {\n    const res = await searchAll({ keyword: keyword.value, type: type.value })\n    const payload = res.data || {}\n    if (Array.isArray(payload.items)) {\n      results[targetKey] = payload.items\n    } else if (Array.isArray(payload[targetKey])) {\n      results[targetKey] = payload[targetKey]\n    } else {\n      results[targetKey] = []\n    }\n  } catch (error) {\n    console.error('搜索失败:', error)\n    ElMessage.error('搜索失败，请稍后再试')\n  } finally {\n    loading.value = false\n  }\n}\n\nconst switchType = (value) => {\n  if (type.value === value) return\n  type.value = value\n  if (keyword.value) {\n    handleSearch()\n  }\n}\n\nconst goPost = (id) => {\n  if (!id) return\n  window.open(`/posts/${id}`, '_blank')\n}\n\nconst goWiki = (slug) => {\n  if (!slug) return\n  window.open(`/wiki/${slug}`, '_blank')\n}\n\nconst goUser = (id) => {\n  if (!id) return\n  window.open(`/users/${id}`, '_blank')\n}\n\nconst formatTime = (time) => {\n  if (!time) return ''\n  return dayjs(time).format('YYYY.MM.DD HH:mm')\n}\n\nwatch(\n  () => route.query.q,\n  (newVal) => {\n    keyword.value = newVal || ''\n    if (keyword.value) {\n      handleSearch()\n    }\n  },\n  { immediate: true }\n)\n</script>\n\n<style scoped>\n.search-page {\n  max-width: 1100px;\n  margin: 0 auto;\n  display: flex;\n  flex-direction: column;\n  gap: 24px;\n}\n\n.eyebrow {\n  text-transform: uppercase;\n  letter-spacing: 2px;\n  font-size: 12px;\n  color: #909399;\n  margin: 0 0 6px;\n}\n\n.search-hero {\n  border-radius: 28px;\n  border: 1px solid #eceff5;\n  padding: 24px 28px;\n  box-shadow: 0 16px 36px rgba(15, 23, 42, 0.05);\n  background: #fff;\n  display: flex;\n  flex-direction: column;\n  gap: 16px;\n}\n\n.search-tabs {\n  display: flex;\n  gap: 12px;\n  flex-wrap: wrap;\n}\n\n.tab-chip {\n  border: 1px solid #dcdfe6;\n  border-radius: 999px;\n  padding: 8px 18px;\n  background: transparent;\n  cursor: pointer;\n  color: #606266;\n}\n\n.tab-chip.active {\n  border-color: #2f54eb;\n  color: #2f54eb;\n  background: rgba(47, 84, 235, 0.08);\n}\n\n.result-panel {\n  border-radius: 32px;\n  border: 1px solid #eceff5;\n  background: #fff;\n  padding: 24px 28px;\n  box-shadow: 0 16px 36px rgba(15, 23, 42, 0.05);\n}\n\n.result-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: baseline;\n  margin-bottom: 16px;\n}\n\n.result-count {\n  color: #909399;\n  font-size: 13px;\n}\n\n.result-list {\n  display: flex;\n  flex-direction: column;\n  gap: 16px;\n}\n\n.result-card {\n  border: 1px solid #f0f2f5;\n  border-radius: 20px;\n  padding: 16px 20px;\n  background: #fafafa;\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n}\n\n.result-card.user {\n  flex-direction: row;\n  align-items: center;\n  gap: 16px;\n  cursor: pointer;\n}\n\n.card-meta {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  color: #909399;\n  font-size: 13px;\n}\n\n.card-meta h4 {\n  margin: 0;\n}\n\n.card-content {\n  margin: 0;\n  color: #1f2d3d;\n  line-height: 1.6;\n}\n\n.card-actions {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  font-size: 12px;\n  color: #909399;\n}\n\n.loading,\n.empty {\n  padding: 40px 0;\n}\n\n@media (max-width: 640px) {\n  .search-hero,\n  .result-panel {\n    padding: 20px;\n  }\n\n  .result-card.user {\n    flex-direction: column;\n    align-items: flex-start;\n  }\n}\n</style>","import script from \"./Search.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./Search.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./Search.vue?vue&type=style&index=0&id=04a7ce6c&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-04a7ce6c\"]])\n\nexport default __exports__"],"names":["searchAll","params","request","url","method","route","useRoute","router","useRouter","keyword","ref","query","q","type","loading","results","reactive","posts","wikis","users","tabs","label","value","description","activeTab","computed","find","tab","activeKeyMap","post","wiki","user","activeList","handleSearch","async","replace","path","targetKey","res","payload","data","Array","isArray","items","error","console","ElMessage","switchType","goPost","id","window","open","goWiki","slug","goUser","formatTime","time","dayjs","format","watch","newVal","immediate","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","class","_createVNode","_component_el_input","$event","placeholder","onKeyup","_withKeys","append","_withCtx","_component_el_button","onClick","_component_el_icon","_component_Search","_hoisted_3","_Fragment","_renderList","key","_normalizeClass","active","_hoisted_4","_hoisted_5","_hoisted_6","_component_el_skeleton","rows","animated","_hoisted_7","_hoisted_8","_hoisted_9","_toDisplayString","_hoisted_10","length","_hoisted_11","_component_el_empty","_hoisted_12","_hoisted_13","author","username","createdAt","_hoisted_14","content","_hoisted_15","ipRegion","_createBlock","_component_el_tag","size","text","_cache","_hoisted_16","title","updatedAt","_hoisted_17","summary","_hoisted_18","lastEditorName","_component_el_avatar","src","avatarUrl","alt","_component_User","bio","__exports__"],"ignoreList":[],"sourceRoot":""}