"use strict";(self["webpackChunkChunyin"]=self["webpackChunkChunyin"]||[]).push([[215],{2215:function(e,t,a){a.r(t),a.d(t,{default:function(){return Ke}});a(4114);var l=a(641),n=a(33),o=a(953),r=a(5220),u=a(163),s=a(8548),i=a(7918),c=a(7277);const m=[{value:"SPAM",label:"åžƒåœ¾å¹¿å‘Š"},{value:"ABUSE",label:"è¾±éª‚æ”»å‡»"},{value:"PORNOGRAPHY",label:"è‰²æƒ…ä½Žä¿—"},{value:"ILLEGAL",label:"è¿æ³•è¿è§„"},{value:"FRAUD",label:"æ¬ºè¯ˆä¿¡æ¯"},{value:"MISINFORMATION",label:"è™šå‡ä¿¡æ¯"},{value:"HARASSMENT",label:"éªšæ‰°è¡Œä¸º"},{value:"OTHER",label:"å…¶ä»–åŽŸå› "}],d={submitReport:e=>(0,c.A)({url:"/reports",method:"post",data:e}),getMyReports:(e=1,t=20)=>(0,c.A)({url:"/reports/my",method:"get",params:{page:e,size:t}}),getReportDetail:e=>(0,c.A)({url:`/reports/${e}`,method:"get"})},v={class:"report-dialog"},p={class:"report-tip"},k={class:"dialog-footer"};var y={__name:"ReportDialog",props:{modelValue:{type:Boolean,default:!1},contentType:{type:String,required:!0},contentId:{type:[Number,String],required:!0}},emits:["update:modelValue","success"],setup(e,{emit:t}){const a=e,r=t,i=(0,o.KR)(!1),c=(0,o.KR)(!1),y=(0,o.KR)(null),g=(0,o.Kh)({reason:"",description:""}),f={reason:[{required:!0,message:"è¯·é€‰æ‹©ä¸¾æŠ¥åŽŸå› ",trigger:"change"}]};(0,l.wB)(()=>a.modelValue,e=>{i.value=e,e&&(g.reason="",g.description="")}),(0,l.wB)(i,e=>{r("update:modelValue",e)});const C=()=>{i.value=!1},b=async()=>{if(y.value){try{await y.value.validate()}catch{return}c.value=!0;try{await d.submitReport({contentType:a.contentType,contentId:Number(a.contentId),reason:g.reason,description:g.description||null}),u.nk.success("ä¸¾æŠ¥å·²æäº¤ï¼Œæˆ‘ä»¬ä¼šå°½å¿«å¤„ç†"),r("success"),C()}catch(e){console.error("æäº¤ä¸¾æŠ¥å¤±è´¥:",e)}finally{c.value=!1}}};return(e,t)=>{const a=(0,l.g2)("el-icon"),r=(0,l.g2)("el-radio"),u=(0,l.g2)("el-radio-group"),d=(0,l.g2)("el-form-item"),h=(0,l.g2)("el-input"),R=(0,l.g2)("el-form"),_=(0,l.g2)("el-button"),F=(0,l.g2)("el-dialog");return(0,l.uX)(),(0,l.Wv)(F,{modelValue:i.value,"onUpdate:modelValue":t[2]||(t[2]=e=>i.value=e),title:"ä¸¾æŠ¥å†…å®¹",width:"480px","close-on-click-modal":!1,onClose:C},{footer:(0,l.k6)(()=>[(0,l.Lk)("div",k,[(0,l.bF)(_,{onClick:C},{default:(0,l.k6)(()=>[...t[4]||(t[4]=[(0,l.eW)("å–æ¶ˆ",-1)])]),_:1}),(0,l.bF)(_,{type:"danger",loading:c.value,onClick:b},{default:(0,l.k6)(()=>[...t[5]||(t[5]=[(0,l.eW)(" æäº¤ä¸¾æŠ¥ ",-1)])]),_:1},8,["loading"])])]),default:(0,l.k6)(()=>[(0,l.Lk)("div",v,[(0,l.Lk)("div",p,[(0,l.bF)(a,null,{default:(0,l.k6)(()=>[(0,l.bF)((0,o.R1)(s.WarningFilled))]),_:1}),t[3]||(t[3]=(0,l.Lk)("span",null,"è¯·é€‰æ‹©ä¸¾æŠ¥åŽŸå› ï¼Œæˆ‘ä»¬ä¼šå°½å¿«å¤„ç†æ‚¨çš„ä¸¾æŠ¥",-1))]),(0,l.bF)(R,{ref_key:"formRef",ref:y,model:g,rules:f,"label-position":"top"},{default:(0,l.k6)(()=>[(0,l.bF)(d,{label:"ä¸¾æŠ¥åŽŸå› ",prop:"reason"},{default:(0,l.k6)(()=>[(0,l.bF)(u,{modelValue:g.reason,"onUpdate:modelValue":t[0]||(t[0]=e=>g.reason=e),class:"reason-group"},{default:(0,l.k6)(()=>[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)((0,o.R1)(m),e=>((0,l.uX)(),(0,l.Wv)(r,{key:e.value,value:e.value,border:""},{default:(0,l.k6)(()=>[(0,l.eW)((0,n.v_)(e.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1}),(0,l.bF)(d,{label:"è¯¦ç»†è¯´æ˜Žï¼ˆå¯é€‰ï¼‰",prop:"description"},{default:(0,l.k6)(()=>[(0,l.bF)(h,{modelValue:g.description,"onUpdate:modelValue":t[1]||(t[1]=e=>g.description=e),type:"textarea",rows:3,placeholder:"è¯·è¡¥å……è¯´æ˜Žä¸¾æŠ¥åŽŸå› ï¼Œå¸®åŠ©æˆ‘ä»¬æ›´å¿«å¤„ç†...",maxlength:"500","show-word-limit":""},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])])]),_:1},8,["modelValue"])}}},g=a(6262);const f=(0,g.A)(y,[["__scopeId","data-v-e588c8ee"]]);var C=f;a(8111),a(7588);const b={class:"comment-item-wrapper"},h={class:"comment-content"},R={class:"comment-header"},_={class:"comment-author"},F={class:"comment-time"},L={class:"comment-text"},w={key:0,class:"reply-to"},X={class:"comment-actions"},E={key:0,class:"reply-input-container"},I={class:"reply-input-actions"},A={class:"collapse-control"},W={key:0,class:"expanded-replies"};var x={__name:"CommentItem",props:{comment:{type:Object,required:!0},level:{type:Number,default:0},avatarSize:{type:Number,default:32},canDelete:{type:Boolean,default:!1},canReport:{type:Boolean,default:!1},formatTime:{type:Function,required:!0},canDeleteComment:{type:Function,required:!0},canReportComment:{type:Function,required:!0},replyTargetId:{type:Number,default:null}},emits:["reply","delete","report","submit-reply","cancel-reply"],setup(e,{emit:t}){const a=e,r=t,u=(0,o.KR)(!1),i=(0,l.EW)(()=>a.replyTargetId===a.comment.id),c=(0,o.KR)(""),m=(0,o.KR)(!1),d=e=>{r("reply",e)},v=async()=>{if(c.value.trim()){m.value=!0;try{r("submit-reply",{comment:a.comment,content:c.value}),c.value=""}finally{m.value=!1}}},p=()=>{c.value="",r("cancel-reply")},k=e=>{if(!e.replies||0===e.replies.length)return 0;let t=e.replies.length;return e.replies.forEach(e=>{t+=k(e)}),t};return(t,a)=>{const r=(0,l.g2)("el-avatar"),y=(0,l.g2)("el-button"),g=(0,l.g2)("el-input"),f=(0,l.g2)("el-icon");return(0,l.uX)(),(0,l.CE)("div",b,[(0,l.bF)(r,{src:e.comment.author?.avatarUrl,size:e.avatarSize,alt:`${e.comment.author?.username||"ç”¨æˆ·"}çš„å¤´åƒ`},null,8,["src","size","alt"]),(0,l.Lk)("div",h,[(0,l.Lk)("div",R,[(0,l.Lk)("span",_,(0,n.v_)(e.comment.author?.username),1),(0,l.Lk)("span",F,(0,n.v_)(e.formatTime(e.comment.createdAt)),1)]),(0,l.Lk)("div",L,[e.comment.replyToUser?((0,l.uX)(),(0,l.CE)("span",w," @"+(0,n.v_)(e.comment.replyToUser.username),1)):(0,l.Q3)("",!0),(0,l.eW)(" "+(0,n.v_)(e.comment.content),1)]),(0,l.Lk)("div",X,[(0,l.bF)(y,{text:"",size:"small",onClick:a[0]||(a[0]=a=>t.$emit("reply",e.comment))},{default:(0,l.k6)(()=>[...a[13]||(a[13]=[(0,l.eW)("å›žå¤",-1)])]),_:1}),e.canDelete?((0,l.uX)(),(0,l.Wv)(y,{key:0,text:"",size:"small",type:"danger",onClick:a[1]||(a[1]=a=>t.$emit("delete",e.comment))},{default:(0,l.k6)(()=>[...a[14]||(a[14]=[(0,l.eW)("åˆ é™¤",-1)])]),_:1})):(0,l.Q3)("",!0),e.canReport?((0,l.uX)(),(0,l.Wv)(y,{key:1,text:"",size:"small",type:"warning",onClick:a[2]||(a[2]=a=>t.$emit("report",e.comment))},{default:(0,l.k6)(()=>[...a[15]||(a[15]=[(0,l.eW)("ä¸¾æŠ¥",-1)])]),_:1})):(0,l.Q3)("",!0)]),i.value?((0,l.uX)(),(0,l.CE)("div",E,[(0,l.bF)(g,{modelValue:c.value,"onUpdate:modelValue":a[3]||(a[3]=e=>c.value=e),type:"textarea",placeholder:"å†™ä¸‹ä½ çš„å›žå¤...",rows:"2",class:"reply-textarea"},null,8,["modelValue"]),(0,l.Lk)("div",I,[(0,l.bF)(y,{size:"small",onClick:p},{default:(0,l.k6)(()=>[...a[16]||(a[16]=[(0,l.eW)("å–æ¶ˆ",-1)])]),_:1}),(0,l.bF)(y,{type:"primary",size:"small",onClick:v,loading:m.value},{default:(0,l.k6)(()=>[...a[17]||(a[17]=[(0,l.eW)(" å‘å¸ƒ ",-1)])]),_:1},8,["loading"])])])):(0,l.Q3)("",!0),e.comment.replies?.length?((0,l.uX)(),(0,l.CE)("div",{key:1,class:(0,n.C4)(["reply-list",{"no-indent":e.level>=1}])},[e.level<1?((0,l.uX)(!0),(0,l.CE)(l.FK,{key:0},(0,l.pI)(e.comment.replies,n=>((0,l.uX)(),(0,l.Wv)(T,{key:n.id,comment:n,level:e.level+1,"avatar-size":24,"can-delete":e.canDeleteComment(n),"can-report":e.canReportComment(n),"format-time":e.formatTime,"can-delete-comment":e.canDeleteComment,"can-report-comment":e.canReportComment,"reply-target-id":e.replyTargetId,onReply:d,onDelete:a[4]||(a[4]=e=>t.$emit("delete",e)),onReport:a[5]||(a[5]=e=>t.$emit("report",e)),onSubmitReply:a[6]||(a[6]=e=>t.$emit("submit-reply",e)),onCancelReply:a[7]||(a[7]=e=>t.$emit("cancel-reply"))},null,8,["comment","level","can-delete","can-report","format-time","can-delete-comment","can-report-comment","reply-target-id"]))),128)):((0,l.uX)(),(0,l.CE)(l.FK,{key:1},[(0,l.Lk)("div",A,[(0,l.bF)(y,{text:"",size:"small",type:"primary",onClick:a[8]||(a[8]=e=>u.value=!u.value)},{default:(0,l.k6)(()=>[(0,l.bF)(f,null,{default:(0,l.k6)(()=>[u.value?((0,l.uX)(),(0,l.Wv)((0,o.R1)(s.ArrowUp),{key:1})):((0,l.uX)(),(0,l.Wv)((0,o.R1)(s.ArrowDown),{key:0}))]),_:1}),(0,l.eW)(" "+(0,n.v_)(u.value?"æ”¶èµ·":`å±•å¼€ ${k(e.comment)} æ¡å›žå¤`),1)]),_:1})]),u.value?((0,l.uX)(),(0,l.CE)("div",W,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.comment.replies,n=>((0,l.uX)(),(0,l.Wv)(T,{key:n.id,comment:n,level:e.level+1,"avatar-size":24,"can-delete":e.canDeleteComment(n),"can-report":e.canReportComment(n),"format-time":e.formatTime,"can-delete-comment":e.canDeleteComment,"can-report-comment":e.canReportComment,"reply-target-id":e.replyTargetId,onReply:d,onDelete:a[9]||(a[9]=e=>t.$emit("delete",e)),onReport:a[10]||(a[10]=e=>t.$emit("report",e)),onSubmitReply:a[11]||(a[11]=e=>t.$emit("submit-reply",e)),onCancelReply:a[12]||(a[12]=e=>t.$emit("cancel-reply"))},null,8,["comment","level","can-delete","can-report","format-time","can-delete-comment","can-report-comment","reply-target-id"]))),128))])):(0,l.Q3)("",!0)],64))],2)):(0,l.Q3)("",!0)])])}}};const K=(0,g.A)(x,[["__scopeId","data-v-75cf6e51"]]);var T=K,V=a(4353),$=a.n(V),S=a(8660),U=a.n(S),D=(a(6033),a(4402)),z=a(9686),M=a(2549),Q=a(6400);const P={class:"post-detail-page"},B={class:"post-detail-container"},q={key:0,class:"loading"},N={key:1,class:"not-found"},O={key:2,class:"post-detail"},H={class:"post-header"},G={class:"author-info"},Y={class:"post-meta"},j={class:"time"},J={key:0,class:"location"},Z={key:1,class:"ip"},ee={key:2,class:"ip"},te={key:0,class:"post-actions-menu"},ae={class:"post-body"},le={class:"post-content"},ne={key:0,class:"post-images"},oe=["src","alt"],re={key:1,class:"post-tags"},ue={class:"post-actions"},se={class:"action-item"},ie={class:"action-item"},ce={class:"comments-section"},me={key:0,class:"comment-input"},de={key:1,class:"login-prompt"},ve={class:"comments-list"},pe={key:0,class:"no-comments"},ke={key:1},ye={key:0,class:"similar-posts-sidebar"},ge={class:"sidebar-card"},fe={class:"sidebar-title"},Ce={key:0,class:"sidebar-loading"},be={key:1,class:"sidebar-empty"},he={key:2,class:"similar-list"},Re=["onClick"],_e={key:0,class:"similar-image"},Fe=["src","alt"],Le={key:1,class:"similar-image no-image"},we={class:"similar-info"},Xe={class:"similar-content"},Ee={class:"similar-meta"},Ie={class:"similar-author"},Ae={class:"similar-stats"};var We={__name:"PostDetail",setup(e){$().extend(U()),$().locale("zh-cn");const t=(0,r.lq)(),a=(0,r.rd)(),c=(0,Q.k)(),m=(0,o.KR)(null),d=(0,o.KR)(!0),v=(0,o.KR)(!1),p=(0,o.KR)(!1),k=(0,o.KR)(""),y=(0,o.KR)(!1),g=(0,o.KR)([]),f=(0,o.KR)(null),b=(0,o.KR)([]),h=(0,o.KR)(!1),R=(0,o.KR)(!1),_=(0,o.KR)(""),F=(0,o.KR)(0),L=(0,l.EW)(()=>{if(!c.isLoggedIn||!m.value)return!1;const e=c.userInfo?.id===m.value.author?.id,t=c.isAdmin;return e||t}),w=async()=>{d.value=!0;try{const e=await D.x.getPost(t.params.id);m.value=e.data,v.value=e.data?.liked||!1,p.value=e.data?.favorited||!1,await A(),W(),X()}catch(e){u.nk.error("åŠ è½½åŠ¨æ€å¤±è´¥")}finally{d.value=!1}},X=async()=>{h.value=!0;try{const e=await z.L.getSimilarPosts(t.params.id,6);b.value=e.data||[]}catch(e){console.error("Failed to load similar posts:",e),b.value=[]}finally{h.value=!1}},E=e=>{a.push(`/posts/${e}`)},I=(e,t)=>e?e.length>t?e.slice(0,t)+"...":e:"",A=async()=>{try{const e=await D.x.getComments(t.params.id);g.value=e.data||[]}catch(e){u.nk.error("åŠ è½½è¯„è®ºå¤±è´¥")}},W=async()=>{if(c.isLoggedIn&&m.value)try{await(0,M.fG)({targetType:"POST",targetId:m.value.id,title:m.value.author?.username||"åŠ¨æ€",summary:m.value.content?.slice(0,80),coverUrl:m.value.imageUrls?.[0]})}catch(e){}},x=e=>{if(!e)return"";const t=$()(e),a=$()(),l=a.diff(t,"minute");if(l<60)return`${Math.max(1,l)}åˆ†é’Ÿå‰`;const n=a.diff(t,"hour");return n<24?`${n}å°æ—¶å‰`:t.isSame(a,"year")?t.format("MæœˆDæ—¥ HH:mm"):t.format("YYYYå¹´MæœˆDæ—¥ HH:mm")},K=e=>{a.push(`/users/${e}`)},V=async()=>{if(c.isLoggedIn)try{const e=await D.x.likePost(m.value.id);v.value=e.data,m.value.likeCount=Math.max(0,(m.value.likeCount||0)+(v.value?1:-1))}catch(e){u.nk.error("æ“ä½œå¤±è´¥ï¼Œè¯·ç¨åŽå†è¯•")}else u.nk.warning("è¯·å…ˆç™»å½•")},S=async()=>{if(c.isLoggedIn)try{const e=await D.x.favoritePost(m.value.id);p.value=e.data,m.value.favoriteCount=Math.max(0,(m.value.favoriteCount||0)+(p.value?1:-1))}catch(e){u.nk.error("æ“ä½œå¤±è´¥ï¼Œè¯·ç¨åŽå†è¯•")}else u.nk.warning("è¯·å…ˆç™»å½•")},We=async()=>{if(k.value.trim()){if(!c.isLoggedIn)return u.nk.warning("è¯·å…ˆç™»å½•"),void a.push("/login");y.value=!0;try{await D.x.createComment(m.value.id,{content:k.value,parentId:null}),k.value="",await A(),m.value.commentCount+=1,u.nk.success("è¯„è®ºå‘å¸ƒæˆåŠŸ")}catch(e){u.nk.error("è¯„è®ºå‘å¸ƒå¤±è´¥")}finally{y.value=!1}}else u.nk.warning("è¯„è®ºå†…å®¹ä¸èƒ½ä¸ºç©º")},xe=e=>{f.value=e.id},Ke=async({comment:e,content:t})=>{if(t.trim())try{await D.x.createComment(m.value.id,{content:t,parentId:e.id}),f.value=null,await A(),m.value.commentCount+=1,u.nk.success("å›žå¤å‘å¸ƒæˆåŠŸ")}catch(a){u.nk.error("å›žå¤å‘å¸ƒå¤±è´¥")}else u.nk.warning("å›žå¤å†…å®¹ä¸èƒ½ä¸ºç©º")},Te=()=>{f.value=null},Ve=async e=>{if("delete"===e)try{await i.s.confirm("ç¡®å®šè¦åˆ é™¤è¿™æ¡åŠ¨æ€å—ï¼Ÿåˆ é™¤åŽä¸å¯æ¢å¤ã€‚","åˆ é™¤ç¡®è®¤",{confirmButtonText:"åˆ é™¤",cancelButtonText:"å–æ¶ˆ",type:"warning",confirmButtonClass:"el-button--danger"}),await D.x.deletePost(m.value.id),u.nk.success("åŠ¨æ€å·²åˆ é™¤"),a.push("/")}catch(t){"cancel"!==t&&u.nk.error("åˆ é™¤å¤±è´¥ï¼Œè¯·ç¨åŽå†è¯•")}else"report"===e&&$e("POST",m.value.id)},$e=(e,t)=>{_.value=e,F.value=t,R.value=!0},Se=()=>{},Ue=e=>{if(!c.isLoggedIn)return!1;const t=c.userInfo?.id,a=e.author?.id===t,l=m.value?.author?.id===t,n=c.isAdmin;return a||l||n},De=async e=>{try{await i.s.confirm("ç¡®å®šè¦åˆ é™¤è¿™æ¡è¯„è®ºå—ï¼Ÿ","åˆ é™¤ç¡®è®¤",{confirmButtonText:"åˆ é™¤",cancelButtonText:"å–æ¶ˆ",type:"warning",confirmButtonClass:"el-button--danger"}),await D.x.deleteComment(e.id),u.nk.success("è¯„è®ºå·²åˆ é™¤"),await A(),m.value&&(m.value.commentCount=Math.max(0,(m.value.commentCount||0)-1))}catch(t){"cancel"!==t&&u.nk.error("åˆ é™¤å¤±è´¥ï¼Œè¯·ç¨åŽå†è¯•")}};return(0,l.sV)(()=>{w()}),(0,l.wB)(()=>t.params.id,(e,t)=>{e&&e!==t&&w()}),(e,t)=>{const a=(0,l.g2)("el-skeleton"),r=(0,l.g2)("el-empty"),u=(0,l.g2)("el-avatar"),i=(0,l.g2)("el-icon"),w=(0,l.g2)("el-button"),X=(0,l.g2)("el-dropdown-item"),A=(0,l.g2)("el-dropdown-menu"),W=(0,l.g2)("el-dropdown"),$=(0,l.g2)("el-tag"),U=(0,l.g2)("el-input");return(0,l.uX)(),(0,l.CE)("div",P,[(0,l.Lk)("div",B,[d.value?((0,l.uX)(),(0,l.CE)("div",q,[(0,l.bF)(a,{rows:5,animated:""})])):m.value?((0,l.uX)(),(0,l.CE)("div",O,[(0,l.Lk)("div",H,[(0,l.bF)(u,{src:m.value.author.avatarUrl,size:48,class:"avatar",alt:`${m.value.author.username}çš„å¤´åƒ`,onClick:t[0]||(t[0]=e=>K(m.value.author.id))},null,8,["src","alt"]),(0,l.Lk)("div",G,[(0,l.Lk)("div",{class:"username",onClick:t[1]||(t[1]=e=>K(m.value.author.id))},(0,n.v_)(m.value.author.username),1),(0,l.Lk)("div",Y,[(0,l.Lk)("span",j,(0,n.v_)(x(m.value.createdAt)),1),m.value.location?((0,l.uX)(),(0,l.CE)("span",J,"ðŸ“ "+(0,n.v_)(m.value.location),1)):(0,l.Q3)("",!0),m.value.ipRegion?((0,l.uX)(),(0,l.CE)("span",Z,"IP å±žåœ° "+(0,n.v_)(m.value.ipRegion),1)):m.value.ipAddressMasked?((0,l.uX)(),(0,l.CE)("span",ee,(0,n.v_)(m.value.ipAddressMasked),1)):(0,l.Q3)("",!0)])]),(0,o.R1)(c).isLoggedIn?((0,l.uX)(),(0,l.CE)("div",te,[(0,l.bF)(W,{trigger:"click",onCommand:Ve},{dropdown:(0,l.k6)(()=>[(0,l.bF)(A,null,{default:(0,l.k6)(()=>[L.value?((0,l.uX)(),(0,l.Wv)(X,{key:0,command:"delete",style:{color:"#f56c6c"}},{default:(0,l.k6)(()=>[(0,l.bF)(i,null,{default:(0,l.k6)(()=>[(0,l.bF)((0,o.R1)(s.Delete))]),_:1}),t[4]||(t[4]=(0,l.eW)(" åˆ é™¤åŠ¨æ€ ",-1))]),_:1})):(0,l.Q3)("",!0),L.value?(0,l.Q3)("",!0):((0,l.uX)(),(0,l.Wv)(X,{key:1,command:"report",style:{color:"#e6a23c"}},{default:(0,l.k6)(()=>[(0,l.bF)(i,null,{default:(0,l.k6)(()=>[(0,l.bF)((0,o.R1)(s.WarningFilled))]),_:1}),t[5]||(t[5]=(0,l.eW)(" ä¸¾æŠ¥åŠ¨æ€ ",-1))]),_:1}))]),_:1})]),default:(0,l.k6)(()=>[(0,l.bF)(w,{circle:"",size:"small"},{default:(0,l.k6)(()=>[(0,l.bF)(i,null,{default:(0,l.k6)(()=>[(0,l.bF)((0,o.R1)(s.MoreFilled))]),_:1})]),_:1})]),_:1})])):(0,l.Q3)("",!0)]),(0,l.Lk)("div",ae,[(0,l.Lk)("div",le,(0,n.v_)(m.value.content),1),m.value.imageUrls&&m.value.imageUrls.length>0?((0,l.uX)(),(0,l.CE)("div",ne,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(m.value.imageUrls,(e,t)=>((0,l.uX)(),(0,l.CE)("img",{key:t,src:e,alt:`${m.value.author?.username||"ç”¨æˆ·"}çš„åˆ†äº«å›¾ç‰‡${t+1}`,class:"post-image"},null,8,oe))),128))])):(0,l.Q3)("",!0),m.value.tags?.length?((0,l.uX)(),(0,l.CE)("div",re,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(m.value.tags,e=>((0,l.uX)(),(0,l.Wv)($,{key:e,effect:"dark"},{default:(0,l.k6)(()=>[(0,l.eW)(" # "+(0,n.v_)(e),1)]),_:2},1024))),128))])):(0,l.Q3)("",!0)]),(0,l.Lk)("div",ue,[(0,l.Lk)("div",se,[(0,l.bF)(i,null,{default:(0,l.k6)(()=>[(0,l.bF)((0,o.R1)(s.View))]),_:1}),(0,l.Lk)("span",null,"æµè§ˆ "+(0,n.v_)(m.value.viewCount||0),1)]),(0,l.Lk)("div",{class:(0,n.C4)(["action-item",{active:v.value}]),onClick:V},[(0,l.bF)(i,null,{default:(0,l.k6)(()=>[(0,l.bF)((0,o.R1)(s.GobletFull))]),_:1}),(0,l.Lk)("span",null,(0,n.v_)(v.value?"å·²èµž":"ç‚¹èµž")+" "+(0,n.v_)(m.value.likeCount||0),1)],2),(0,l.Lk)("div",ie,[(0,l.bF)(i,null,{default:(0,l.k6)(()=>[(0,l.bF)((0,o.R1)(s.ChatDotSquare))]),_:1}),(0,l.Lk)("span",null,"è¯„è®º "+(0,n.v_)(m.value.commentCount||0),1)]),(0,l.Lk)("div",{class:(0,n.C4)(["action-item",{active:p.value}]),onClick:S},[(0,l.bF)(i,null,{default:(0,l.k6)(()=>[(0,l.bF)((0,o.R1)(s.Star))]),_:1}),(0,l.Lk)("span",null,(0,n.v_)(p.value?"å·²æ”¶è—":"æ”¶è—")+" "+(0,n.v_)(m.value.favoriteCount||0),1)],2)]),(0,l.Lk)("div",ce,[t[7]||(t[7]=(0,l.Lk)("h3",null,"è¯„è®º",-1)),(0,o.R1)(c).isLoggedIn&&!f.value?((0,l.uX)(),(0,l.CE)("div",me,[(0,l.bF)(U,{modelValue:k.value,"onUpdate:modelValue":t[2]||(t[2]=e=>k.value=e),type:"textarea",placeholder:"å†™ä¸‹ä½ çš„è¯„è®º...",rows:"3"},null,8,["modelValue"]),(0,l.bF)(w,{type:"primary",onClick:We,loading:y.value},{default:(0,l.k6)(()=>[...t[6]||(t[6]=[(0,l.eW)(" å‘å¸ƒè¯„è®º ",-1)])]),_:1},8,["loading"])])):(0,o.R1)(c).isLoggedIn?(0,l.Q3)("",!0):((0,l.uX)(),(0,l.CE)("div",de,[(0,l.bF)(r,{description:"è¯·ç™»å½•åŽå‘è¡¨è¯„è®º"})])),(0,l.Lk)("div",ve,[0===g.value.length?((0,l.uX)(),(0,l.CE)("div",pe," æš‚æ— è¯„è®º ")):((0,l.uX)(),(0,l.CE)("div",ke,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(g.value,e=>((0,l.uX)(),(0,l.Wv)(T,{key:e.id,comment:e,level:0,"avatar-size":32,"can-delete":Ue(e),"can-report":(0,o.R1)(c).isLoggedIn&&!Ue(e),"format-time":x,"can-delete-comment":Ue,"can-report-comment":e=>(0,o.R1)(c).isLoggedIn&&!Ue(e),"reply-target-id":f.value,onReply:xe,onDelete:De,onReport:e=>$e("POST_COMMENT",e.id),onSubmitReply:Ke,onCancelReply:Te},null,8,["comment","can-delete","can-report","can-report-comment","reply-target-id","onReport"]))),128))]))])])])):((0,l.uX)(),(0,l.CE)("div",N,[(0,l.bF)(r,{description:"åŠ¨æ€ä¸å­˜åœ¨æˆ–å·²è¢«åˆ é™¤"})]))]),(0,l.bF)(C,{modelValue:R.value,"onUpdate:modelValue":t[3]||(t[3]=e=>R.value=e),"content-type":_.value,"content-id":F.value,onSuccess:Se},null,8,["modelValue","content-type","content-id"]),!d.value&&m.value?((0,l.uX)(),(0,l.CE)("div",ye,[(0,l.Lk)("div",ge,[(0,l.Lk)("h3",fe,[(0,l.bF)(i,null,{default:(0,l.k6)(()=>[(0,l.bF)((0,o.R1)(s.MagicStick))]),_:1}),t[8]||(t[8]=(0,l.eW)(" ç›¸å…³æŽ¨è ",-1))]),h.value?((0,l.uX)(),(0,l.CE)("div",Ce,[(0,l.bF)(a,{rows:3,animated:""})])):0===b.value.length?((0,l.uX)(),(0,l.CE)("div",be," æš‚æ— ç›¸å…³æŽ¨è ")):((0,l.uX)(),(0,l.CE)("div",he,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(b.value,e=>((0,l.uX)(),(0,l.CE)("div",{key:e.id,class:"similar-item",onClick:t=>E(e.id)},[e.imageUrls?.length?((0,l.uX)(),(0,l.CE)("div",_e,[(0,l.Lk)("img",{src:e.imageUrls[0],alt:e.content},null,8,Fe)])):((0,l.uX)(),(0,l.CE)("div",Le,[(0,l.bF)(i,null,{default:(0,l.k6)(()=>[(0,l.bF)((0,o.R1)(s.Picture))]),_:1})])),(0,l.Lk)("div",we,[(0,l.Lk)("p",Xe,(0,n.v_)(I(e.content,40)),1),(0,l.Lk)("div",Ee,[(0,l.Lk)("span",Ie,(0,n.v_)(e.author?.username),1),(0,l.Lk)("span",Ae,[(0,l.bF)(i,null,{default:(0,l.k6)(()=>[(0,l.bF)((0,o.R1)(s.GobletFull))]),_:1}),(0,l.eW)(" "+(0,n.v_)(e.likeCount||0),1)])])])],8,Re))),128))]))])])):(0,l.Q3)("",!0)])}}};const xe=(0,g.A)(We,[["__scopeId","data-v-cc79be90"]]);var Ke=xe},2549:function(e,t,a){a.d(t,{Eo:function(){return v},Qt:function(){return s},ec:function(){return r},fG:function(){return d},hP:function(){return m},hc:function(){return i},l2:function(){return n},pV:function(){return u},qw:function(){return c},r7:function(){return o}});var l=a(7277);const n=e=>(0,l.A)({url:`/users/${e}`,method:"get"}),o=e=>(0,l.A)({url:"/users/profile",method:"put",data:e}),r=e=>(0,l.A)({url:"/users/password",method:"put",data:e}),u=e=>(0,l.A)({url:`/users/${e}/follow`,method:"post"}),s=e=>(0,l.A)({url:`/users/${e}/follow`,method:"delete"}),i=()=>(0,l.A)({url:"/users/followees",method:"get"}),c=e=>(0,l.A)({url:"/collections",method:"get",params:e}),m=e=>(0,l.A)({url:"/footprints",method:"get",params:e}),d=e=>(0,l.A)({url:"/footprints",method:"post",data:e}),v=e=>(0,l.A)({url:`/users/${e}/block-recommend`,method:"post"})}}]);
//# sourceMappingURL=215.5f829307.js.map