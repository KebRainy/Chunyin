"use strict";(self["webpackChunkChunyin"]=self["webpackChunkChunyin"]||[]).push([[448],{6448:function(e,a,l){l.r(a),l.d(a,{default:function(){return m}});l(4114);var r=l(641),s=l(953),u=l(5220),t=l(2636),n=l(6400),o=l(163);const d={class:"auth-container"};var p={__name:"Login",setup(e){const a=(0,u.rd)(),l=(0,n.k)(),p=(0,s.KR)(),c=(0,s.KR)(!1),i=(0,s.Kh)({username:"",password:""}),m={username:[{required:!0,message:"请输入用户名或邮箱",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]},f=()=>{p.value.validate(async e=>{if(e){c.value=!0;try{const e=await(0,t.iD)(i);l.setUserInfo(e.data.profile),o.nk.success("登录成功");const r=a.currentRoute.value.query.redirect||"/";a.push(r)}catch(r){const e=r?.response?.data?.message||r.message||"登录失败，请检查账号和密码";o.nk.error(e)}finally{c.value=!1}}})},b=()=>{a.push("/register")};return(e,a)=>{const l=(0,r.g2)("el-input"),s=(0,r.g2)("el-form-item"),u=(0,r.g2)("el-button"),t=(0,r.g2)("el-form"),n=(0,r.g2)("el-card");return(0,r.uX)(),(0,r.CE)("div",d,[(0,r.bF)(n,{class:"auth-card"},{default:(0,r.k6)(()=>[a[4]||(a[4]=(0,r.Lk)("h2",null,"登录醇饮社区",-1)),(0,r.bF)(t,{model:i,rules:m,ref_key:"formRef",ref:p,"label-width":"110px"},{default:(0,r.k6)(()=>[(0,r.bF)(s,{label:"用户名 / 邮箱",prop:"username"},{default:(0,r.k6)(()=>[(0,r.bF)(l,{modelValue:i.username,"onUpdate:modelValue":a[0]||(a[0]=e=>i.username=e),placeholder:"请输入用户名或邮箱"},null,8,["modelValue"])]),_:1}),(0,r.bF)(s,{label:"密码",prop:"password"},{default:(0,r.k6)(()=>[(0,r.bF)(l,{modelValue:i.password,"onUpdate:modelValue":a[1]||(a[1]=e=>i.password=e),type:"password","show-password":"",placeholder:"请输入密码"},null,8,["modelValue"])]),_:1}),(0,r.bF)(s,null,{default:(0,r.k6)(()=>[(0,r.bF)(u,{type:"primary",loading:c.value,onClick:f},{default:(0,r.k6)(()=>[...a[2]||(a[2]=[(0,r.eW)("登录",-1)])]),_:1},8,["loading"]),(0,r.bF)(u,{type:"text",onClick:b},{default:(0,r.k6)(()=>[...a[3]||(a[3]=[(0,r.eW)("注册新账号",-1)])]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})])}}},c=l(6262);const i=(0,c.A)(p,[["__scopeId","data-v-7d2b93d2"]]);var m=i}}]);
//# sourceMappingURL=448.940a591f.js.map