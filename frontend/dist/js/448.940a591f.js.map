{"version":3,"file":"js/448.940a591f.js","mappings":"+RA2BA,MAAMA,GAASC,EAAAA,EAAAA,MACTC,GAAYC,EAAAA,EAAAA,KACZC,GAAUC,EAAAA,EAAAA,MACVC,GAAUD,EAAAA,EAAAA,KAAI,GACdE,GAAOC,EAAAA,EAAAA,IAAS,CACpBC,SAAU,GACVC,SAAU,KAGNC,EAAQ,CACZF,SAAU,CAAC,CAAEG,UAAU,EAAMC,QAAS,YAAaC,QAAS,SAC5DJ,SAAU,CAAC,CAAEE,UAAU,EAAMC,QAAS,QAASC,QAAS,UAGpDC,EAAaA,KACjBX,EAAQY,MAAMC,SAASC,UACrB,GAAKC,EAAL,CACAb,EAAQU,OAAQ,EAChB,IACE,MAAMI,QAAYC,EAAAA,EAAAA,IAAMd,GACxBL,EAAUoB,YAAYF,EAAIG,KAAKC,SAC/BC,EAAAA,GAAUC,QAAQ,QAGlB,MAAMC,EAAW3B,EAAO4B,aAAaZ,MAAMa,MAAMF,UAAY,IAC7D3B,EAAO8B,KAAKH,EACd,CAAE,MAAOI,GACP,MAAMlB,EAAUkB,GAAOC,UAAUT,MAAMV,SAAWkB,EAAMlB,SAAW,gBACnEY,EAAAA,GAAUM,MAAMlB,EAClB,CAAE,QACAP,EAAQU,OAAQ,CAClB,CAfkB,KAmBhBiB,EAAaA,KACjBjC,EAAO8B,KAAK,c,4JA9DZI,EAAAA,EAAAA,IAgBM,MAhBNC,EAgBM,EAfJC,EAAAA,EAAAA,IAcUC,EAAA,CAdDC,MAAM,aAAW,C,iBACxB,IAAe,C,aAAfC,EAAAA,EAAAA,IAAe,UAAX,UAAM,KACVH,EAAAA,EAAAA,IAWUI,EAAA,CAXAC,MAAOlC,EAAOI,MAAOA,E,QAAW,UAAJN,IAAID,EAAU,cAAY,S,kBAC9D,IAEe,EAFfgC,EAAAA,EAAAA,IAEeM,EAAA,CAFDC,MAAM,WAAWC,KAAK,Y,kBAClC,IAA4D,EAA5DR,EAAAA,EAAAA,IAA4DS,EAAA,C,WAAzCtC,EAAKE,S,qCAALF,EAAKE,SAAQqC,GAAEC,YAAY,a,gCAEhDX,EAAAA,EAAAA,IAEeM,EAAA,CAFDC,MAAM,KAAKC,KAAK,Y,kBAC5B,IAAsF,EAAtFR,EAAAA,EAAAA,IAAsFS,EAAA,C,WAAnEtC,EAAKG,S,qCAALH,EAAKG,SAAQoC,GAAEE,KAAK,WAAW,mBAAcD,YAAY,S,gCAE9EX,EAAAA,EAAAA,IAGeM,EAAA,M,iBAFb,IAA+E,EAA/EN,EAAAA,EAAAA,IAA+Ea,EAAA,CAApED,KAAK,UAAW1C,QAASA,EAAAU,MAAUkC,QAAOnC,G,kBAAY,IAAE,IAAAoC,EAAA,KAAAA,EAAA,K,QAAF,MAAE,O,qBACnEf,EAAAA,EAAAA,IAA4Da,EAAA,CAAjDD,KAAK,OAAQE,QAAOjB,G,kBAAY,IAAK,IAAAkB,EAAA,KAAAA,EAAA,K,QAAL,SAAK,O,yDCP1D,MAAMC,GAA2B,OAAgB,EAAQ,CAAC,CAAC,YAAY,qBAEvE,O","sources":["webpack://Chunyin/./src/views/auth/Login.vue","webpack://Chunyin/./src/views/auth/Login.vue?930c"],"sourcesContent":["<template>\n  <div class=\"auth-container\">\n    <el-card class=\"auth-card\">\n      <h2>登录醇饮社区</h2>\n      <el-form :model=\"form\" :rules=\"rules\" ref=\"formRef\" label-width=\"110px\">\n        <el-form-item label=\"用户名 / 邮箱\" prop=\"username\">\n          <el-input v-model=\"form.username\" placeholder=\"请输入用户名或邮箱\" />\n        </el-form-item>\n        <el-form-item label=\"密码\" prop=\"password\">\n          <el-input v-model=\"form.password\" type=\"password\" show-password placeholder=\"请输入密码\" />\n        </el-form-item>\n        <el-form-item>\n          <el-button type=\"primary\" :loading=\"loading\" @click=\"submitForm\">登录</el-button>\n          <el-button type=\"text\" @click=\"goRegister\">注册新账号</el-button>\n        </el-form-item>\n      </el-form>\n    </el-card>\n  </div>\n</template>\n\n<script setup>\nimport { reactive, ref } from 'vue'\nimport { useRouter } from 'vue-router'\nimport { login } from '@/api/auth'\nimport { useUserStore } from '@/store/modules/user'\nimport { ElMessage } from 'element-plus'\n\nconst router = useRouter()\nconst userStore = useUserStore()\nconst formRef = ref()\nconst loading = ref(false)\nconst form = reactive({\n  username: '',\n  password: ''\n})\n\nconst rules = {\n  username: [{ required: true, message: '请输入用户名或邮箱', trigger: 'blur' }],\n  password: [{ required: true, message: '请输入密码', trigger: 'blur' }]\n}\n\nconst submitForm = () => {\n  formRef.value.validate(async (valid) => {\n    if (!valid) return\n    loading.value = true\n    try {\n      const res = await login(form)\n      userStore.setUserInfo(res.data.profile)\n      ElMessage.success('登录成功')\n      \n      // 登录成功后，如果有重定向路径，跳转到该路径，否则跳转到首页\n      const redirect = router.currentRoute.value.query.redirect || '/'\n      router.push(redirect)\n    } catch (error) {\n      const message = error?.response?.data?.message || error.message || '登录失败，请检查账号和密码'\n      ElMessage.error(message)\n    } finally {\n      loading.value = false\n    }\n  })\n}\n\nconst goRegister = () => {\n  router.push('/register')\n}\n</script>\n\n<style scoped>\n.auth-container {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  min-height: 70vh;\n}\n\n.auth-card {\n  width: 420px;\n  padding: 30px 20px;\n}\n\nh2 {\n  text-align: center;\n  margin-bottom: 24px;\n}\n</style>\n","import script from \"./Login.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./Login.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./Login.vue?vue&type=style&index=0&id=7d2b93d2&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-7d2b93d2\"]])\n\nexport default __exports__"],"names":["router","useRouter","userStore","useUserStore","formRef","ref","loading","form","reactive","username","password","rules","required","message","trigger","submitForm","value","validate","async","valid","res","login","setUserInfo","data","profile","ElMessage","success","redirect","currentRoute","query","push","error","response","goRegister","_createElementBlock","_hoisted_1","_createVNode","_component_el_card","class","_createElementVNode","_component_el_form","model","_component_el_form_item","label","prop","_component_el_input","$event","placeholder","type","_component_el_button","onClick","_cache","__exports__"],"ignoreList":[],"sourceRoot":""}