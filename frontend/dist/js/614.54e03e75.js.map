{"version":3,"file":"js/614.54e03e75.js","mappings":"wVAEO,MAAMA,EAAoBC,IACxBC,EAAAA,EAAAA,GAAQ,CACbC,IAAK,UAAUF,IACfG,OAAQ,QAICC,EAAiBC,IACrBJ,EAAAA,EAAAA,GAAQ,CACbC,IAAK,iBACLC,OAAQ,MACRE,SAISC,EAAkBD,IACtBJ,EAAAA,EAAAA,GAAQ,CACbC,IAAK,kBACLC,OAAQ,MACRE,SAISE,EAAcP,IAClBC,EAAAA,EAAAA,GAAQ,CACbC,IAAK,UAAUF,WACfG,OAAQ,SAICK,EAAgBR,IACpBC,EAAAA,EAAAA,GAAQ,CACbC,IAAK,UAAUF,WACfG,OAAQ,WAICM,EAAeA,KACnBR,EAAAA,EAAAA,GAAQ,CACbC,IAAK,mBACLC,OAAQ,QAICO,EAAkBC,IACtBV,EAAAA,EAAAA,GAAQ,CACbC,IAAK,eACLC,OAAQ,MACRQ,WAISC,EAAiBD,IACrBV,EAAAA,EAAAA,GAAQ,CACbC,IAAK,cACLC,OAAQ,MACRQ,WAISE,EAAmBR,IACvBJ,EAAAA,EAAAA,GAAQ,CACbC,IAAK,cACLC,OAAQ,OACRE,Q,gnCCoHJ,MAAMS,GAAQC,EAAAA,EAAAA,MACRC,GAASC,EAAAA,EAAAA,MACTC,GAAYC,EAAAA,EAAAA,KAEZC,GAAOC,EAAAA,EAAAA,IAAI,MACXC,GAAUD,EAAAA,EAAAA,IAAI,IACdE,GAAUF,EAAAA,EAAAA,KAAI,GACdG,GAAcH,EAAAA,EAAAA,IAAI,IAClBI,GAAoBJ,EAAAA,EAAAA,KAAI,GACxBK,GAAoBL,EAAAA,EAAAA,IAAI,IACxBM,IAAuBN,EAAAA,EAAAA,KAAI,GAC3BO,IAAqBP,EAAAA,EAAAA,IAAI,MACzBQ,IAAYR,EAAAA,EAAAA,IAAI,YAChBS,IAAcT,EAAAA,EAAAA,IAAI,CACtBU,OAAQ,GACRC,OAAQ,KAEJC,IAAwBZ,EAAAA,EAAAA,KAAI,GAE5Ba,GAAK,IAAIC,EAAAA,EAAW,CACxBC,MAAM,EACNC,SAAS,EACTC,QAAQ,IAGJC,IAAkBC,EAAAA,EAAAA,IAAS,IAC1BpB,EAAKqB,OAAOC,QAGVC,EAAAA,EAAUC,SAASV,GAAGW,OAAOzB,EAAKqB,MAAMC,UAFtC,iCAKLI,IAAWN,EAAAA,EAAAA,IAAS,IACnBpB,EAAKqB,OAAOC,QACVtB,EAAKqB,MAAMC,QAAQK,MAAM,MAC7BC,OAAOC,GAAQ,aAAaC,KAAKD,IACjCE,IAAIF,IACH,MAAMG,EAAQH,EAAKI,MAAM,OAAO,GAAGC,OACnC,MAAO,CACLF,QACAG,KAAMN,EAAKO,QAAQ,MAAO,IAAIC,UAPH,IAY7BC,IAAUlB,EAAAA,EAAAA,IAAS,OAClBtB,EAAUyC,WAAavC,EAAKqB,SACE,UAA5BvB,EAAUyC,SAASC,MACxBxC,EAAKqB,MAAMoB,QAAQ7D,KAAOkB,EAAUyC,SAAS3D,KAG3C8D,GAAWC,UACfxC,EAAQkB,OAAQ,EAChB,IACE,MAAMuB,QAAiBC,EAAAA,EAAAA,IAAcnD,EAAMH,OAAOuD,MAClD9C,EAAKqB,MAAQuB,EAAS3D,WAChB8D,WACAC,KACNC,IACF,CAAE,MAAOC,GACPC,EAAAA,GAAUD,MAAM,SAClB,CAAE,QACA/C,EAAQkB,OAAQ,CAClB,GAGI0B,GAAcJ,UAClB,IACE,MAAMS,QAAYC,EAAAA,EAAAA,IAAiB3D,EAAMH,OAAOuD,MAChD5C,EAAQmB,MAAQ+B,EAAInE,MAAQ,EAC9B,CAAE,MAAOiE,GACPhD,EAAQmB,MAAQ,EAClB,GAGI2B,GAAkBL,UACtBtC,EAAkBgB,OAAQ,EAC1B,IACE,MAAM+B,QAAYE,EAAAA,EAAAA,IAAqB5D,EAAMH,OAAOuD,MACpD1C,EAAYiB,MAAQ+B,EAAInE,MAAQ,EAClC,CAAE,MAAOiE,GACP9C,EAAYiB,MAAQ,EACtB,CAAE,QACAhB,EAAkBgB,OAAQ,CAC5B,GAGI4B,GAAsBN,UAC1B,GAAK7C,EAAUyD,YAAevD,EAAKqB,MACnC,UACQ5B,EAAAA,EAAAA,IAAgB,CACpB+D,WAAY,OACZC,SAAUzD,EAAKqB,MAAMzC,GACrB8E,MAAO1D,EAAKqB,MAAMqC,MAClBC,QAAS3D,EAAKqB,MAAMsC,SAExB,CAAE,MAAOT,GACP,GAIEU,GAAcC,GACbA,EACEC,IAAMD,GAAME,OAAO,mBADR,GAIdC,GAAWA,KACXhE,EAAKqB,OACPzB,EAAOqE,KAAK,cAAcjE,EAAKqB,MAAMzC,OAInCsF,GAAevB,UACnB,GAAK7C,EAAUyD,WAIf,IACE,MAAMH,QAAYe,EAAAA,EAAAA,IAAiBnE,EAAKqB,MAAMzC,IAC9CoB,EAAKqB,MAAM+C,UAAYhB,EAAInE,KAC3BkE,EAAAA,GAAUkB,QAAQrE,EAAKqB,MAAM+C,UAAY,MAAQ,QACnD,CAAE,MAAOlB,GACPC,EAAAA,GAAUD,MAAM,OAClB,MATEtD,EAAOqE,KAAK,WAYVK,GAAuBA,KACtBxE,EAAUyD,WAIf/C,GAAmBa,OAAOkD,QAHxBC,MAMEC,GAAmB9B,UACvB,GAAK7C,EAAUyD,WAIf,GAAKjD,EAAkBe,MAAMgB,OAA7B,CAIA9B,GAAqBc,OAAQ,EAC7B,IACE,MAAM+B,QAAYsB,EAAAA,EAAAA,IAAqBhF,EAAMH,OAAOuD,KAAM,CAAExB,QAAShB,EAAkBe,MAAMgB,SAC7FjC,EAAYiB,MAAMsD,QAAQvB,EAAInE,MAC9BqB,EAAkBe,MAAQ,GAC1B8B,EAAAA,GAAUkB,QAAQ,QACpB,CAAE,MAAOnB,GACPC,EAAAA,GAAUD,MAAMA,EAAMN,UAAU3D,MAAM2F,SAAW,OACnD,CAAE,QACArE,GAAqBc,OAAQ,CAC/B,CAXA,MAFE8B,EAAAA,GAAU0B,QAAQ,gBAJlBL,MAoBEM,GAAoBnC,UACxB,GAAK7C,EAAUyD,WAIf,GAAK7C,GAAYW,MAAMV,OAAO0B,QAAW3B,GAAYW,MAAMT,OAAOyB,OAAlE,CAIAxB,GAAsBQ,OAAQ,EAC9B,UACQqD,EAAAA,EAAAA,IAAqBhF,EAAMH,OAAOuD,KAAM,CAC5CxB,QAAS,SAASZ,GAAYW,MAAMV,UAAUD,GAAYW,MAAMT,WAElEF,GAAYW,MAAMV,OAAS,GAC3BD,GAAYW,MAAMT,OAAS,GAC3BuC,EAAAA,GAAUkB,QAAQ,SACM,eAApB5D,GAAUY,QACZZ,GAAUY,MAAQ,oBAEd2B,IACR,CAAE,MAAOE,GACPC,EAAAA,GAAUD,MAAMA,EAAMN,UAAU3D,MAAM2F,SAAW,OACnD,CAAE,QACA/D,GAAsBQ,OAAQ,CAChC,CAjBA,MAFE8B,EAAAA,GAAU0B,QAAQ,mBAJlBL,MA0BEA,GAAUA,KACd5E,EAAOqE,KAAK,W,OAGdc,EAAAA,EAAAA,IAAU,KACRrC,O,+QAlXAsC,EAAAA,EAAAA,IAuKM,MAvKNC,EAuKM,CAtKO9E,EAAAkB,Q,WAAX2D,EAAAA,EAAAA,IAEM,MAFNE,EAEM,EADJC,EAAAA,EAAAA,IAAkCC,EAAA,CAApBC,KAAM,EAAGC,SAAA,QAERtF,EAAAqB,Q,WAGjB2D,EAAAA,EAAAA,IA+JM,MA/JNO,EA+JM,EA9JJC,EAAAA,EAAAA,IAkBQ,QAlBRC,EAkBQ,C,aAjBND,EAAAA,EAAAA,IAEM,OAFDE,MAAM,SAAO,EAChBF,EAAAA,EAAAA,IAA4F,OAAvFG,IAAI,qEAAqEC,IAAI,c,KAEpFJ,EAAAA,EAAAA,IAOM,MAPNK,EAOM,C,aANJL,EAAAA,EAAAA,IAAW,UAAP,MAAE,KACNA,EAAAA,EAAAA,IAIK,a,aAHHR,EAAAA,EAAAA,IAEKc,EAAAA,GAAA,MAAAC,EAAAA,EAAAA,IAFuBrE,GAAAL,MAAQ,CAAxB2E,EAAMC,M,WAAlBjB,EAAAA,EAAAA,IAEK,MAFkCkB,IAAKD,GAAK,EAC/CT,EAAAA,EAAAA,IAA4B,aAAAW,EAAAA,EAAAA,IAAnBH,EAAK7D,MAAI,O,WAIxBqD,EAAAA,EAAAA,IAKM,MALNY,EAKM,EAJJjB,EAAAA,EAAAA,IAEYkB,EAAA,CAFDC,KAAK,UAAUC,MAAA,GAAMC,KAAK,QAASC,QAAOvC,I,kBACnD,IAAqC,E,iBAAlClE,EAAAqB,MAAK+C,UAAY,MAAQ,QAAX,K,OAEFsC,EAAAA,EAAAA,IAAA5G,GAAUyD,YAAcjB,GAAAjB,Q,WAAzCsF,EAAAA,EAAAA,IAAiGN,EAAA,C,MAA/CG,KAAK,QAASC,QAAOzC,I,kBAAU,IAAI,IAAA4C,EAAA,KAAAA,EAAA,K,QAAJ,QAAI,O,4BAIzFpB,EAAAA,EAAAA,IAyIO,OAzIPqB,EAyIO,EAxILrB,EAAAA,EAAAA,IASS,SATTsB,EASS,EARPtB,EAAAA,EAAAA,IAMM,Y,aALJA,EAAAA,EAAAA,IAAyB,KAAtBE,MAAM,WAAU,MAAE,KACrBF,EAAAA,EAAAA,IAAyB,WAAAW,EAAAA,EAAAA,IAAlBnG,EAAAqB,MAAKqC,OAAK,IACjB8B,EAAAA,EAAAA,IAEI,IAFJuB,EAAgB,UACTZ,EAAAA,EAAAA,IAAGvC,GAAW5D,EAAAqB,MAAK2F,YAAa,OAAGb,EAAAA,EAAAA,IAAGnG,EAAAqB,MAAK4F,gBAAkB,MAAJ,KAGrB,cAAhBjH,EAAAqB,MAAK6F,S,WAAlCP,EAAAA,EAAAA,IAAsEQ,EAAA,C,MAA9Db,KAAK,W,kBAA6C,IAAG,IAAAM,EAAA,KAAAA,EAAA,K,QAAH,OAAG,O,0BAG/DzB,EAAAA,EAAAA,IA4HUiC,GAAA,C,WA5HQ3G,GAAAY,M,qCAAAZ,GAASY,MAAAgG,GAAE3B,MAAM,a,kBACjC,IAOc,EAPdP,EAAAA,EAAAA,IAOcmC,EAAA,CAPDC,MAAM,OAAOC,KAAK,Y,kBAC7B,IAGU,CAH0BxH,EAAAqB,MAAKsC,U,WAAzCqB,EAAAA,EAAAA,IAGU,UAHVyC,EAGU,C,aAFRjC,EAAAA,EAAAA,IAAW,UAAP,MAAE,KACNA,EAAAA,EAAAA,IAAyB,UAAAW,EAAAA,EAAAA,IAAnBnG,EAAAqB,MAAKsC,SAAO,O,gBAGpB6B,EAAAA,EAAAA,IAAiE,WAAxDE,MAAM,eAAegC,UAAQvG,GAAAE,O,mBAGxC8D,EAAAA,EAAAA,IAmDcmC,EAAA,CAnDDC,MAAM,OAAOC,KAAK,c,kBAC7B,IAiDU,EAjDVhC,EAAAA,EAAAA,IAiDU,UAjDVmC,EAiDU,EAhDRnC,EAAAA,EAAAA,IAGM,MAHNoC,EAGM,C,eAFJpC,EAAAA,EAAAA,IAAW,UAAP,MAAE,KACNL,EAAAA,EAAAA,IAA2EkB,EAAA,CAAhElE,KAAA,GAAKqE,KAAK,QAASC,QAAOnC,I,kBAAsB,IAAI,IAAAsC,EAAA,MAAAA,EAAA,M,QAAJ,QAAI,O,QAEtDvG,EAAAgB,Q,WAAX2D,EAAAA,EAAAA,IAEM,MAFN6C,EAEM,EADJ1C,EAAAA,EAAAA,IAAkCC,EAAA,CAApBC,KAAM,EAAGC,SAAA,U,WAEzBN,EAAAA,EAAAA,IAwCM,MAAA8C,EAAA,EAvCOpB,EAAAA,EAAAA,IAAA5G,GAAUyD,a,WAArByB,EAAAA,EAAAA,IAoBM,MApBN+C,EAoBM,EAnBJ5C,EAAAA,EAAAA,IAQE6C,EAAA,C,QAPI,qBAAJ/H,IAAIO,G,WACKF,EAAAe,M,qCAAAf,EAAiBe,MAAAgG,GAC1Bf,KAAK,WACL2B,YAAY,eACX5C,KAAM,EACP6C,UAAU,OACV,sB,wBAEF1C,EAAAA,EAAAA,IASM,MATN2C,EASM,EARJhD,EAAAA,EAAAA,IAOYkB,EAAA,CANVC,KAAK,UACLE,KAAK,QACJrG,QAASI,GAAAc,MACToF,QAAOhC,I,kBACT,IAED,IAAAmC,EAAA,MAAAA,EAAA,M,QAFC,UAED,O,sCAGJ5B,EAAAA,EAAAA,IAEM,MAFNoD,EAEM,EADJjD,EAAAA,EAAAA,IAA2DkB,EAAA,CAAhDC,KAAK,OAAQG,QAAOjC,I,kBAAS,IAAO,IAAAoC,EAAA,MAAAA,EAAA,M,QAAP,WAAO,O,SAEf,IAAvBxG,EAAAiB,MAAYa,S,WAAvB8C,EAAAA,EAAAA,IAEM,MAFNqD,EAEM,EADJlD,EAAAA,EAAAA,IAAwCmD,EAAA,CAA9BC,YAAY,uB,WAExBvD,EAAAA,EAAAA,IAWM,MAXNwD,EAWM,G,aAVJxD,EAAAA,EAAAA,IASMc,EAAAA,GAAA,MAAAC,EAAAA,EAAAA,IATc3F,EAAAiB,MAAR2E,K,WAAZhB,EAAAA,EAAAA,IASM,OAT4BkB,IAAKF,EAAKpH,GAAI8G,MAAM,mB,EACpDP,EAAAA,EAAAA,IAAsDsD,EAAA,CAA1C9C,IAAKK,EAAKvD,QAAQiG,UAAYlC,KAAM,I,iBAChDhB,EAAAA,EAAAA,IAMM,MANNmD,EAMM,EALJnD,EAAAA,EAAAA,IAGM,MAHNoD,EAGM,EAFJpD,EAAAA,EAAAA,IAAiE,OAAjEqD,GAAiE1C,EAAAA,EAAAA,IAAzCH,EAAKvD,QAAQqG,UAAY,QAAJ,IAC7CtD,EAAAA,EAAAA,IAA0D,OAA1DuD,GAA0D5C,EAAAA,EAAAA,IAApCvC,GAAWoC,EAAKgD,YAAS,MAEjDxD,EAAAA,EAAAA,IAAiD,IAAjDyD,GAAiD9C,EAAAA,EAAAA,IAAnBH,EAAK1E,SAAO,S,uBAQtD6D,EAAAA,EAAAA,IAkBcmC,EAAA,CAlBDC,MAAM,OAAOC,KAAK,W,kBAC7B,IAgBU,EAhBVhC,EAAAA,EAAAA,IAgBU,UAhBV0D,EAgBU,C,eAfR1D,EAAAA,EAAAA,IAEM,OAFDE,MAAM,kBAAgB,EACzBF,EAAAA,EAAAA,IAAa,UAAT,U,IAEwB,IAAnBtF,EAAAmB,MAAQa,S,WAAnB8C,EAAAA,EAAAA,IAEM,MAFNmE,EAEM,EADJhE,EAAAA,EAAAA,IAAiCmD,EAAA,CAAvBC,YAAY,gB,WAExBvD,EAAAA,EAAAA,IAQM,MARNoE,EAQM,G,aAPJpE,EAAAA,EAAAA,IAMMc,EAAAA,GAAA,MAAAC,EAAAA,EAAAA,IANc7F,EAAAmB,MAAR2E,K,WAAZhB,EAAAA,EAAAA,IAMM,OANwBkB,IAAKF,EAAKpH,GAAI8G,MAAM,gB,EAChDF,EAAAA,EAAAA,IAGM,aAFJA,EAAAA,EAAAA,IAAmD,IAAnD6D,GAAmDlD,EAAAA,EAAAA,IAAtBH,EAAKsD,YAAU,IAC5C9D,EAAAA,EAAAA,IAA8D,IAA9D+D,GAA8DpD,EAAAA,EAAAA,IAAhCH,EAAKrC,SAAW,WAAJ,MAE5C6B,EAAAA,EAAAA,IAAkE,OAAlEgE,GAAkErD,EAAAA,EAAAA,IAApCvC,GAAWoC,EAAKgD,YAAS,O,oBAM/D7D,EAAAA,EAAAA,IAwCcmC,EAAA,CAxCDC,MAAM,OAAOC,KAAK,gB,kBAC7B,IAsCU,EAtCVhC,EAAAA,EAAAA,IAsCU,UAtCViE,EAsCU,C,eArCRjE,EAAAA,EAAAA,IAEI,KAFDE,MAAM,OAAM,+CAEf,KACAP,EAAAA,EAAAA,IAiCUuE,EAAA,CAhCPC,MAAOjJ,GAAAW,MACR,cAAY,OACZqE,MAAM,qB,kBAEN,IAKe,EALfP,EAAAA,EAAAA,IAKeyE,EAAA,CALDrC,MAAM,QAAM,C,iBACxB,IAGE,EAHFpC,EAAAA,EAAAA,IAGE6C,EAAA,C,WAFStH,GAAAW,MAAYV,O,qCAAZD,GAAAW,MAAYV,OAAM0G,GAC3BY,YAAY,c,gCAGhB9C,EAAAA,EAAAA,IASeyE,EAAA,CATDrC,MAAM,QAAM,C,iBACxB,IAOE,EAPFpC,EAAAA,EAAAA,IAOE6C,EAAA,C,WANStH,GAAAW,MAAYT,O,qCAAZF,GAAAW,MAAYT,OAAMyG,GAC3Bf,KAAK,WACJjB,KAAM,EACP6C,UAAU,MACV,qBACAD,YAAY,+B,gCAGhB9C,EAAAA,EAAAA,IAWeyE,EAAA,M,iBAVb,IAMY,EANZzE,EAAAA,EAAAA,IAMYkB,EAAA,CALVC,KAAK,UACJnG,QAASU,GAAAQ,MACToF,QAAO3B,I,kBACT,IAED,IAAA8B,EAAA,MAAAA,EAAA,M,QAFC,UAED,O,qBACiBF,EAAAA,EAAAA,IAAA5G,GAAUyD,YAAcjB,GAAAjB,Q,WAAzCsF,EAAAA,EAAAA,IAEYN,EAAA,C,MAFsClE,KAAA,GAAMsE,QAAOzC,I,kBAAU,IAEzE,IAAA4C,EAAA,MAAAA,EAAA,M,QAFyE,iBAEzE,O,wGA3Jd5B,EAAAA,EAAAA,IAEM,MAFN6E,EAEM,EADJ1E,EAAAA,EAAAA,IAAqCmD,EAAA,CAA3BC,YAAY,oB,aCA5B,MAAMuB,GAA2B,OAAgB,EAAQ,CAAC,CAAC,YAAY,qBAEvE,O","sources":["webpack://demo2/./src/api/user.js","webpack://demo2/./src/views/wiki/WikiDetail.vue","webpack://demo2/./src/views/wiki/WikiDetail.vue?224b"],"sourcesContent":["import request from './request'\r\n\r\nexport const fetchUserProfile = (id) => {\r\n  return request({\r\n    url: `/users/${id}`,\r\n    method: 'get'\r\n  })\r\n}\r\n\r\nexport const updateProfile = (data) => {\r\n  return request({\r\n    url: '/users/profile',\r\n    method: 'put',\r\n    data\r\n  })\r\n}\r\n\r\nexport const changePassword = (data) => {\r\n  return request({\r\n    url: '/users/password',\r\n    method: 'put',\r\n    data\r\n  })\r\n}\r\n\r\nexport const followUser = (id) => {\r\n  return request({\r\n    url: `/users/${id}/follow`,\r\n    method: 'post'\r\n  })\r\n}\r\n\r\nexport const unfollowUser = (id) => {\r\n  return request({\r\n    url: `/users/${id}/follow`,\r\n    method: 'delete'\r\n  })\r\n}\r\n\r\nexport const getFollowees = () => {\r\n  return request({\r\n    url: '/users/followees',\r\n    method: 'get'\r\n  })\r\n}\r\n\r\nexport const getCollections = (params) => {\r\n  return request({\r\n    url: '/collections',\r\n    method: 'get',\r\n    params\r\n  })\r\n}\r\n\r\nexport const getFootprints = (params) => {\r\n  return request({\r\n    url: '/footprints',\r\n    method: 'get',\r\n    params\r\n  })\r\n}\r\n\r\nexport const recordFootprint = (data) => {\r\n  return request({\r\n    url: '/footprints',\r\n    method: 'post',\r\n    data\r\n  })\r\n}\r\n","<template>\n  <div class=\"wiki-detail-page\">\n    <div v-if=\"loading\" class=\"loading\">\n      <el-skeleton :rows=\"6\" animated />\n    </div>\n    <div v-else-if=\"!wiki\" class=\"not-found\">\n      <el-empty description=\"词条不存在或已被删除\" />\n    </div>\n    <div v-else class=\"wiki-layout\">\n      <aside class=\"wiki-sidebar\">\n        <div class=\"cover\">\n          <img src=\"https://images.unsplash.com/photo-1504674900247-0877df9cc836?w=600\" alt=\"concept\">\n        </div>\n        <div class=\"toc\">\n          <h4>目录</h4>\n          <ul>\n            <li v-for=\"(item, index) in tocItems\" :key=\"index\">\n              <span>{{ item.text }}</span>\n            </li>\n          </ul>\n        </div>\n        <div class=\"sidebar-actions\">\n          <el-button type=\"primary\" plain size=\"small\" @click=\"favoritePage\">\n            {{ wiki.favorited ? '已收藏' : '收藏词条' }}\n          </el-button>\n          <el-button v-if=\"userStore.isLoggedIn && canEdit\" size=\"small\" @click=\"editWiki\">编辑条目</el-button>\n        </div>\n      </aside>\n\n      <main class=\"wiki-main\">\n        <header class=\"wiki-header\">\n          <div>\n            <p class=\"eyebrow\">词条</p>\n            <h1>{{ wiki.title }}</h1>\n            <p class=\"meta\">\n              最后更新 {{ formatTime(wiki.updatedAt) }} · {{ wiki.lastEditorName || '系统' }}\n            </p>\n          </div>\n          <el-tag type=\"success\" v-if=\"wiki.status === 'PUBLISHED'\">已发布</el-tag>\n        </header>\n\n        <el-tabs v-model=\"activeTab\" class=\"wiki-tabs\">\n          <el-tab-pane label=\"条目信息\" name=\"overview\">\n            <section class=\"wiki-summary\" v-if=\"wiki.summary\">\n              <h4>概要</h4>\n              <p>{{ wiki.summary }}</p>\n            </section>\n\n            <article class=\"wiki-article\" v-html=\"renderedContent\"></article>\n          </el-tab-pane>\n\n          <el-tab-pane label=\"用户讨论\" name=\"discussion\">\n            <section class=\"wiki-discussion\">\n              <div class=\"section-header\">\n                <h3>讨论</h3>\n                <el-button text size=\"small\" @click=\"focusDiscussionInput\">发起讨论</el-button>\n              </div>\n              <div v-if=\"discussionLoading\" class=\"discussion-loading\">\n                <el-skeleton :rows=\"3\" animated />\n              </div>\n              <div v-else>\n                <div v-if=\"userStore.isLoggedIn\" class=\"discussion-form\">\n                  <el-input\n                    ref=\"discussionInputRef\"\n                    v-model=\"discussionContent\"\n                    type=\"textarea\"\n                    placeholder=\"写下你的问题或观点...\"\n                    :rows=\"3\"\n                    maxlength=\"1000\"\n                    show-word-limit\n                  />\n                  <div class=\"discussion-actions\">\n                    <el-button\n                      type=\"primary\"\n                      size=\"small\"\n                      :loading=\"submittingDiscussion\"\n                      @click=\"submitDiscussion\"\n                    >\n                      发布讨论\n                    </el-button>\n                  </div>\n                </div>\n                <div v-else class=\"discussion-login\">\n                  <el-button type=\"text\" @click=\"goLogin\">登录后参与讨论</el-button>\n                </div>\n                <div v-if=\"discussions.length === 0\" class=\"discussion-empty\">\n                  <el-empty description=\"暂时还没有讨论，快来参与吧\" />\n                </div>\n                <div v-else class=\"discussion-list\">\n                  <div v-for=\"item in discussions\" :key=\"item.id\" class=\"discussion-item\">\n                    <el-avatar :src=\"item.author?.avatarUrl\" :size=\"36\" />\n                    <div class=\"discussion-body\">\n                      <div class=\"discussion-meta\">\n                        <span class=\"author\">{{ item.author?.username || '匿名用户' }}</span>\n                        <span class=\"time\">{{ formatTime(item.createdAt) }}</span>\n                      </div>\n                      <p class=\"discussion-text\">{{ item.content }}</p>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </section>\n          </el-tab-pane>\n\n          <el-tab-pane label=\"历史版本\" name=\"history\">\n            <section class=\"wiki-history\">\n              <div class=\"section-header\">\n                <h3>历史版本</h3>\n              </div>\n              <div v-if=\"history.length === 0\" class=\"history-empty\">\n                <el-empty description=\"暂无历史记录\" />\n              </div>\n              <div v-else class=\"history-list\">\n                <div v-for=\"item in history\" :key=\"item.id\" class=\"history-item\">\n                  <div>\n                    <p class=\"history-editor\">{{ item.editorName }}</p>\n                    <p class=\"history-summary\">{{ item.summary || '更新了词条内容' }}</p>\n                  </div>\n                  <span class=\"history-time\">{{ formatTime(item.createdAt) }}</span>\n                </div>\n              </div>\n            </section>\n          </el-tab-pane>\n\n          <el-tab-pane label=\"申请编辑\" name=\"edit-request\">\n            <section class=\"edit-request\">\n              <p class=\"tip\">\n                想要补充条目或纠正内容？提交申请后，维护团队会在 24 小时内审核并授权编辑权限。\n              </p>\n              <el-form\n                :model=\"editRequest\"\n                label-width=\"80px\"\n                class=\"edit-request-form\"\n              >\n                <el-form-item label=\"申请理由\">\n                  <el-input\n                    v-model=\"editRequest.reason\"\n                    placeholder=\"说明你希望修改的内容\"\n                  />\n                </el-form-item>\n                <el-form-item label=\"详细描述\">\n                  <el-input\n                    v-model=\"editRequest.detail\"\n                    type=\"textarea\"\n                    :rows=\"4\"\n                    maxlength=\"500\"\n                    show-word-limit\n                    placeholder=\"提供越多细节越容易获得通过，例如参考资料、修改思路等。\"\n                  />\n                </el-form-item>\n                <el-form-item>\n                  <el-button\n                    type=\"primary\"\n                    :loading=\"submittingEditRequest\"\n                    @click=\"submitEditRequest\"\n                  >\n                    提交申请\n                  </el-button>\n                  <el-button v-if=\"userStore.isLoggedIn && canEdit\" text @click=\"editWiki\">\n                    我已拥有权限，前往编辑\n                  </el-button>\n                </el-form-item>\n              </el-form>\n            </section>\n          </el-tab-pane>\n        </el-tabs>\n      </main>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { ref, onMounted, computed } from 'vue'\nimport { useRouter, useRoute } from 'vue-router'\nimport dayjs from 'dayjs'\nimport { fetchWikiPage, fetchWikiHistory, favoriteWikiPage, fetchWikiDiscussions, createWikiDiscussion } from '@/api/wiki'\nimport { recordFootprint } from '@/api/user'\nimport { useUserStore } from '@/store/modules/user'\nimport { ElMessage } from 'element-plus'\nimport MarkdownIt from 'markdown-it'\nimport DOMPurify from 'dompurify'\n\nconst route = useRoute()\nconst router = useRouter()\nconst userStore = useUserStore()\n\nconst wiki = ref(null)\nconst history = ref([])\nconst loading = ref(true)\nconst discussions = ref([])\nconst discussionLoading = ref(true)\nconst discussionContent = ref('')\nconst submittingDiscussion = ref(false)\nconst discussionInputRef = ref(null)\nconst activeTab = ref('overview')\nconst editRequest = ref({\n  reason: '',\n  detail: ''\n})\nconst submittingEditRequest = ref(false)\n\nconst md = new MarkdownIt({\n  html: true,\n  linkify: true,\n  breaks: true\n})\n\nconst renderedContent = computed(() => {\n  if (!wiki.value?.content) {\n    return '<p class=\"empty\">这个条目暂无内容</p>'\n  }\n  return DOMPurify.sanitize(md.render(wiki.value.content))\n})\n\nconst tocItems = computed(() => {\n  if (!wiki.value?.content) return []\n  return wiki.value.content.split('\\n')\n    .filter(line => /^#{1,6}\\s+/.test(line))\n    .map(line => {\n      const level = line.match(/^#+/)[0].length\n      return {\n        level,\n        text: line.replace(/^#+/, '').trim()\n      }\n    })\n})\n\nconst canEdit = computed(() => {\n  if (!userStore.userInfo || !wiki.value) return false\n  return userStore.userInfo.role === 'ADMIN' ||\n    wiki.value.author?.id === userStore.userInfo.id\n})\n\nconst loadWiki = async () => {\n  loading.value = true\n  try {\n    const response = await fetchWikiPage(route.params.slug)\n    wiki.value = response.data\n    await loadHistory()\n    await loadDiscussions()\n    recordWikiFootprint()\n  } catch (error) {\n    ElMessage.error('加载词条失败')\n  } finally {\n    loading.value = false\n  }\n}\n\nconst loadHistory = async () => {\n  try {\n    const res = await fetchWikiHistory(route.params.slug)\n    history.value = res.data || []\n  } catch (error) {\n    history.value = []\n  }\n}\n\nconst loadDiscussions = async () => {\n  discussionLoading.value = true\n  try {\n    const res = await fetchWikiDiscussions(route.params.slug)\n    discussions.value = res.data || []\n  } catch (error) {\n    discussions.value = []\n  } finally {\n    discussionLoading.value = false\n  }\n}\n\nconst recordWikiFootprint = async () => {\n  if (!userStore.isLoggedIn || !wiki.value) return\n  try {\n    await recordFootprint({\n      targetType: 'WIKI',\n      targetId: wiki.value.id,\n      title: wiki.value.title,\n      summary: wiki.value.summary\n    })\n  } catch (error) {\n    // ignore\n  }\n}\n\nconst formatTime = (time) => {\n  if (!time) return ''\n  return dayjs(time).format('YYYY年M月D日 HH:mm')\n}\n\nconst editWiki = () => {\n  if (wiki.value) {\n    router.push(`/wiki/edit/${wiki.value.id}`)\n  }\n}\n\nconst favoritePage = async () => {\n  if (!userStore.isLoggedIn) {\n    router.push('/login')\n    return\n  }\n  try {\n    const res = await favoriteWikiPage(wiki.value.id)\n    wiki.value.favorited = res.data\n    ElMessage.success(wiki.value.favorited ? '已收藏' : '已取消收藏')\n  } catch (error) {\n    ElMessage.error('操作失败')\n  }\n}\n\nconst focusDiscussionInput = () => {\n  if (!userStore.isLoggedIn) {\n    goLogin()\n    return\n  }\n  discussionInputRef.value?.focus()\n}\n\nconst submitDiscussion = async () => {\n  if (!userStore.isLoggedIn) {\n    goLogin()\n    return\n  }\n  if (!discussionContent.value.trim()) {\n    ElMessage.warning('请输入讨论内容')\n    return\n  }\n  submittingDiscussion.value = true\n  try {\n    const res = await createWikiDiscussion(route.params.slug, { content: discussionContent.value.trim() })\n    discussions.value.unshift(res.data)\n    discussionContent.value = ''\n    ElMessage.success('讨论已发布')\n  } catch (error) {\n    ElMessage.error(error.response?.data?.message || '发布失败')\n  } finally {\n    submittingDiscussion.value = false\n  }\n}\n\nconst submitEditRequest = async () => {\n  if (!userStore.isLoggedIn) {\n    goLogin()\n    return\n  }\n  if (!editRequest.value.reason.trim() || !editRequest.value.detail.trim()) {\n    ElMessage.warning('请填写完整的申请信息')\n    return\n  }\n  submittingEditRequest.value = true\n  try {\n    await createWikiDiscussion(route.params.slug, {\n      content: `【编辑申请】${editRequest.value.reason}：${editRequest.value.detail}`\n    })\n    editRequest.value.reason = ''\n    editRequest.value.detail = ''\n    ElMessage.success('申请已提交')\n    if (activeTab.value !== 'discussion') {\n      activeTab.value = 'discussion'\n    }\n    await loadDiscussions()\n  } catch (error) {\n    ElMessage.error(error.response?.data?.message || '提交失败')\n  } finally {\n    submittingEditRequest.value = false\n  }\n}\n\nconst goLogin = () => {\n  router.push('/login')\n}\n\nonMounted(() => {\n  loadWiki()\n})\n</script>\n\n<style scoped>\n.wiki-detail-page {\n  max-width: 1200px;\n  margin: 0 auto;\n  padding: 24px 0 60px;\n}\n\n.loading,\n.not-found {\n  padding: 60px 0;\n  text-align: center;\n}\n\n.wiki-layout {\n  display: grid;\n  grid-template-columns: 280px 1fr;\n  gap: 24px;\n}\n\n.wiki-sidebar {\n  background: #fff;\n  border-radius: 26px;\n  padding: 20px;\n  border: 1px solid #eceff5;\n  box-shadow: 0 16px 32px rgba(15, 23, 42, 0.06);\n  display: flex;\n  flex-direction: column;\n  gap: 20px;\n}\n\n.cover img {\n  width: 100%;\n  border-radius: 16px;\n  object-fit: cover;\n}\n\n.toc h4 {\n  margin-bottom: 10px;\n}\n\n.toc ul {\n  list-style: none;\n  padding: 0;\n  margin: 0;\n  display: flex;\n  flex-direction: column;\n  gap: 6px;\n  color: #606266;\n}\n\n.sidebar-actions {\n  display: flex;\n  flex-direction: column;\n  gap: 10px;\n}\n\n.wiki-main {\n  background: #fff;\n  border-radius: 32px;\n  padding: 32px;\n  border: 1px solid #eceff5;\n  box-shadow: 0 20px 40px rgba(15, 23, 42, 0.07);\n}\n\n.wiki-tabs {\n  margin-top: 16px;\n}\n\n.wiki-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: flex-start;\n  margin-bottom: 24px;\n}\n\n.eyebrow {\n  text-transform: uppercase;\n  letter-spacing: 2px;\n  font-size: 12px;\n  color: #909399;\n}\n\n.wiki-summary {\n  background: #f9fafc;\n  border-radius: 18px;\n  padding: 16px;\n  margin-bottom: 24px;\n}\n\n.wiki-summary h4 {\n  margin: 0 0 8px;\n}\n\n.wiki-article {\n  line-height: 1.8;\n  font-size: 16px;\n  color: #1f2d3d;\n  margin-bottom: 30px;\n}\n\n.wiki-article :deep(br) {\n  content: '';\n  display: block;\n  margin-bottom: 8px;\n}\n\n.wiki-discussion,\n.wiki-history {\n  margin-top: 32px;\n  padding-top: 24px;\n  border-top: 1px solid #f0f0f0;\n}\n\n.section-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 16px;\n}\n\n.discussion-form {\n  margin-bottom: 16px;\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n}\n\n.discussion-actions {\n  text-align: right;\n}\n\n.discussion-list {\n  display: flex;\n  flex-direction: column;\n  gap: 16px;\n}\n\n.discussion-item {\n  display: flex;\n  gap: 12px;\n  padding: 14px;\n  border: 1px solid #f0f2f5;\n  border-radius: 18px;\n  background-color: #fafafa;\n}\n\n.discussion-body {\n  flex: 1;\n}\n\n.discussion-meta {\n  display: flex;\n  justify-content: space-between;\n  font-size: 12px;\n  color: #909399;\n  margin-bottom: 6px;\n}\n\n.discussion-text {\n  margin: 0;\n  color: #303133;\n  line-height: 1.6;\n}\n\n.discussion-login {\n  margin-bottom: 12px;\n  text-align: center;\n  color: #909399;\n}\n\n.history-list {\n  display: flex;\n  flex-direction: column;\n  gap: 12px;\n}\n\n.history-item {\n  display: flex;\n  justify-content: space-between;\n  padding: 14px;\n  border: 1px solid #f0f2f5;\n  border-radius: 18px;\n}\n\n.history-editor {\n  margin: 0;\n  font-weight: 600;\n}\n\n.history-summary {\n  margin: 4px 0 0;\n  color: #606266;\n}\n\n.history-time {\n  color: #909399;\n}\n\n.edit-request {\n  padding-top: 12px;\n}\n\n.edit-request .tip {\n  background: #f5f7ff;\n  border-radius: 12px;\n  padding: 12px 16px;\n  color: #4c5bd4;\n  margin-bottom: 16px;\n}\n\n.edit-request-form {\n  max-width: 600px;\n}\n\n@media (max-width: 900px) {\n  .wiki-layout {\n    grid-template-columns: 1fr;\n  }\n\n  .wiki-main {\n    padding: 20px;\n  }\n}\n</style>\n","import script from \"./WikiDetail.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./WikiDetail.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./WikiDetail.vue?vue&type=style&index=0&id=2091a3be&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-2091a3be\"]])\n\nexport default __exports__"],"names":["fetchUserProfile","id","request","url","method","updateProfile","data","changePassword","followUser","unfollowUser","getFollowees","getCollections","params","getFootprints","recordFootprint","route","useRoute","router","useRouter","userStore","useUserStore","wiki","ref","history","loading","discussions","discussionLoading","discussionContent","submittingDiscussion","discussionInputRef","activeTab","editRequest","reason","detail","submittingEditRequest","md","MarkdownIt","html","linkify","breaks","renderedContent","computed","value","content","DOMPurify","sanitize","render","tocItems","split","filter","line","test","map","level","match","length","text","replace","trim","canEdit","userInfo","role","author","loadWiki","async","response","fetchWikiPage","slug","loadHistory","loadDiscussions","recordWikiFootprint","error","ElMessage","res","fetchWikiHistory","fetchWikiDiscussions","isLoggedIn","targetType","targetId","title","summary","formatTime","time","dayjs","format","editWiki","push","favoritePage","favoriteWikiPage","favorited","success","focusDiscussionInput","focus","goLogin","submitDiscussion","createWikiDiscussion","unshift","message","warning","submitEditRequest","onMounted","_createElementBlock","_hoisted_1","_hoisted_2","_createVNode","_component_el_skeleton","rows","animated","_hoisted_4","_createElementVNode","_hoisted_5","class","src","alt","_hoisted_6","_Fragment","_renderList","item","index","key","_toDisplayString","_hoisted_7","_component_el_button","type","plain","size","onClick","_unref","_createBlock","_cache","_hoisted_8","_hoisted_9","_hoisted_10","updatedAt","lastEditorName","status","_component_el_tag","_component_el_tabs","$event","_component_el_tab_pane","label","name","_hoisted_11","innerHTML","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_16","_hoisted_17","_component_el_input","placeholder","maxlength","_hoisted_18","_hoisted_19","_hoisted_20","_component_el_empty","description","_hoisted_21","_component_el_avatar","avatarUrl","_hoisted_22","_hoisted_23","_hoisted_24","username","_hoisted_25","createdAt","_hoisted_26","_hoisted_27","_hoisted_28","_hoisted_29","_hoisted_30","editorName","_hoisted_31","_hoisted_32","_hoisted_33","_component_el_form","model","_component_el_form_item","_hoisted_3","__exports__"],"ignoreList":[],"sourceRoot":""}