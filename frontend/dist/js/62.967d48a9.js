"use strict";(self["webpackChunkChunyin"]=self["webpackChunkChunyin"]||[]).push([[62],{6901:function(e,a,t){t.d(a,{BG:function(){return o},Bk:function(){return d},FC:function(){return m},HK:function(){return c},K6:function(){return p},KJ:function(){return i},N$:function(){return f},lU:function(){return r},pM:function(){return u},v7:function(){return s},w9:function(){return n}});var l=t(7277);const r=e=>(0,l.A)({url:"/bars/register",method:"post",data:e}),o=e=>(0,l.A)({url:`/bars/${e}`,method:"get"}),n=e=>(0,l.A)({url:"/bars/nearby",method:"get",params:e}),d=e=>(0,l.A)({url:`/bars/city/${e}`,method:"get"}),u=e=>(0,l.A)({url:"/bars/search",method:"get",params:e}),i=()=>(0,l.A)({url:"/bars/applications/my",method:"get"}),s=e=>(0,l.A)({url:"/bars/reviews",method:"post",data:e}),m=e=>(0,l.A)({url:`/bars/${e}/reviews`,method:"get"}),c=e=>(0,l.A)({url:`/bars/reviews/${e}`,method:"delete"}),p=e=>(0,l.A)({url:"/bars/recommend",method:"get",params:e}),f=e=>{const a={};return e&&Array.isArray(e)&&e.length>0&&(a.alcoholIds=e),(0,l.A)({url:"/bars/my",method:"get",params:a})}},7062:function(e,a,t){t.r(a),t.d(a,{default:function(){return c}});t(4114);var l=t(641),r=t(33);const o={class:"bar-register"};function n(e,a,t,n,d,u){const i=(0,l.g2)("el-input"),s=(0,l.g2)("el-form-item"),m=(0,l.g2)("el-time-select"),c=(0,l.g2)("el-col"),p=(0,l.g2)("el-row"),f=(0,l.g2)("el-button"),b=(0,l.g2)("el-form"),g=(0,l.g2)("el-card"),h=(0,l.g2)("el-table-column"),k=(0,l.g2)("el-tag"),y=(0,l.g2)("el-table");return(0,l.uX)(),(0,l.CE)("div",o,[(0,l.bF)(g,{class:"register-card"},{header:(0,l.k6)(()=>[...a[11]||(a[11]=[(0,l.Lk)("h2",null,"注册酒吧",-1),(0,l.Lk)("p",{class:"subtitle"},"提交您的酒吧信息，待管理员审核通过后将在平台展示",-1)])]),default:(0,l.k6)(()=>[(0,l.bF)(b,{model:d.form,rules:d.rules,ref:"formRef","label-width":"120px"},{default:(0,l.k6)(()=>[(0,l.bF)(s,{label:"酒吧名称",prop:"name"},{default:(0,l.k6)(()=>[(0,l.bF)(i,{modelValue:d.form.name,"onUpdate:modelValue":a[0]||(a[0]=e=>d.form.name=e),placeholder:"请输入酒吧名称",maxlength:"100"},null,8,["modelValue"])]),_:1}),(0,l.bF)(s,{label:"省份",prop:"province"},{default:(0,l.k6)(()=>[(0,l.bF)(i,{modelValue:d.form.province,"onUpdate:modelValue":a[1]||(a[1]=e=>d.form.province=e),placeholder:"请输入省份",maxlength:"50"},null,8,["modelValue"])]),_:1}),(0,l.bF)(s,{label:"城市",prop:"city"},{default:(0,l.k6)(()=>[(0,l.bF)(i,{modelValue:d.form.city,"onUpdate:modelValue":a[2]||(a[2]=e=>d.form.city=e),placeholder:"请输入城市",maxlength:"50"},null,8,["modelValue"])]),_:1}),(0,l.bF)(s,{label:"区/县",prop:"district"},{default:(0,l.k6)(()=>[(0,l.bF)(i,{modelValue:d.form.district,"onUpdate:modelValue":a[3]||(a[3]=e=>d.form.district=e),placeholder:"请输入区/县（可选）",maxlength:"50"},null,8,["modelValue"])]),_:1}),(0,l.bF)(s,{label:"详细地址",prop:"address"},{default:(0,l.k6)(()=>[(0,l.bF)(i,{modelValue:d.form.address,"onUpdate:modelValue":a[4]||(a[4]=e=>d.form.address=e),placeholder:"请输入详细地址",type:"textarea",rows:2,maxlength:"200"},null,8,["modelValue"])]),_:1}),(0,l.bF)(s,{label:"营业时间"},{default:(0,l.k6)(()=>[(0,l.bF)(p,{gutter:10},{default:(0,l.k6)(()=>[(0,l.bF)(c,{span:12},{default:(0,l.k6)(()=>[(0,l.bF)(s,{prop:"openingTime"},{default:(0,l.k6)(()=>[(0,l.bF)(m,{modelValue:d.form.openingTime,"onUpdate:modelValue":a[5]||(a[5]=e=>d.form.openingTime=e),start:"00:00",step:"00:30",end:"23:30",placeholder:"开始时间"},null,8,["modelValue"])]),_:1})]),_:1}),(0,l.bF)(c,{span:12},{default:(0,l.k6)(()=>[(0,l.bF)(s,{prop:"closingTime"},{default:(0,l.k6)(()=>[(0,l.bF)(m,{modelValue:d.form.closingTime,"onUpdate:modelValue":a[6]||(a[6]=e=>d.form.closingTime=e),start:"00:00",step:"00:30",end:"23:30",placeholder:"结束时间"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),(0,l.bF)(s,{label:"联系电话",prop:"contactPhone"},{default:(0,l.k6)(()=>[(0,l.bF)(i,{modelValue:d.form.contactPhone,"onUpdate:modelValue":a[7]||(a[7]=e=>d.form.contactPhone=e),placeholder:"请输入联系电话",maxlength:"20"},null,8,["modelValue"])]),_:1}),(0,l.bF)(s,{label:"主营酒类",prop:"mainBeverages"},{default:(0,l.k6)(()=>[(0,l.bF)(i,{modelValue:d.form.mainBeverages,"onUpdate:modelValue":a[8]||(a[8]=e=>d.form.mainBeverages=e),placeholder:"例如：威士忌、鸡尾酒、精酿啤酒等",maxlength:"200"},null,8,["modelValue"])]),_:1}),(0,l.bF)(s,{label:"酒吧简介",prop:"description"},{default:(0,l.k6)(()=>[(0,l.bF)(i,{modelValue:d.form.description,"onUpdate:modelValue":a[9]||(a[9]=e=>d.form.description=e),type:"textarea",rows:4,placeholder:"请介绍您的酒吧特色、环境、氛围等",maxlength:"500","show-word-limit":""},null,8,["modelValue"])]),_:1}),(0,l.bF)(s,null,{default:(0,l.k6)(()=>[(0,l.bF)(f,{type:"primary",onClick:u.handleSubmit,loading:d.submitting},{default:(0,l.k6)(()=>[...a[12]||(a[12]=[(0,l.eW)(" 提交申请 ",-1)])]),_:1},8,["onClick","loading"]),(0,l.bF)(f,{onClick:a[10]||(a[10]=a=>e.$router.back())},{default:(0,l.k6)(()=>[...a[13]||(a[13]=[(0,l.eW)(" 取消 ",-1)])]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1}),d.myBars.length>0?((0,l.uX)(),(0,l.Wv)(g,{key:0,class:"my-bars-card"},{header:(0,l.k6)(()=>[...a[14]||(a[14]=[(0,l.Lk)("h3",null,"我的酒吧申请",-1)])]),default:(0,l.k6)(()=>[(0,l.bF)(y,{data:d.myBars,stripe:""},{default:(0,l.k6)(()=>[(0,l.bF)(h,{prop:"name",label:"酒吧名称"}),(0,l.bF)(h,{prop:"city",label:"城市",width:"120"}),(0,l.bF)(h,{label:"状态",width:"100"},{default:(0,l.k6)(({row:e})=>["PENDING"===e.status?((0,l.uX)(),(0,l.Wv)(k,{key:0,type:"warning"},{default:(0,l.k6)(()=>[...a[15]||(a[15]=[(0,l.eW)("待审核",-1)])]),_:1})):"APPROVED"===e.status?((0,l.uX)(),(0,l.Wv)(k,{key:1,type:"success"},{default:(0,l.k6)(()=>[...a[16]||(a[16]=[(0,l.eW)("已通过",-1)])]),_:1})):"REJECTED"===e.status?((0,l.uX)(),(0,l.Wv)(k,{key:2,type:"danger"},{default:(0,l.k6)(()=>[...a[17]||(a[17]=[(0,l.eW)("已拒绝",-1)])]),_:1})):(0,l.Q3)("",!0)]),_:1}),(0,l.bF)(h,{prop:"createdAt",label:"提交时间",width:"180"},{default:(0,l.k6)(({row:e})=>[(0,l.eW)((0,r.v_)(u.formatDate(e.createdAt)),1)]),_:1}),(0,l.bF)(h,{label:"操作",width:"120"},{default:(0,l.k6)(({row:t})=>[(0,l.bF)(f,{type:"primary",size:"small",text:"",onClick:a=>e.$router.push(`/bars/${t.id}`)},{default:(0,l.k6)(()=>[...a[18]||(a[18]=[(0,l.eW)(" 查看详情 ",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])]),_:1})):(0,l.Q3)("",!0)])}var d=t(6901),u=t(163),i={name:"BarRegister",data(){return{form:{name:"",province:"",city:"",district:"",address:"",openingTime:"",closingTime:"",contactPhone:"",mainBeverages:"",description:""},rules:{name:[{required:!0,message:"请输入酒吧名称",trigger:"blur"}],province:[{required:!0,message:"请输入省份",trigger:"blur"}],city:[{required:!0,message:"请输入城市",trigger:"blur"}],address:[{required:!0,message:"请输入详细地址",trigger:"blur"}],contactPhone:[{required:!0,message:"请输入联系电话",trigger:"blur"}]},submitting:!1,myBars:[]}},mounted(){this.loadMyBars()},methods:{async handleSubmit(){const e=await this.$refs.formRef.validate().catch(()=>!1);if(e){this.submitting=!0;try{await(0,d.lU)(this.form),u.nk.success("提交成功，请等待管理员审核"),this.$refs.formRef.resetFields(),await this.loadMyBars()}catch(a){console.error("提交失败:",a),u.nk.error(a.message||"提交失败")}finally{this.submitting=!1}}},async loadMyBars(){try{const{data:e}=await(0,d.KJ)();this.myBars=e||[]}catch(e){console.error("加载我的酒吧申请列表失败:",e)}},formatDate(e){if(!e)return"";const a=new Date(e);return a.toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})}}},s=t(6262);const m=(0,s.A)(i,[["render",n],["__scopeId","data-v-64002a3a"]]);var c=m}}]);
//# sourceMappingURL=62.967d48a9.js.map