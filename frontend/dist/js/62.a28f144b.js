"use strict";(self["webpackChunkChunyin"]=self["webpackChunkChunyin"]||[]).push([[62],{6901:function(e,l,a){a.d(l,{BG:function(){return o},Bk:function(){return d},FC:function(){return m},HK:function(){return c},KJ:function(){return i},lU:function(){return r},pM:function(){return u},v7:function(){return s},w9:function(){return n}});var t=a(7277);const r=e=>(0,t.A)({url:"/bars/register",method:"post",data:e}),o=e=>(0,t.A)({url:`/bars/${e}`,method:"get"}),n=e=>(0,t.A)({url:"/bars/nearby",method:"get",params:e}),d=e=>(0,t.A)({url:`/bars/city/${e}`,method:"get"}),u=e=>(0,t.A)({url:"/bars/search",method:"get",params:e}),i=()=>(0,t.A)({url:"/bars/applications/my",method:"get"}),s=e=>(0,t.A)({url:"/bars/reviews",method:"post",data:e}),m=e=>(0,t.A)({url:`/bars/${e}/reviews`,method:"get"}),c=e=>(0,t.A)({url:`/bars/reviews/${e}`,method:"delete"})},7062:function(e,l,a){a.r(l),a.d(l,{default:function(){return c}});a(4114);var t=a(641),r=a(33);const o={class:"bar-register"};function n(e,l,a,n,d,u){const i=(0,t.g2)("el-input"),s=(0,t.g2)("el-form-item"),m=(0,t.g2)("el-time-select"),c=(0,t.g2)("el-col"),p=(0,t.g2)("el-row"),f=(0,t.g2)("el-button"),b=(0,t.g2)("el-form"),g=(0,t.g2)("el-card"),h=(0,t.g2)("el-table-column"),k=(0,t.g2)("el-tag"),y=(0,t.g2)("el-table");return(0,t.uX)(),(0,t.CE)("div",o,[(0,t.bF)(g,{class:"register-card"},{header:(0,t.k6)(()=>[...l[11]||(l[11]=[(0,t.Lk)("h2",null,"注册酒吧",-1),(0,t.Lk)("p",{class:"subtitle"},"提交您的酒吧信息，待管理员审核通过后将在平台展示",-1)])]),default:(0,t.k6)(()=>[(0,t.bF)(b,{model:d.form,rules:d.rules,ref:"formRef","label-width":"120px"},{default:(0,t.k6)(()=>[(0,t.bF)(s,{label:"酒吧名称",prop:"name"},{default:(0,t.k6)(()=>[(0,t.bF)(i,{modelValue:d.form.name,"onUpdate:modelValue":l[0]||(l[0]=e=>d.form.name=e),placeholder:"请输入酒吧名称",maxlength:"100"},null,8,["modelValue"])]),_:1}),(0,t.bF)(s,{label:"省份",prop:"province"},{default:(0,t.k6)(()=>[(0,t.bF)(i,{modelValue:d.form.province,"onUpdate:modelValue":l[1]||(l[1]=e=>d.form.province=e),placeholder:"请输入省份",maxlength:"50"},null,8,["modelValue"])]),_:1}),(0,t.bF)(s,{label:"城市",prop:"city"},{default:(0,t.k6)(()=>[(0,t.bF)(i,{modelValue:d.form.city,"onUpdate:modelValue":l[2]||(l[2]=e=>d.form.city=e),placeholder:"请输入城市",maxlength:"50"},null,8,["modelValue"])]),_:1}),(0,t.bF)(s,{label:"区/县",prop:"district"},{default:(0,t.k6)(()=>[(0,t.bF)(i,{modelValue:d.form.district,"onUpdate:modelValue":l[3]||(l[3]=e=>d.form.district=e),placeholder:"请输入区/县（可选）",maxlength:"50"},null,8,["modelValue"])]),_:1}),(0,t.bF)(s,{label:"详细地址",prop:"address"},{default:(0,t.k6)(()=>[(0,t.bF)(i,{modelValue:d.form.address,"onUpdate:modelValue":l[4]||(l[4]=e=>d.form.address=e),placeholder:"请输入详细地址",type:"textarea",rows:2,maxlength:"200"},null,8,["modelValue"])]),_:1}),(0,t.bF)(s,{label:"营业时间"},{default:(0,t.k6)(()=>[(0,t.bF)(p,{gutter:10},{default:(0,t.k6)(()=>[(0,t.bF)(c,{span:12},{default:(0,t.k6)(()=>[(0,t.bF)(s,{prop:"openingTime"},{default:(0,t.k6)(()=>[(0,t.bF)(m,{modelValue:d.form.openingTime,"onUpdate:modelValue":l[5]||(l[5]=e=>d.form.openingTime=e),start:"00:00",step:"00:30",end:"23:30",placeholder:"开始时间"},null,8,["modelValue"])]),_:1})]),_:1}),(0,t.bF)(c,{span:12},{default:(0,t.k6)(()=>[(0,t.bF)(s,{prop:"closingTime"},{default:(0,t.k6)(()=>[(0,t.bF)(m,{modelValue:d.form.closingTime,"onUpdate:modelValue":l[6]||(l[6]=e=>d.form.closingTime=e),start:"00:00",step:"00:30",end:"23:30",placeholder:"结束时间"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),(0,t.bF)(s,{label:"联系电话",prop:"contactPhone"},{default:(0,t.k6)(()=>[(0,t.bF)(i,{modelValue:d.form.contactPhone,"onUpdate:modelValue":l[7]||(l[7]=e=>d.form.contactPhone=e),placeholder:"请输入联系电话",maxlength:"20"},null,8,["modelValue"])]),_:1}),(0,t.bF)(s,{label:"主营酒类",prop:"mainBeverages"},{default:(0,t.k6)(()=>[(0,t.bF)(i,{modelValue:d.form.mainBeverages,"onUpdate:modelValue":l[8]||(l[8]=e=>d.form.mainBeverages=e),placeholder:"例如：威士忌、鸡尾酒、精酿啤酒等",maxlength:"200"},null,8,["modelValue"])]),_:1}),(0,t.bF)(s,{label:"酒吧简介",prop:"description"},{default:(0,t.k6)(()=>[(0,t.bF)(i,{modelValue:d.form.description,"onUpdate:modelValue":l[9]||(l[9]=e=>d.form.description=e),type:"textarea",rows:4,placeholder:"请介绍您的酒吧特色、环境、氛围等",maxlength:"500","show-word-limit":""},null,8,["modelValue"])]),_:1}),(0,t.bF)(s,null,{default:(0,t.k6)(()=>[(0,t.bF)(f,{type:"primary",onClick:u.handleSubmit,loading:d.submitting},{default:(0,t.k6)(()=>[...l[12]||(l[12]=[(0,t.eW)(" 提交申请 ",-1)])]),_:1},8,["onClick","loading"]),(0,t.bF)(f,{onClick:l[10]||(l[10]=l=>e.$router.back())},{default:(0,t.k6)(()=>[...l[13]||(l[13]=[(0,t.eW)(" 取消 ",-1)])]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1}),d.myBars.length>0?((0,t.uX)(),(0,t.Wv)(g,{key:0,class:"my-bars-card"},{header:(0,t.k6)(()=>[...l[14]||(l[14]=[(0,t.Lk)("h3",null,"我的酒吧申请",-1)])]),default:(0,t.k6)(()=>[(0,t.bF)(y,{data:d.myBars,stripe:""},{default:(0,t.k6)(()=>[(0,t.bF)(h,{prop:"name",label:"酒吧名称"}),(0,t.bF)(h,{prop:"city",label:"城市",width:"120"}),(0,t.bF)(h,{label:"状态",width:"100"},{default:(0,t.k6)(({row:e})=>["PENDING"===e.status?((0,t.uX)(),(0,t.Wv)(k,{key:0,type:"warning"},{default:(0,t.k6)(()=>[...l[15]||(l[15]=[(0,t.eW)("待审核",-1)])]),_:1})):"APPROVED"===e.status?((0,t.uX)(),(0,t.Wv)(k,{key:1,type:"success"},{default:(0,t.k6)(()=>[...l[16]||(l[16]=[(0,t.eW)("已通过",-1)])]),_:1})):"REJECTED"===e.status?((0,t.uX)(),(0,t.Wv)(k,{key:2,type:"danger"},{default:(0,t.k6)(()=>[...l[17]||(l[17]=[(0,t.eW)("已拒绝",-1)])]),_:1})):(0,t.Q3)("",!0)]),_:1}),(0,t.bF)(h,{prop:"createdAt",label:"提交时间",width:"180"},{default:(0,t.k6)(({row:e})=>[(0,t.eW)((0,r.v_)(u.formatDate(e.createdAt)),1)]),_:1}),(0,t.bF)(h,{label:"操作",width:"120"},{default:(0,t.k6)(({row:a})=>[(0,t.bF)(f,{type:"primary",size:"small",text:"",onClick:l=>e.$router.push(`/bars/${a.id}`)},{default:(0,t.k6)(()=>[...l[18]||(l[18]=[(0,t.eW)(" 查看详情 ",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])]),_:1})):(0,t.Q3)("",!0)])}var d=a(6901),u=a(163),i={name:"BarRegister",data(){return{form:{name:"",province:"",city:"",district:"",address:"",openingTime:"",closingTime:"",contactPhone:"",mainBeverages:"",description:""},rules:{name:[{required:!0,message:"请输入酒吧名称",trigger:"blur"}],province:[{required:!0,message:"请输入省份",trigger:"blur"}],city:[{required:!0,message:"请输入城市",trigger:"blur"}],address:[{required:!0,message:"请输入详细地址",trigger:"blur"}],contactPhone:[{required:!0,message:"请输入联系电话",trigger:"blur"}]},submitting:!1,myBars:[]}},mounted(){this.loadMyBars()},methods:{async handleSubmit(){const e=await this.$refs.formRef.validate().catch(()=>!1);if(e){this.submitting=!0;try{await(0,d.lU)(this.form),u.nk.success("提交成功，请等待管理员审核"),this.$refs.formRef.resetFields(),await this.loadMyBars()}catch(l){console.error("提交失败:",l),u.nk.error(l.message||"提交失败")}finally{this.submitting=!1}}},async loadMyBars(){try{const{data:e}=await(0,d.KJ)();this.myBars=e||[]}catch(e){console.error("加载我的酒吧申请列表失败:",e)}},formatDate(e){if(!e)return"";const l=new Date(e);return l.toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})}}},s=a(6262);const m=(0,s.A)(i,[["render",n],["__scopeId","data-v-64002a3a"]]);var c=m}}]);
//# sourceMappingURL=62.a28f144b.js.map