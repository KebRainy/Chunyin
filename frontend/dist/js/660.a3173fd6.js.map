{"version":3,"file":"js/660.a3173fd6.js","mappings":"4YAEO,MAAMA,EAAkBC,IACtBC,EAAAA,EAAAA,GAAQ,CACbC,IAAK,cACLC,OAAQ,MACRH,WAISI,EAAiBC,IACrBJ,EAAAA,EAAAA,GAAQ,CACbC,IAAK,eAAeG,IACpBF,OAAQ,QAICG,EAAoBD,IACxBJ,EAAAA,EAAAA,GAAQ,CACbC,IAAK,eAAeG,YACpBF,OAAQ,QAICI,EAA0BA,CAACF,EAAMG,KACrCP,EAAAA,EAAAA,GAAQ,CACbC,IAAK,eAAeG,aAAgBG,IACpCL,OAAQ,QAICM,EAAsBA,CAACJ,EAAMG,KACjCP,EAAAA,EAAAA,GAAQ,CACbC,IAAK,eAAeG,aAAgBG,YACpCL,OAAQ,SAICO,EAAwBL,IAC5BJ,EAAAA,EAAAA,GAAQ,CACbC,IAAK,eAAeG,gBACpBF,OAAQ,QAICQ,EAAuBA,CAACN,EAAMO,KAClCX,EAAAA,EAAAA,GAAQ,CACbC,IAAK,eAAeG,gBACpBF,OAAQ,OACRS,SAISC,EAAiBA,KACrBZ,EAAAA,EAAAA,GAAQ,CACbC,IAAK,oBACLC,OAAQ,QAICW,EAAkBF,IACtBX,EAAAA,EAAAA,GAAQ,CACbC,IAAK,cACLC,OAAQ,OACRS,SAISG,EAAiBA,CAACC,EAAIJ,KAC1BX,EAAAA,EAAAA,GAAQ,CACbC,IAAK,eAAec,IACpBb,OAAQ,MACRS,SAISK,EAAoBD,IACxBf,EAAAA,EAAAA,GAAQ,CACbC,IAAK,eAAec,aACpBb,OAAQ,Q,iPC7EL,MAAMe,EAAcC,IAClBlB,EAAAA,EAAAA,GAAQ,CACbC,IAAK,UAAUiB,IACfhB,OAAQ,W,sqBC2OZ,MAAMiB,GAAQC,EAAAA,EAAAA,MACRC,GAASC,EAAAA,EAAAA,MACTC,GAAUC,EAAAA,EAAAA,KAAI,GACdC,GAAiBD,EAAAA,EAAAA,KAAI,GACrBE,GAAiBF,EAAAA,EAAAA,IAAI,IACrBG,GAAkBH,EAAAA,EAAAA,IAAI,MACtBI,GAAoBJ,EAAAA,EAAAA,IAAI,MACxBK,GAAUL,EAAAA,EAAAA,KAAI,GACdM,GAAiBN,EAAAA,EAAAA,IAAI,IACrBO,GAAoBP,EAAAA,EAAAA,KAAI,GACxBQ,GAAkBR,EAAAA,EAAAA,IAAI,IAEtBS,GAAOC,EAAAA,EAAAA,IAAS,CACpBC,MAAO,GACPC,QAAS,GACTC,QAAS,GACTC,YAAa,KAGf,IAAIC,EAAY,KACZC,EAAgB,KAChBC,EAAmB,GAEvB,MAAMC,EAAK,IAAIC,EAAAA,EAAW,CACxBC,MAAM,EACNC,SAAS,EACTC,QAAQ,IAGJC,GAAcC,EAAAA,EAAAA,IAAS,IACtBf,EAAKI,QAGHY,EAAAA,EAAUC,SAASR,EAAGS,OAAOlB,EAAKI,UAFhC,0CAKLe,IAAWJ,EAAAA,EAAAA,IAAS,IACnBf,EAAKI,QACHJ,EAAKI,QAAQgB,MAAM,MACvBC,OAAOC,GAAQ,aAAaC,KAAKD,IACjCE,IAAIF,IACH,MAAMG,EAAQH,EAAKI,MAAM,OAAO,GAAGC,OACnC,MAAO,CACLF,QACAG,KAAMN,EAAKO,QAAQ,MAAO,IAAIC,UAPV,IAYtBC,IAAehB,EAAAA,EAAAA,IAAS,KAC5B,MAAMX,EAAUJ,EAAKI,SAAW,GAC1B4B,EAAQ5B,EAAQ0B,OAAS1B,EAAQ0B,OAAOV,MAAM,OAAOO,OAAS,EAC9DM,EAAQ7B,EAAQuB,OAChBO,EAAQ9B,EAAQgB,MAAM,MAAMO,OAClC,MAAO,CAAEK,QAAOC,QAAOC,WAGnBC,IAASpB,EAAAA,EAAAA,IAAS,MAAQ7B,EAAMpB,OAAOgB,IAGvCsD,GAAiBA,CAACC,EAAQC,EAAOC,EAAc,MACnD,IAAK7C,EAAgB8C,MAAO,OAC5B,MAAMC,EAAW/C,EAAgB8C,MAAME,IAAIC,cAAc,YACzD,IAAKF,EAAU,OAEf,MAAMG,EAAQH,EAASI,eACjBC,EAAML,EAASM,aACfC,EAAehD,EAAKI,QAAQ6C,UAAUL,EAAOE,GAC7CI,EAAcF,EAChB,GAAGX,IAASW,IAAeV,IAC3B,GAAGD,IAASE,IAAcD,IAE9BtC,EAAKI,QAAUJ,EAAKI,QAAQ6C,UAAU,EAAGL,GAASM,EAAclD,EAAKI,QAAQ6C,UAAUH,IAEvFK,EAAAA,EAAAA,IAAS,KACP,MAAMC,EAASR,EAAQM,EAAYvB,OACnCc,EAASY,kBAAkBD,EAAQA,GACnCX,EAASa,WAIPC,GAAkBA,KACtB,IAAK7D,EAAgB8C,MAAO,OAC5B,MAAMC,EAAW/C,EAAgB8C,MAAME,IAAIC,cAAc,YACzD,IAAKF,EAAU,OAEf,MAAMG,EAAQH,EAASI,eACjBC,EAAML,EAASM,aACfC,EAAehD,EAAKI,QAAQ6C,UAAUL,EAAOE,GAC7CI,EAAcF,EAChB,WAAWA,YACX,oBAEJhD,EAAKI,QAAUJ,EAAKI,QAAQ6C,UAAU,EAAGL,GAASM,EAAclD,EAAKI,QAAQ6C,UAAUH,IAEvFK,EAAAA,EAAAA,IAAS,KACP,MAAMC,EAASJ,EACXJ,EAAQM,EAAYvB,OACpBiB,EAAQM,EAAYvB,OAAS,GACjCc,EAASY,kBAAkBD,EAAQA,GACnCX,EAASa,WAIPE,GAAaA,KACjB,IAAK9D,EAAgB8C,MAAO,OAC5B,MAAMC,EAAW/C,EAAgB8C,MAAME,IAAIC,cAAc,YACzD,IAAKF,EAAU,OAEf,MAAMG,EAAQH,EAASI,eACjBC,EAAML,EAASM,aACfC,EAAehD,EAAKI,QAAQ6C,UAAUL,EAAOE,GAC7CI,EAAcF,EAChB,IAAIA,eACJ,mBAEJhD,EAAKI,QAAUJ,EAAKI,QAAQ6C,UAAU,EAAGL,GAASM,EAAclD,EAAKI,QAAQ6C,UAAUH,IAEvFK,EAAAA,EAAAA,IAAS,KACP,MAAMC,EAASJ,EACXJ,EAAQM,EAAYvB,OAAS,EAC7BiB,EAAQM,EAAYvB,OAAS,EACjCc,EAASY,kBAAkBD,EAAQA,GACnCX,EAASa,WAIPG,GAAmB7B,IACvB,IAAKjC,EAAkB6C,MAAO,OAC9B,MAAMkB,EAAW/D,EAAkB6C,MAAMmB,iBAAiB,0BAC1D,IAAK,MAAMC,KAAWF,EACpB,GAAIE,EAAQC,YAAY/B,SAAWF,EAAM,CACvCgC,EAAQE,eAAe,CAAEC,SAAU,SAAUC,MAAO,WACpDJ,EAAQK,MAAMC,gBAAkB,UAChCC,WAAW,KACTP,EAAQK,MAAMC,gBAAkB,IAC/B,KACH,KACF,GAIEE,GAA0BA,KAC9BxE,EAAQ4C,OAAS5C,EAAQ4C,OAGrB6B,GAAgBC,IACpB,MAAMC,EAAUD,EAAKE,KAAKC,WAAW,UAC/BC,EAASJ,EAAKK,KAAO,KAAO,KAAO,EAMzC,OALKJ,GAASK,EAAAA,GAAUC,MAAM,UACzBH,GAAQE,EAAAA,GAAUC,MAAM,aACzBN,GAAWG,IACblF,EAAegD,OAAQ,GAElB+B,GAAWG,GAGdI,GAAuBC,IAE3B,GADAvF,EAAegD,OAAQ,EACD,MAAlBuC,EAASC,MAAgBD,EAASrG,MAAMV,IAAK,CAC/C,MAAMA,EAAM+G,EAASrG,KAAKV,IACpBiH,EAAU,WAAWjH,KAC3B,GAAI0B,EAAgB8C,MAAO,CACzB,MAAMC,EAAW/C,EAAgB8C,MAAME,IAAIC,cAAc,YACzD,GAAIF,EAAU,CACZ,MAAMG,EAAQH,EAASI,eACjBqC,EAAalF,EAAKI,QAAU,OAAO6E,QAAgBA,EACzDjF,EAAKI,QAAUJ,EAAKI,QAAQ6C,UAAU,EAAGL,GAASsC,EAAalF,EAAKI,QAAQ6C,UAAUL,IACtFO,EAAAA,EAAAA,IAAS,KACPV,EAASY,kBAAkBT,EAAQsC,EAAWvD,OAAQiB,EAAQsC,EAAWvD,QACzEc,EAASa,SAEb,MACEtD,EAAKI,QAAUJ,EAAKI,QAAU,GAAGJ,EAAKI,cAAc6E,IAAYA,CAEpE,MACEjF,EAAKI,QAAUJ,EAAKI,QAAU,GAAGJ,EAAKI,cAAc6E,IAAYA,EAElEL,EAAAA,GAAUO,QAAQ,QACpB,MACEP,EAAAA,GAAUC,MAAM,SAIdO,GAAoBA,KACxB5F,EAAegD,OAAQ,EACvBoC,EAAAA,GAAUC,MAAM,eAGZQ,GAAcC,UAClB,MAAMC,EAAaC,EAAKxH,IAAI6D,QAAQ,sBAAuB,QACrD4D,EAAQ,IAAIC,OAAO,oBAAoBH,OAAiB,KAE9D,GADAvF,EAAKI,SAAWJ,EAAKI,SAAW,IAAIyB,QAAQ4D,EAAO,IAAI5D,QAAQ,UAAW,QAAQC,OAC9E0D,EAAKvG,KACP,UACQD,EAAWwG,EAAKvG,MACtB2F,EAAAA,GAAUO,QAAQ,QACpB,CAAE,MAAON,GACPD,EAAAA,GAAUC,MAAMA,EAAME,UAAUrG,MAAMiH,SAAW,OACnD,MAEAf,EAAAA,GAAUO,QAAQ,YAIhBS,GAA2BA,KAC/B,IAAK5F,EAAKI,QAER,YADAX,EAAe+C,MAAQ,IAGzB,MAAMiD,EAAQ,uBACRI,EAAO,IAAIC,IACXC,EAAQ,GACd,IAAIrE,EACJ,MAA8C,QAAtCA,EAAQ+D,EAAMO,KAAKhG,EAAKI,UAAoB,CAClD,MAAMpC,EAAM0D,EAAM,IAAII,OACtB,IAAK9D,GAAO6H,EAAKI,IAAIjI,GAAM,SAC3B6H,EAAKK,IAAIlI,GACT,MAAMmI,EAAYnI,EAAI0D,MAAM,sCAC5BqE,EAAMK,KAAK,CACTC,IAAKF,EAAYA,EAAU,GAAK,GAAGnI,KAAO+H,EAAMpE,SAChD3D,MACAiB,KAAMkH,EAAYA,EAAU,GAAK,MAErC,CACA1G,EAAe+C,MAAQuD,GAInBO,GAAgBA,KACpB,IAAKtG,EAAKE,QAAUF,EAAKI,QAAS,OAElC,MAAMmG,EAAWpE,GAAOK,MAAQ,cAActD,EAAMpB,OAAOgB,KAAO,iBAC5D0H,EAAQ,CACZtG,MAAOF,EAAKE,MACZC,QAASH,EAAKG,QACdC,QAASJ,EAAKI,QACdC,YAAaL,EAAKK,YAClBoG,SAAS,IAAIC,MAAOC,eAEtBC,aAAaC,QAAQN,EAAUO,KAAKC,UAAUP,IAC9C3G,EAAe2C,MAAQ,QACvB2B,WAAW,KACTtE,EAAe2C,MAAQ,IACtB,MAGCwE,GAAYA,KAChB,MAAMT,EAAWpE,GAAOK,MAAQ,cAActD,EAAMpB,OAAOgB,KAAO,iBAC5DmI,EAAWL,aAAaM,QAAQX,GACtC,GAAIU,EACF,IACE,MAAMT,EAAQM,KAAKK,MAAMF,GACzB,OAAOT,CACT,CAAE,MAAOY,GACP,OAAO,IACT,CAEF,OAAO,MAGHC,GAAaA,KACjB,MAAMd,EAAWpE,GAAOK,MAAQ,cAActD,EAAMpB,OAAOgB,KAAO,iBAClE8H,aAAaU,WAAWf,IAGpBgB,GAAWjC,UACf,IAAKnD,GAAOK,MAAO,CAEjB,MAAMgE,EAAQQ,KACd,GAAIR,EACF,UACQgB,EAAAA,EAAaC,QACjB,kBACA,OACA,CACEC,kBAAmB,KACnBC,iBAAkB,KAClBnD,KAAM,SAGVoD,OAAOC,OAAO7H,EAAM,CAClBE,MAAOsG,EAAMtG,OAAS,GACtBC,QAASqG,EAAMrG,SAAW,GAC1BC,QAASoG,EAAMpG,SAAW,GAC1BC,YAAamG,EAAMnG,aAAe,KAEpCN,EAAgByC,MAAQxC,EAAKI,QAC7BI,EAAmBR,EAAKI,OAC1B,CAAE,MACAiH,IACF,CAEF,MACF,CAEA,IACE,MAAMS,QAAY5J,EAAAA,EAAAA,IAAcgB,EAAMpB,OAAOgB,IAC7C8I,OAAOC,OAAO7H,EAAM,CAClBE,MAAO4H,EAAIpJ,KAAKwB,OAAS,GACzBC,QAAS2H,EAAIpJ,KAAKyB,SAAW,GAC7BC,QAAS0H,EAAIpJ,KAAK0B,SAAW,GAC7BC,YAAa,KAEfN,EAAgByC,MAAQxC,EAAKI,QAC7BI,EAAmBR,EAAKI,OAC1B,CAAE,MAAOyE,GACPD,EAAAA,GAAUC,MAAM,SAClB,GAGIkD,GAAezC,UACnB,GAAKtF,EAAKE,MAAM4B,QAAW9B,EAAKI,QAAQ0B,OAAxC,CAKAxC,EAAQkD,OAAQ,EAChB,IACML,GAAOK,aACH3D,EAAAA,EAAAA,IAAeK,EAAMpB,OAAOgB,GAAI,CACpCoB,MAAOF,EAAKE,MACZC,QAASH,EAAKG,QACdC,QAASJ,EAAKI,QACdC,YAAaL,EAAKK,cAEpBuE,EAAAA,GAAUO,QAAQ,sBAEZvG,EAAAA,EAAAA,IAAe,CACnBsB,MAAOF,EAAKE,MACZC,QAASH,EAAKG,QACdC,QAASJ,EAAKI,QACdC,YAAaL,EAAKK,cAEpBuE,EAAAA,GAAUO,QAAQ,aAEpBkC,KACAvH,EAAkB0C,OAAQ,EAC1BpD,EAAOgH,KAAK,QACd,CAAE,MAAOvB,GACPmD,QAAQnD,MAAM,QAASA,GACvBD,EAAAA,GAAUC,MAAMA,EAAME,UAAUrG,MAAMiH,SAAW,aACnD,CAAE,QACArG,EAAQkD,OAAQ,CAClB,CA7BA,MAFEoC,EAAAA,GAAUqD,QAAQ,cAkChBC,GAAe5C,UACnB,GAAIxF,EAAkB0C,MACpB,UACQgF,EAAAA,EAAaC,QACjB,mBACA,OACA,CACEC,kBAAmB,KACnBC,iBAAkB,KAClBnD,KAAM,YAGVpF,EAAOgH,KAAK,QACd,CAAE,MACA,MAGFhH,EAAOgH,KAAK,U,OAIhB+B,EAAAA,EAAAA,IAAU,KACRZ,MAGAa,EAAAA,EAAAA,IACE,IAAM,CAACpI,EAAKE,MAAOF,EAAKG,QAASH,EAAKI,SACtC,KACEN,EAAkB0C,MAAQxC,EAAKI,UAAYL,EAAgByC,MAEvDjC,GACF8H,aAAa9H,GAGfA,EAAgB4D,WAAW,KACrBrE,EAAkB0C,QACpB3C,EAAe2C,MAAQ,SACvB8D,OAED,MAEL,CAAEgC,MAAM,KAIVF,EAAAA,EAAAA,IACE,IAAMpI,EAAKI,QACX,KACME,GACF+H,aAAa/H,GAEfA,EAAY6D,WAAW,KACrByB,MACC,MAEL,CAAE2C,WAAW,IAIfC,OAAOC,iBAAiB,eAAiBrB,IACnCtH,EAAkB0C,QACpB4E,EAAEsB,iBACFtB,EAAEuB,YAAc,yBAKtBC,EAAAA,EAAAA,IAAgB,KACVtI,GACF+H,aAAa/H,GAEXC,GACF8H,aAAa9H,GAEfiI,OAAOK,oBAAoB,eAAgB,U,kOAppB3CC,EAAAA,EAAAA,IAkOM,MAlONC,EAkOM,EAjOJC,EAAAA,EAAAA,IAgOUC,EAAA,MA/NGC,QAAMC,EAAAA,EAAAA,IACf,IAkBM,EAlBNC,EAAAA,EAAAA,IAkBM,MAlBNC,EAkBM,EAjBJD,EAAAA,EAAAA,IAUM,aATJA,EAAAA,EAAAA,IAAqD,IAArDE,GAAqDC,EAAAA,EAAAA,IAA/BpH,GAAAK,MAAS,OAAS,QAAZ,IAC5B4G,EAAAA,EAAAA,IAAoC,WAAAG,EAAAA,EAAAA,IAA7BvJ,EAAKE,OAAS,SAAJ,GACaJ,EAAA0C,OAAqB3C,EAAA2C,Q,WAAnDsG,EAAAA,EAAAA,IAMM,MANNU,EAMM,CAL8B,WAAnB3J,EAAA2C,Q,WAAfiH,EAAAA,EAAAA,IAAiEC,EAAA,CAAAC,IAAA,I,iBAArB,IAAW,EAAXX,EAAAA,EAAAA,KAAWY,EAAAA,EAAAA,IAAAC,EAAAA,Y,OAChB,UAAnBhK,EAAA2C,Q,WAApBiH,EAAAA,EAAAA,IAAyEC,EAAA,CAAAC,IAAA,I,iBAAzB,IAAe,EAAfX,EAAAA,EAAAA,KAAeY,EAAAA,EAAAA,IAAAE,EAAAA,gB,wBAC/DV,EAAAA,EAAAA,IAEO,OAFPW,GAEOR,EAAAA,EAAAA,IADiB,WAAnB1J,EAAA2C,MAA8B,UAA+B,UAAnB3C,EAAA2C,MAA6B,QAAU,WAAzB,O,kBAIjE4G,EAAAA,EAAAA,IAKM,MALNY,EAKM,EAJJhB,EAAAA,EAAAA,IAAiDiB,EAAA,CAArCC,QAAOhC,IAAY,C,iBAAE,IAAI,IAAAiC,EAAA,MAAAA,EAAA,M,QAAJ,QAAI,O,OACrCnB,EAAAA,EAAAA,IAEYiB,EAAA,CAFDzF,KAAK,UAAWlF,QAASA,EAAAkD,MAAU0H,QAAOnC,I,kBACnD,IAA8B,E,iBAA3B5F,GAAAK,MAAS,OAAS,QAAZ,K,2CAKjB,IAyMU,EAzMVwG,EAAAA,EAAAA,IAyMUoB,EAAA,CAzMAC,MAAOrK,EAAM,cAAY,OAAOsK,MAAM,e,kBAC9C,IAOe,EAPftB,EAAAA,EAAAA,IAOeuB,EAAA,CAPDC,MAAM,MAAI,C,iBACtB,IAKE,EALFxB,EAAAA,EAAAA,IAKEyB,EAAA,C,WAJSzK,EAAKE,M,qCAALF,EAAKE,MAAKwK,GACnBnI,YAAY,QACZoI,UAAU,MACV,sB,gCAGJ3B,EAAAA,EAAAA,IASeuB,EAAA,CATDC,MAAM,MAAI,C,iBACtB,IAOE,EAPFxB,EAAAA,EAAAA,IAOEyB,EAAA,C,WANSzK,EAAKG,Q,qCAALH,EAAKG,QAAOuK,GACrBlG,KAAK,WACJoG,KAAM,EACPD,UAAU,MACV,qBACApI,YAAY,U,gCAGhByG,EAAAA,EAAAA,IA2KeuB,EAAA,CA3KDC,MAAM,MAAI,C,iBACtB,IAyKM,EAzKNpB,EAAAA,EAAAA,IAyKM,MAzKNyB,EAyKM,EAxKJzB,EAAAA,EAAAA,IA0IM,MA1IN0B,EA0IM,EAzIJ1B,EAAAA,EAAAA,IAwGM,MAxGN2B,EAwGM,EAvGJ3B,EAAAA,EAAAA,IAwBM,MAxBN4B,EAwBM,EAvBJhC,EAAAA,EAAAA,IAsBkBiC,EAAA,M,iBArBhB,IAMY,EANZjC,EAAAA,EAAAA,IAMYiB,EAAA,CALVtF,KAAK,QACJuF,QAAKC,EAAA,KAAAA,EAAA,GAAAO,GAAEtI,GAAe,KAAM,KAAM,OACnClC,MAAM,e,kBAEN,IAAkB,IAAAiK,EAAA,MAAAA,EAAA,MAAlBf,EAAAA,EAAAA,IAAkB,cAAV,KAAC,O,OAEXJ,EAAAA,EAAAA,IAMYiB,EAAA,CALVtF,KAAK,QACJuF,QAAKC,EAAA,KAAAA,EAAA,GAAAO,GAAEtI,GAAe,IAAK,IAAK,OACjClC,MAAM,e,kBAEN,IAAU,IAAAiK,EAAA,MAAAA,EAAA,MAAVf,EAAAA,EAAAA,IAAU,UAAN,KAAC,O,OAEPJ,EAAAA,EAAAA,IAMYiB,EAAA,CALVtF,KAAK,QACJuF,QAAKC,EAAA,KAAAA,EAAA,GAAAO,GAAEtI,GAAe,IAAK,IAAK,SACjClC,MAAM,Q,kBACP,IAED,IAAAiK,EAAA,MAAAA,EAAA,M,QAFC,SAED,O,iBAGJf,EAAAA,EAAAA,IAwBM,MAxBN8B,EAwBM,EAvBJlC,EAAAA,EAAAA,IAsBkBiC,EAAA,M,iBArBhB,IAMY,EANZjC,EAAAA,EAAAA,IAMYiB,EAAA,CALVtF,KAAK,QACJuF,QAAKC,EAAA,KAAAA,EAAA,GAAAO,GAAEtI,GAAe,KAAM,GAAI,SACjClC,MAAM,Q,kBACP,IAED,IAAAiK,EAAA,MAAAA,EAAA,M,QAFC,QAED,O,OACAnB,EAAAA,EAAAA,IAMYiB,EAAA,CALVtF,KAAK,QACJuF,QAAKC,EAAA,KAAAA,EAAA,GAAAO,GAAEtI,GAAe,MAAO,GAAI,SAClClC,MAAM,Q,kBACP,IAED,IAAAiK,EAAA,MAAAA,EAAA,M,QAFC,QAED,O,OACAnB,EAAAA,EAAAA,IAMYiB,EAAA,CALVtF,KAAK,QACJuF,QAAKC,EAAA,KAAAA,EAAA,GAAAO,GAAEtI,GAAe,OAAQ,GAAI,SACnClC,MAAM,Q,kBACP,IAED,IAAAiK,EAAA,MAAAA,EAAA,M,QAFC,QAED,O,iBAGJf,EAAAA,EAAAA,IAwBM,MAxBN+B,EAwBM,EAvBJnC,EAAAA,EAAAA,IAsBkBiC,EAAA,M,iBArBhB,IAMY,EANZjC,EAAAA,EAAAA,IAMYiB,EAAA,CALVtF,KAAK,QACJuF,QAAKC,EAAA,KAAAA,EAAA,GAAAO,GAAEtI,GAAe,KAAM,GAAI,SACjClC,MAAM,Q,kBACP,IAED,IAAAiK,EAAA,MAAAA,EAAA,M,QAFC,OAED,O,OACAnB,EAAAA,EAAAA,IAMYiB,EAAA,CALVtF,KAAK,QACJuF,QAAKC,EAAA,KAAAA,EAAA,GAAAO,GAAEtI,GAAe,MAAO,GAAI,SAClClC,MAAM,Q,kBACP,IAED,IAAAiK,EAAA,MAAAA,EAAA,M,QAFC,QAED,O,OACAnB,EAAAA,EAAAA,IAMYiB,EAAA,CALVtF,KAAK,QACJuF,QAAKC,EAAA,MAAAA,EAAA,IAAAO,GAAEtI,GAAe,KAAM,GAAI,OACjClC,MAAM,M,kBACP,IAED,IAAAiK,EAAA,MAAAA,EAAA,M,QAFC,OAED,O,iBAGJf,EAAAA,EAAAA,IA2BM,MA3BNgC,EA2BM,EA1BJpC,EAAAA,EAAAA,IAMYiB,EAAA,CALVtF,KAAK,QACJuF,QAAO3G,GACRrD,MAAM,O,kBACP,IAED,IAAAiK,EAAA,MAAAA,EAAA,M,QAFC,SAED,O,OACAnB,EAAAA,EAAAA,IAMYiB,EAAA,CALVtF,KAAK,QACJuF,QAAO1G,GACRtD,MAAM,Q,kBACP,IAED,IAAAiK,EAAA,MAAAA,EAAA,M,QAFC,QAED,O,OACAnB,EAAAA,EAAAA,IAWYqC,EAAA,CAVVf,MAAM,aACNgB,OAAO,kCACN,kBAAgB,EAChB,gBAAejH,GACf,aAAYS,GACZ,WAAUM,I,kBAEX,IAEY,EAFZ4D,EAAAA,EAAAA,IAEYiB,EAAA,CAFDtF,KAAK,QAASrF,QAASE,EAAAgD,O,kBAChC,IAAsC,E,iBAAnChD,EAAAgD,MAAiB,SAAW,MAAd,K,iCAKzB4G,EAAAA,EAAAA,IAgBM,MAhBNmC,EAgBM,EAfJvC,EAAAA,EAAAA,IASEyB,EAAA,C,QARI,kBAAJlL,IAAIG,E,WACKM,EAAKI,Q,uCAALJ,EAAKI,QAAOsK,GACrBlG,KAAK,WACJoG,KAAM,GACPN,MAAM,iBACN/H,YAAY,4CACXiJ,UAAO,C,mCAAiBpJ,GAAe,KAAM,KAAM,MAAb,4B,mCACdA,GAAe,IAAK,IAAK,MAAX,8B,wBAEzCgH,EAAAA,EAAAA,IAIM,MAJNqC,EAIM,EAHJrC,EAAAA,EAAAA,IAAyC,YAAnC,QAAIG,EAAAA,EAAAA,IAAGxH,GAAAS,MAAaR,OAAK,IAC/BoH,EAAAA,EAAAA,IAAyC,YAAnC,QAAIG,EAAAA,EAAAA,IAAGxH,GAAAS,MAAaP,OAAK,IAC/BmH,EAAAA,EAAAA,IAAyC,YAAnC,QAAIG,EAAAA,EAAAA,IAAGxH,GAAAS,MAAaN,OAAK,OAGAzC,EAAA+C,MAAeb,S,WAAlDmH,EAAAA,EAAAA,IAcM,MAdN4C,EAcM,C,eAbJtC,EAAAA,EAAAA,IAAiC,KAA9BkB,MAAM,gBAAe,SAAK,KAC7BlB,EAAAA,EAAAA,IAWM,MAXNuC,EAWM,G,aAVJ7C,EAAAA,EAAAA,IASM8C,EAAAA,GAAA,MAAAC,EAAAA,EAAAA,IARWpM,EAAA+C,MAARgD,K,WADTsD,EAAAA,EAAAA,IASM,OAPHa,IAAKnE,EAAKa,IACXiE,MAAM,e,EAENlB,EAAAA,EAAAA,IAAqC,OAA/B0C,IAAKtG,EAAKxH,IAAM+N,IAAKvG,EAAKxH,K,WAChCgL,EAAAA,EAAAA,IAEYiB,EAAA,CAFDrI,KAAA,GAAK4C,KAAK,SAASG,KAAK,QAASuF,QAAKQ,GAAErF,GAAYG,I,kBAAO,IAEtE,IAAA2E,EAAA,MAAAA,EAAA,M,QAFsE,QAEtE,O,sDAKRf,EAAAA,EAAAA,IA4BM,MA5BN4C,EA4BM,EA3BJ5C,EAAAA,EAAAA,IAUM,MAVN6C,EAUM,C,eATJ7C,EAAAA,EAAAA,IAAiB,YAAX,QAAI,IAKFjI,GAAAqB,MAASb,OAAS,I,WAJ1B8H,EAAAA,EAAAA,IAOYQ,EAAA,C,MANVrI,KAAA,GACA+C,KAAK,QACJuF,QAAO9F,I,kBAGR,IAA+B,E,iBAA5BxE,EAAA4C,MAAU,OAAS,QAAZ,K,0BAGd4G,EAAAA,EAAAA,IAeM,MAfN8C,EAeM,CAd2BtM,EAAA4C,OAAWrB,GAAAqB,MAASb,OAAS,I,WAA5DmH,EAAAA,EAAAA,IAYM,MAZNqD,EAYM,C,eAXJ/C,EAAAA,EAAAA,IAAW,UAAP,MAAE,KACNA,EAAAA,EAAAA,IASK,a,aARHN,EAAAA,EAAAA,IAOK8C,EAAAA,GAAA,MAAAC,EAAAA,EAAAA,IANqB1K,GAAAqB,MAAQ,CAAxBgD,EAAM4G,M,WADhBtD,EAAAA,EAAAA,IAOK,MALFa,IAAKyC,EACL9B,OAAK+B,EAAAA,EAAAA,IAAA,aAAe7G,EAAK/D,SACzByI,QAAKQ,GAAEjH,GAAgB+B,EAAK5D,Q,QAE1B4D,EAAK5D,MAAI,GAAA0K,K,4BAIlBlD,EAAAA,EAAAA,IAAgF,OAA3EkB,MAAM,kB,QAAsB,oBAAJ/K,IAAII,EAAoB4M,UAAQzL,EAAA0B,O,wBAKpCL,GAAAK,Q,WAAjCiH,EAAAA,EAAAA,IASec,EAAA,C,MATDC,MAAM,Q,kBAClB,IAOE,EAPFxB,EAAAA,EAAAA,IAOEyB,EAAA,C,WANSzK,EAAKK,Y,uCAALL,EAAKK,YAAWqK,GACzBlG,KAAK,WACJoG,KAAM,EACPD,UAAU,MACV,qBACApI,YAAY,qB,2FCxNxB,MAAMiK,GAA2B,OAAgB,EAAQ,CAAC,CAAC,YAAY,qBAEvE,O","sources":["webpack://Chunyin/./src/api/wiki.js","webpack://Chunyin/./src/api/file.js","webpack://Chunyin/./src/views/wiki/WikiEditor.vue","webpack://Chunyin/./src/views/wiki/WikiEditor.vue?afe7"],"sourcesContent":["import request from './request'\n\nexport const fetchWikiPages = (params) => {\n  return request({\n    url: '/wiki/pages',\n    method: 'get',\n    params\n  })\n}\n\nexport const fetchWikiPage = (slug) => {\n  return request({\n    url: `/wiki/pages/${slug}`,\n    method: 'get'\n  })\n}\n\nexport const fetchWikiHistory = (slug) => {\n  return request({\n    url: `/wiki/pages/${slug}/history`,\n    method: 'get'\n  })\n}\n\nexport const fetchWikiRevisionDetail = (slug, revisionId) => {\n  return request({\n    url: `/wiki/pages/${slug}/history/${revisionId}`,\n    method: 'get'\n  })\n}\n\nexport const restoreWikiRevision = (slug, revisionId) => {\n  return request({\n    url: `/wiki/pages/${slug}/history/${revisionId}/restore`,\n    method: 'post'\n  })\n}\n\nexport const fetchWikiDiscussions = (slug) => {\n  return request({\n    url: `/wiki/pages/${slug}/discussions`,\n    method: 'get'\n  })\n}\n\nexport const createWikiDiscussion = (slug, data) => {\n  return request({\n    url: `/wiki/pages/${slug}/discussions`,\n    method: 'post',\n    data\n  })\n}\n\nexport const fetchWikiStats = () => {\n  return request({\n    url: '/wiki/pages/stats',\n    method: 'get'\n  })\n}\n\nexport const createWikiPage = (data) => {\n  return request({\n    url: '/wiki/pages',\n    method: 'post',\n    data\n  })\n}\n\nexport const updateWikiPage = (id, data) => {\n  return request({\n    url: `/wiki/pages/${id}`,\n    method: 'put',\n    data\n  })\n}\n\nexport const favoriteWikiPage = (id) => {\n  return request({\n    url: `/wiki/pages/${id}/favorite`,\n    method: 'post'\n  })\n}\n","import request from './request'\n\nexport const deleteFile = (uuid) => {\n  return request({\n    url: `/files/${uuid}`,\n    method: 'delete'\n  })\n}\n","<template>\n  <div class=\"editor-page\">\n    <el-card>\n      <template #header>\n        <div class=\"header\">\n          <div>\n            <p class=\"eyebrow\">{{ isEdit ? '编辑条目' : '新建条目' }}</p>\n            <h2>{{ form.title || '未命名词条' }}</h2>\n            <div class=\"status-bar\" v-if=\"hasUnsavedChanges || autoSaveStatus\">\n              <el-icon v-if=\"autoSaveStatus === 'saving'\"><Loading /></el-icon>\n              <el-icon v-else-if=\"autoSaveStatus === 'saved'\"><CircleCheck /></el-icon>\n              <span class=\"status-text\">\n                {{ autoSaveStatus === 'saving' ? '正在保存...' : autoSaveStatus === 'saved' ? '已自动保存' : '有未保存的更改' }}\n              </span>\n            </div>\n          </div>\n          <div class=\"header-actions\">\n            <el-button @click=\"handleGoBack\">返回列表</el-button>\n            <el-button type=\"primary\" :loading=\"loading\" @click=\"handleSubmit\">\n              {{ isEdit ? '提交更新' : '发布词条' }}\n            </el-button>\n          </div>\n        </div>\n      </template>\n      <el-form :model=\"form\" label-width=\"80px\" class=\"editor-form\">\n        <el-form-item label=\"标题\">\n          <el-input \n            v-model=\"form.title\" \n            placeholder=\"请输入标题\"\n            maxlength=\"200\"\n            show-word-limit\n          />\n        </el-form-item>\n        <el-form-item label=\"摘要\">\n          <el-input\n            v-model=\"form.summary\"\n            type=\"textarea\"\n            :rows=\"2\"\n            maxlength=\"500\"\n            show-word-limit\n            placeholder=\"简要概述条目\"\n          />\n        </el-form-item>\n        <el-form-item label=\"正文\">\n          <div class=\"editor-grid\">\n            <div class=\"editor-panel\">\n              <div class=\"toolbar\">\n                <div class=\"toolbar-group\">\n                  <el-button-group>\n                    <el-button \n                      size=\"small\" \n                      @click=\"insertMarkdown('**', '**', '加粗')\"\n                      title=\"加粗 (Ctrl+B)\"\n                    >\n                      <strong>B</strong>\n                    </el-button>\n                    <el-button \n                      size=\"small\" \n                      @click=\"insertMarkdown('*', '*', '斜体')\"\n                      title=\"斜体 (Ctrl+I)\"\n                    >\n                      <em>I</em>\n                    </el-button>\n                    <el-button \n                      size=\"small\" \n                      @click=\"insertMarkdown('`', '`', '行内代码')\"\n                      title=\"行内代码\"\n                    >\n                      &lt;/&gt;\n                    </el-button>\n                  </el-button-group>\n                </div>\n                <div class=\"toolbar-group\">\n                  <el-button-group>\n                    <el-button \n                      size=\"small\" \n                      @click=\"insertMarkdown('# ', '', '一级标题')\"\n                      title=\"一级标题\"\n                    >\n                      H1\n                    </el-button>\n                    <el-button \n                      size=\"small\" \n                      @click=\"insertMarkdown('## ', '', '二级标题')\"\n                      title=\"二级标题\"\n                    >\n                      H2\n                    </el-button>\n                    <el-button \n                      size=\"small\" \n                      @click=\"insertMarkdown('### ', '', '三级标题')\"\n                      title=\"三级标题\"\n                    >\n                      H3\n                    </el-button>\n                  </el-button-group>\n                </div>\n                <div class=\"toolbar-group\">\n                  <el-button-group>\n                    <el-button \n                      size=\"small\" \n                      @click=\"insertMarkdown('- ', '', '无序列表')\"\n                      title=\"无序列表\"\n                    >\n                      •\n                    </el-button>\n                    <el-button \n                      size=\"small\" \n                      @click=\"insertMarkdown('1. ', '', '有序列表')\"\n                      title=\"有序列表\"\n                    >\n                      1.\n                    </el-button>\n                    <el-button \n                      size=\"small\" \n                      @click=\"insertMarkdown('> ', '', '引用')\"\n                      title=\"引用\"\n                    >\n                      \"\n                    </el-button>\n                  </el-button-group>\n                </div>\n                <div class=\"toolbar-group\">\n                  <el-button \n                    size=\"small\" \n                    @click=\"insertCodeBlock\"\n                    title=\"代码块\"\n                  >\n                    { }\n                  </el-button>\n                  <el-button \n                    size=\"small\" \n                    @click=\"insertLink\"\n                    title=\"插入链接\"\n                  >\n                    链接\n                  </el-button>\n                  <el-upload\n                    class=\"upload-btn\"\n                    action=\"/api/files/upload?category=WIKI\"\n                    :show-file-list=\"false\"\n                    :before-upload=\"beforeUpload\"\n                    :on-success=\"handleUploadSuccess\"\n                    :on-error=\"handleUploadError\"\n                  >\n                    <el-button size=\"small\" :loading=\"uploadingImage\">\n                      {{ uploadingImage ? '上传中...' : '图片' }}\n                    </el-button>\n                  </el-upload>\n                </div>\n              </div>\n              <div class=\"editor-wrapper\">\n                <el-input\n                  ref=\"contentInputRef\"\n                  v-model=\"form.content\"\n                  type=\"textarea\"\n                  :rows=\"18\"\n                  class=\"markdown-input\"\n                  placeholder=\"支持 Markdown 语法，使用工具栏快捷按钮或直接输入 Markdown 语法\"\n                  @keydown.ctrl.b.prevent=\"insertMarkdown('**', '**', '加粗')\"\n                  @keydown.ctrl.i.prevent=\"insertMarkdown('*', '*', '斜体')\"\n                />\n                <div class=\"editor-stats\">\n                  <span>字数: {{ contentStats.words }}</span>\n                  <span>字符: {{ contentStats.chars }}</span>\n                  <span>行数: {{ contentStats.lines }}</span>\n                </div>\n              </div>\n              <div class=\"uploaded-images\" v-if=\"uploadedImages.length\">\n                <p class=\"images-title\">已上传图片</p>\n                <div class=\"images-list\">\n                  <div\n                    v-for=\"item in uploadedImages\"\n                    :key=\"item.uid\"\n                    class=\"image-thumb\"\n                  >\n                    <img :src=\"item.url\" :alt=\"item.url\">\n                    <el-button text type=\"danger\" size=\"small\" @click=\"removeImage(item)\">\n                      删除\n                    </el-button>\n                  </div>\n                </div>\n              </div>\n            </div>\n            <div class=\"preview-panel\">\n              <div class=\"preview-header\">\n                <span>实时预览</span>\n                <el-button \n                  text \n                  size=\"small\" \n                  @click=\"togglePreviewFullscreen\"\n                  v-if=\"tocItems.length > 0\"\n                >\n                  {{ showToc ? '隐藏目录' : '显示目录' }}\n                </el-button>\n              </div>\n              <div class=\"preview-wrapper\">\n                <div class=\"preview-toc\" v-if=\"showToc && tocItems.length > 0\">\n                  <h4>目录</h4>\n                  <ul>\n                    <li \n                      v-for=\"(item, index) in tocItems\" \n                      :key=\"index\"\n                      :class=\"`toc-level-${item.level}`\"\n                      @click=\"scrollToHeading(item.text)\"\n                    >\n                      {{ item.text }}\n                    </li>\n                  </ul>\n                </div>\n                <div class=\"preview-content\" ref=\"previewContentRef\" v-html=\"previewHtml\"></div>\n              </div>\n            </div>\n          </div>\n        </el-form-item>\n        <el-form-item label=\"编辑说明\" v-if=\"isEdit\">\n          <el-input\n            v-model=\"form.editSummary\"\n            type=\"textarea\"\n            :rows=\"2\"\n            maxlength=\"200\"\n            show-word-limit\n            placeholder=\"简要说明本次编辑的变更内容（可选）\"\n          />\n        </el-form-item>\n      </el-form>\n    </el-card>\n  </div>\n</template>\n\n<script setup>\nimport { onMounted, reactive, computed, ref, watch, onBeforeUnmount, nextTick } from 'vue'\nimport { useRoute, useRouter } from 'vue-router'\nimport { createWikiPage, fetchWikiPage, updateWikiPage } from '@/api/wiki'\nimport { deleteFile } from '@/api/file'\nimport { ElMessage, ElMessageBox } from 'element-plus'\nimport { Loading, CircleCheck } from '@element-plus/icons-vue'\nimport MarkdownIt from 'markdown-it'\nimport DOMPurify from 'dompurify'\n\nconst route = useRoute()\nconst router = useRouter()\nconst loading = ref(false)\nconst uploadingImage = ref(false)\nconst uploadedImages = ref([])\nconst contentInputRef = ref(null)\nconst previewContentRef = ref(null)\nconst showToc = ref(true)\nconst autoSaveStatus = ref('') // '', 'saving', 'saved'\nconst hasUnsavedChanges = ref(false)\nconst originalContent = ref('')\n\nconst form = reactive({\n  title: '',\n  summary: '',\n  content: '',\n  editSummary: ''\n})\n\nlet syncTimer = null\nlet autoSaveTimer = null\nlet lastSavedContent = ''\n\nconst md = new MarkdownIt({\n  html: true,\n  linkify: true,\n  breaks: true\n})\n\nconst previewHtml = computed(() => {\n  if (!form.content) {\n    return '<p class=\"empty\">开始输入内容，实时预览会显示在这里</p>'\n  }\n  return DOMPurify.sanitize(md.render(form.content))\n})\n\nconst tocItems = computed(() => {\n  if (!form.content) return []\n  return form.content.split('\\n')\n    .filter(line => /^#{1,6}\\s+/.test(line))\n    .map(line => {\n      const level = line.match(/^#+/)[0].length\n      return {\n        level,\n        text: line.replace(/^#+/, '').trim()\n      }\n    })\n})\n\nconst contentStats = computed(() => {\n  const content = form.content || ''\n  const words = content.trim() ? content.trim().split(/\\s+/).length : 0\n  const chars = content.length\n  const lines = content.split('\\n').length\n  return { words, chars, lines }\n})\n\nconst isEdit = computed(() => !!route.params.id)\n\n// Markdown 工具栏功能\nconst insertMarkdown = (before, after, placeholder = '') => {\n  if (!contentInputRef.value) return\n  const textarea = contentInputRef.value.$el.querySelector('textarea')\n  if (!textarea) return\n  \n  const start = textarea.selectionStart\n  const end = textarea.selectionEnd\n  const selectedText = form.content.substring(start, end)\n  const replacement = selectedText \n    ? `${before}${selectedText}${after}` \n    : `${before}${placeholder}${after}`\n  \n  form.content = form.content.substring(0, start) + replacement + form.content.substring(end)\n  \n  nextTick(() => {\n    const newPos = start + replacement.length\n    textarea.setSelectionRange(newPos, newPos)\n    textarea.focus()\n  })\n}\n\nconst insertCodeBlock = () => {\n  if (!contentInputRef.value) return\n  const textarea = contentInputRef.value.$el.querySelector('textarea')\n  if (!textarea) return\n  \n  const start = textarea.selectionStart\n  const end = textarea.selectionEnd\n  const selectedText = form.content.substring(start, end)\n  const replacement = selectedText \n    ? `\\`\\`\\`\\n${selectedText}\\n\\`\\`\\`` \n    : `\\`\\`\\`\\n// 代码内容\\n\\`\\`\\``\n  \n  form.content = form.content.substring(0, start) + replacement + form.content.substring(end)\n  \n  nextTick(() => {\n    const newPos = selectedText \n      ? start + replacement.length \n      : start + replacement.length - 10\n    textarea.setSelectionRange(newPos, newPos)\n    textarea.focus()\n  })\n}\n\nconst insertLink = () => {\n  if (!contentInputRef.value) return\n  const textarea = contentInputRef.value.$el.querySelector('textarea')\n  if (!textarea) return\n  \n  const start = textarea.selectionStart\n  const end = textarea.selectionEnd\n  const selectedText = form.content.substring(start, end)\n  const replacement = selectedText \n    ? `[${selectedText}](https://)`\n    : `[链接文本](https://)`\n  \n  form.content = form.content.substring(0, start) + replacement + form.content.substring(end)\n  \n  nextTick(() => {\n    const newPos = selectedText \n      ? start + replacement.length - 1\n      : start + replacement.length - 9\n    textarea.setSelectionRange(newPos, newPos)\n    textarea.focus()\n  })\n}\n\nconst scrollToHeading = (text) => {\n  if (!previewContentRef.value) return\n  const headings = previewContentRef.value.querySelectorAll('h1, h2, h3, h4, h5, h6')\n  for (const heading of headings) {\n    if (heading.textContent.trim() === text) {\n      heading.scrollIntoView({ behavior: 'smooth', block: 'center' })\n      heading.style.backgroundColor = '#e6f7ff'\n      setTimeout(() => {\n        heading.style.backgroundColor = ''\n      }, 1000)\n      break\n    }\n  }\n}\n\nconst togglePreviewFullscreen = () => {\n  showToc.value = !showToc.value\n}\n\nconst beforeUpload = (file) => {\n  const isImage = file.type.startsWith('image/')\n  const sizeOk = file.size / 1024 / 1024 < 5\n  if (!isImage) ElMessage.error('只能上传图片')\n  if (!sizeOk) ElMessage.error('图片需小于 5MB')\n  if (isImage && sizeOk) {\n    uploadingImage.value = true\n  }\n  return isImage && sizeOk\n}\n\nconst handleUploadSuccess = (response) => {\n  uploadingImage.value = false\n  if (response.code === 200 && response.data?.url) {\n    const url = response.data.url\n    const snippet = `![图片说明](${url})`\n    if (contentInputRef.value) {\n      const textarea = contentInputRef.value.$el.querySelector('textarea')\n      if (textarea) {\n        const start = textarea.selectionStart\n        const insertText = form.content ? `\\n\\n${snippet}\\n\\n` : snippet\n        form.content = form.content.substring(0, start) + insertText + form.content.substring(start)\n        nextTick(() => {\n          textarea.setSelectionRange(start + insertText.length, start + insertText.length)\n          textarea.focus()\n        })\n      } else {\n        form.content = form.content ? `${form.content}\\n\\n${snippet}` : snippet\n      }\n    } else {\n      form.content = form.content ? `${form.content}\\n\\n${snippet}` : snippet\n    }\n    ElMessage.success('图片已插入')\n  } else {\n    ElMessage.error('上传失败')\n  }\n}\n\nconst handleUploadError = () => {\n  uploadingImage.value = false\n  ElMessage.error('上传失败，请稍后再试')\n}\n\nconst removeImage = async (item) => {\n  const escapedUrl = item.url.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&')\n  const regex = new RegExp(`!\\\\[[^\\\\]]*\\\\]\\\\(${escapedUrl}\\\\)`, 'g')\n  form.content = (form.content || '').replace(regex, '').replace(/\\n{3,}/g, '\\n\\n').trim()\n  if (item.uuid) {\n    try {\n      await deleteFile(item.uuid)\n      ElMessage.success('图片已删除')\n    } catch (error) {\n      ElMessage.error(error.response?.data?.message || '删除失败')\n    }\n  } else {\n    ElMessage.success('图片引用已移除')\n  }\n}\n\nconst extractImagesFromContent = () => {\n  if (!form.content) {\n    uploadedImages.value = []\n    return\n  }\n  const regex = /!\\[[^\\]]*]\\((.*?)\\)/g\n  const seen = new Set()\n  const items = []\n  let match\n  while ((match = regex.exec(form.content)) !== null) {\n    const url = match[1]?.trim()\n    if (!url || seen.has(url)) continue\n    seen.add(url)\n    const uuidMatch = url.match(/\\/(?:api\\/)?files\\/([a-zA-Z0-9-]+)/)\n    items.push({\n      uid: uuidMatch ? uuidMatch[1] : `${url}-${items.length}`,\n      url,\n      uuid: uuidMatch ? uuidMatch[1] : null\n    })\n  }\n  uploadedImages.value = items\n}\n\n// 自动保存草稿到 localStorage\nconst autoSaveDraft = () => {\n  if (!form.title && !form.content) return\n  \n  const draftKey = isEdit.value ? `wiki_draft_${route.params.id}` : 'wiki_draft_new'\n  const draft = {\n    title: form.title,\n    summary: form.summary,\n    content: form.content,\n    editSummary: form.editSummary,\n    savedAt: new Date().toISOString()\n  }\n  localStorage.setItem(draftKey, JSON.stringify(draft))\n  autoSaveStatus.value = 'saved'\n  setTimeout(() => {\n    autoSaveStatus.value = ''\n  }, 2000)\n}\n\nconst loadDraft = () => {\n  const draftKey = isEdit.value ? `wiki_draft_${route.params.id}` : 'wiki_draft_new'\n  const draftStr = localStorage.getItem(draftKey)\n  if (draftStr) {\n    try {\n      const draft = JSON.parse(draftStr)\n      return draft\n    } catch (e) {\n      return null\n    }\n  }\n  return null\n}\n\nconst clearDraft = () => {\n  const draftKey = isEdit.value ? `wiki_draft_${route.params.id}` : 'wiki_draft_new'\n  localStorage.removeItem(draftKey)\n}\n\nconst loadPage = async () => {\n  if (!isEdit.value) {\n    // 新建时尝试加载草稿\n    const draft = loadDraft()\n    if (draft) {\n      try {\n        await ElMessageBox.confirm(\n          '检测到未保存的草稿，是否恢复？',\n          '恢复草稿',\n          {\n            confirmButtonText: '恢复',\n            cancelButtonText: '放弃',\n            type: 'info'\n          }\n        )\n        Object.assign(form, {\n          title: draft.title || '',\n          summary: draft.summary || '',\n          content: draft.content || '',\n          editSummary: draft.editSummary || ''\n        })\n        originalContent.value = form.content\n        lastSavedContent = form.content\n      } catch {\n        clearDraft()\n      }\n    }\n    return\n  }\n  \n  try {\n    const res = await fetchWikiPage(route.params.id)\n    Object.assign(form, {\n      title: res.data.title || '',\n      summary: res.data.summary || '',\n      content: res.data.content || '',\n      editSummary: ''\n    })\n    originalContent.value = form.content\n    lastSavedContent = form.content\n  } catch (error) {\n    ElMessage.error('加载词条失败')\n  }\n}\n\nconst handleSubmit = async () => {\n  if (!form.title.trim() || !form.content.trim()) {\n    ElMessage.warning('标题和正文不能为空')\n    return\n  }\n  \n  loading.value = true\n  try {\n    if (isEdit.value) {\n      await updateWikiPage(route.params.id, {\n        title: form.title,\n        summary: form.summary,\n        content: form.content,\n        editSummary: form.editSummary\n      })\n      ElMessage.success('已提交修改，等待审核')\n    } else {\n      await createWikiPage({\n        title: form.title,\n        summary: form.summary,\n        content: form.content,\n        editSummary: form.editSummary\n      })\n      ElMessage.success('已提交，等待审核')\n    }\n    clearDraft()\n    hasUnsavedChanges.value = false\n    router.push('/wiki')\n  } catch (error) {\n    console.error('提交失败:', error)\n    ElMessage.error(error.response?.data?.message || '提交失败，请稍后再试')\n  } finally {\n    loading.value = false\n  }\n}\n\nconst handleGoBack = async () => {\n  if (hasUnsavedChanges.value) {\n    try {\n      await ElMessageBox.confirm(\n        '您有未保存的更改，确定要离开吗？',\n        '确认离开',\n        {\n          confirmButtonText: '离开',\n          cancelButtonText: '取消',\n          type: 'warning'\n        }\n      )\n      router.push('/wiki')\n    } catch {\n      // 用户取消\n    }\n  } else {\n    router.push('/wiki')\n  }\n}\n\nonMounted(() => {\n  loadPage()\n  \n  // 监听内容变化，自动保存\n  watch(\n    () => [form.title, form.summary, form.content],\n    () => {\n      hasUnsavedChanges.value = form.content !== originalContent.value\n      \n      if (autoSaveTimer) {\n        clearTimeout(autoSaveTimer)\n      }\n      \n      autoSaveTimer = setTimeout(() => {\n        if (hasUnsavedChanges.value) {\n          autoSaveStatus.value = 'saving'\n          autoSaveDraft()\n        }\n      }, 2000) // 2秒后自动保存\n    },\n    { deep: true }\n  )\n  \n  // 监听内容变化，提取图片\n  watch(\n    () => form.content,\n    () => {\n      if (syncTimer) {\n        clearTimeout(syncTimer)\n      }\n      syncTimer = setTimeout(() => {\n        extractImagesFromContent()\n      }, 200)\n    },\n    { immediate: true }\n  )\n  \n  // 页面离开前提示\n  window.addEventListener('beforeunload', (e) => {\n    if (hasUnsavedChanges.value) {\n      e.preventDefault()\n      e.returnValue = '您有未保存的更改，确定要离开吗？'\n    }\n  })\n})\n\nonBeforeUnmount(() => {\n  if (syncTimer) {\n    clearTimeout(syncTimer)\n  }\n  if (autoSaveTimer) {\n    clearTimeout(autoSaveTimer)\n  }\n  window.removeEventListener('beforeunload', () => {})\n})\n</script>\n\n<style scoped>\n.editor-page {\n  max-width: 1400px;\n  margin: 0 auto;\n  padding: 20px;\n}\n\n.header {\n  display: flex;\n  justify-content: space-between;\n  align-items: flex-start;\n  gap: 16px;\n}\n\n.header-actions {\n  display: flex;\n  gap: 12px;\n}\n\n.status-bar {\n  display: flex;\n  align-items: center;\n  gap: 6px;\n  margin-top: 8px;\n  font-size: 12px;\n  color: #909399;\n}\n\n.status-text {\n  font-size: 12px;\n}\n\n.eyebrow {\n  font-size: 12px;\n  color: #909399;\n  margin: 0 0 4px;\n  letter-spacing: 1px;\n}\n\n.editor-form {\n  margin-top: 12px;\n}\n\n.editor-grid {\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  gap: 20px;\n}\n\n.editor-panel,\n.preview-panel {\n  border: 1px solid #ebeef5;\n  border-radius: 16px;\n  padding: 16px;\n  background: #fafafa;\n  display: flex;\n  flex-direction: column;\n}\n\n.toolbar {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 8px;\n  margin-bottom: 12px;\n  padding-bottom: 12px;\n  border-bottom: 1px solid #ebeef5;\n}\n\n.toolbar-group {\n  display: flex;\n  gap: 4px;\n}\n\n.toolbar .el-button {\n  padding: 6px 12px;\n}\n\n.editor-wrapper {\n  position: relative;\n  flex: 1;\n}\n\n.markdown-input :deep(textarea) {\n  font-family: 'Fira Code', 'JetBrains Mono', Consolas, monospace;\n  font-size: 14px;\n  line-height: 1.6;\n}\n\n.editor-stats {\n  position: absolute;\n  bottom: 8px;\n  right: 12px;\n  display: flex;\n  gap: 12px;\n  font-size: 12px;\n  color: #909399;\n  background: rgba(255, 255, 255, 0.9);\n  padding: 4px 8px;\n  border-radius: 4px;\n}\n\n.uploaded-images {\n  margin-top: 16px;\n  padding-top: 16px;\n  border-top: 1px solid #ebeef5;\n}\n\n.images-title {\n  font-size: 12px;\n  color: #606266;\n  margin: 0 0 8px;\n}\n\n.images-list {\n  display: flex;\n  gap: 12px;\n  flex-wrap: wrap;\n}\n\n.image-thumb {\n  width: 120px;\n  border: 1px solid #dcdfe6;\n  border-radius: 8px;\n  overflow: hidden;\n  display: flex;\n  flex-direction: column;\n  background: #fff;\n}\n\n.image-thumb img {\n  width: 100%;\n  height: 80px;\n  object-fit: cover;\n}\n\n.preview-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  font-weight: 600;\n  margin-bottom: 12px;\n  color: #606266;\n  padding-bottom: 12px;\n  border-bottom: 1px solid #ebeef5;\n}\n\n.preview-wrapper {\n  display: flex;\n  gap: 16px;\n  flex: 1;\n  overflow: hidden;\n}\n\n.preview-toc {\n  width: 200px;\n  flex-shrink: 0;\n  background: #fff;\n  border-radius: 8px;\n  padding: 12px;\n  max-height: 520px;\n  overflow-y: auto;\n}\n\n.preview-toc h4 {\n  margin: 0 0 12px;\n  font-size: 14px;\n  color: #303133;\n}\n\n.preview-toc ul {\n  list-style: none;\n  padding: 0;\n  margin: 0;\n}\n\n.preview-toc li {\n  padding: 6px 0;\n  cursor: pointer;\n  color: #606266;\n  font-size: 13px;\n  transition: color 0.2s;\n}\n\n.preview-toc li:hover {\n  color: #409eff;\n}\n\n.preview-toc .toc-level-1 {\n  font-weight: 600;\n  padding-left: 0;\n}\n\n.preview-toc .toc-level-2 {\n  padding-left: 12px;\n}\n\n.preview-toc .toc-level-3 {\n  padding-left: 24px;\n  font-size: 12px;\n}\n\n.preview-content {\n  flex: 1;\n  background: #fff;\n  border-radius: 12px;\n  padding: 20px;\n  overflow: auto;\n  max-height: 520px;\n  line-height: 1.8;\n}\n\n.preview-content :deep(h1),\n.preview-content :deep(h2),\n.preview-content :deep(h3),\n.preview-content :deep(h4),\n.preview-content :deep(h5),\n.preview-content :deep(h6) {\n  margin: 24px 0 12px;\n  font-weight: 600;\n  scroll-margin-top: 20px;\n}\n\n.preview-content :deep(h1) {\n  font-size: 28px;\n  border-bottom: 2px solid #ebeef5;\n  padding-bottom: 8px;\n}\n\n.preview-content :deep(h2) {\n  font-size: 24px;\n}\n\n.preview-content :deep(h3) {\n  font-size: 20px;\n}\n\n.preview-content :deep(p) {\n  margin: 12px 0;\n}\n\n.preview-content :deep(img) {\n  max-width: 100%;\n  border-radius: 12px;\n  margin: 16px 0;\n}\n\n.preview-content :deep(code) {\n  background: #f5f5f5;\n  padding: 2px 6px;\n  border-radius: 4px;\n  font-family: 'Fira Code', 'JetBrains Mono', Consolas, monospace;\n  font-size: 0.9em;\n}\n\n.preview-content :deep(pre) {\n  background: #f5f5f5;\n  padding: 16px;\n  border-radius: 8px;\n  overflow-x: auto;\n  margin: 16px 0;\n}\n\n.preview-content :deep(pre code) {\n  background: none;\n  padding: 0;\n}\n\n.preview-content :deep(blockquote) {\n  border-left: 4px solid #409eff;\n  padding-left: 16px;\n  margin: 16px 0;\n  color: #606266;\n  font-style: italic;\n}\n\n.preview-content :deep(ul),\n.preview-content :deep(ol) {\n  margin: 12px 0;\n  padding-left: 24px;\n}\n\n.preview-content :deep(li) {\n  margin: 6px 0;\n}\n\n.preview-content :deep(a) {\n  color: #409eff;\n  text-decoration: none;\n}\n\n.preview-content :deep(a:hover) {\n  text-decoration: underline;\n}\n\n.preview-content :deep(.empty) {\n  color: #909399;\n  text-align: center;\n  padding: 40px 0;\n}\n\n@media (max-width: 1200px) {\n  .editor-grid {\n    grid-template-columns: 1fr;\n  }\n  \n  .preview-wrapper {\n    flex-direction: column;\n  }\n  \n  .preview-toc {\n    width: 100%;\n    max-height: 200px;\n  }\n}\n</style>\n","import script from \"./WikiEditor.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./WikiEditor.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./WikiEditor.vue?vue&type=style&index=0&id=8bc21522&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-8bc21522\"]])\n\nexport default __exports__"],"names":["fetchWikiPages","params","request","url","method","fetchWikiPage","slug","fetchWikiHistory","fetchWikiRevisionDetail","revisionId","restoreWikiRevision","fetchWikiDiscussions","createWikiDiscussion","data","fetchWikiStats","createWikiPage","updateWikiPage","id","favoriteWikiPage","deleteFile","uuid","route","useRoute","router","useRouter","loading","ref","uploadingImage","uploadedImages","contentInputRef","previewContentRef","showToc","autoSaveStatus","hasUnsavedChanges","originalContent","form","reactive","title","summary","content","editSummary","syncTimer","autoSaveTimer","lastSavedContent","md","MarkdownIt","html","linkify","breaks","previewHtml","computed","DOMPurify","sanitize","render","tocItems","split","filter","line","test","map","level","match","length","text","replace","trim","contentStats","words","chars","lines","isEdit","insertMarkdown","before","after","placeholder","value","textarea","$el","querySelector","start","selectionStart","end","selectionEnd","selectedText","substring","replacement","nextTick","newPos","setSelectionRange","focus","insertCodeBlock","insertLink","scrollToHeading","headings","querySelectorAll","heading","textContent","scrollIntoView","behavior","block","style","backgroundColor","setTimeout","togglePreviewFullscreen","beforeUpload","file","isImage","type","startsWith","sizeOk","size","ElMessage","error","handleUploadSuccess","response","code","snippet","insertText","success","handleUploadError","removeImage","async","escapedUrl","item","regex","RegExp","message","extractImagesFromContent","seen","Set","items","exec","has","add","uuidMatch","push","uid","autoSaveDraft","draftKey","draft","savedAt","Date","toISOString","localStorage","setItem","JSON","stringify","loadDraft","draftStr","getItem","parse","e","clearDraft","removeItem","loadPage","ElMessageBox","confirm","confirmButtonText","cancelButtonText","Object","assign","res","handleSubmit","console","warning","handleGoBack","onMounted","watch","clearTimeout","deep","immediate","window","addEventListener","preventDefault","returnValue","onBeforeUnmount","removeEventListener","_createElementBlock","_hoisted_1","_createVNode","_component_el_card","header","_withCtx","_createElementVNode","_hoisted_2","_hoisted_3","_toDisplayString","_hoisted_4","_createBlock","_component_el_icon","key","_unref","Loading","CircleCheck","_hoisted_5","_hoisted_6","_component_el_button","onClick","_cache","_component_el_form","model","class","_component_el_form_item","label","_component_el_input","$event","maxlength","rows","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","_component_el_button_group","_hoisted_11","_hoisted_12","_hoisted_13","_component_el_upload","action","_hoisted_14","onKeydown","_hoisted_15","_hoisted_16","_hoisted_17","_Fragment","_renderList","src","alt","_hoisted_19","_hoisted_20","_hoisted_21","_hoisted_22","index","_normalizeClass","_hoisted_23","innerHTML","__exports__"],"ignoreList":[],"sourceRoot":""}