{"version":3,"file":"js/661.8558f0e8.js","mappings":"4YAKO,MAAMA,EAAeC,IACnBC,EAAAA,EAAAA,GAAQ,CACbC,IAAK,iBACLC,OAAQ,OACRH,SAOSI,EAAgBC,IACpBJ,EAAAA,EAAAA,GAAQ,CACbC,IAAK,SAASG,IACdF,OAAQ,QAOCG,EAAoBC,IACxBN,EAAAA,EAAAA,GAAQ,CACbC,IAAK,eACLC,OAAQ,MACRI,WAOSC,EAAoBC,IACxBR,EAAAA,EAAAA,GAAQ,CACbC,IAAK,cAAcO,IACnBN,OAAQ,QAOCO,EAAoBH,IACxBN,EAAAA,EAAAA,GAAQ,CACbC,IAAK,eACLC,OAAQ,MACRI,WAOSI,EAAoBA,KACxBV,EAAAA,EAAAA,GAAQ,CACbC,IAAK,wBACLC,OAAQ,QAkBCS,EAAgBZ,IACpBC,EAAAA,EAAAA,GAAQ,CACbC,IAAK,gBACLC,OAAQ,OACRH,SAOSa,EAAiBC,IACrBb,EAAAA,EAAAA,GAAQ,CACbC,IAAK,SAASY,YACdX,OAAQ,QAOCY,EAAmBC,IACvBf,EAAAA,EAAAA,GAAQ,CACbC,IAAK,iBAAiBc,IACtBb,OAAQ,WAOCc,EAAsBV,IAC1BN,EAAAA,EAAAA,GAAQ,CACbC,IAAK,kBACLC,OAAQ,MACRI,WAOSW,EAAaC,IACxB,MAAMZ,EAAS,CAAC,EAMhB,OAJIY,GAAcC,MAAMC,QAAQF,IAAeA,EAAWG,OAAS,IAEjEf,EAAOY,WAAaA,IAEflB,EAAAA,EAAAA,GAAQ,CACbC,IAAK,WACLC,OAAQ,MACRI,W,sRC9HG,MAAMgB,EAAkBvB,IACtBC,EAAAA,EAAAA,GAAQ,CACbC,IAAK,cACLC,OAAQ,OACRH,SAwESwB,EAAyBA,CAACC,EAAO,EAAGC,EAAO,MAC/CzB,EAAAA,EAAAA,GAAQ,CACbC,IAAK,yBACLC,OAAQ,MACRI,OAAQ,CAAEkB,OAAMC,UAOPC,EAA2BA,CAACb,EAAOc,EAAYH,EAAO,EAAGC,EAAO,MACpEzB,EAAAA,EAAAA,GAAQ,CACbC,IAAK,0BACLC,OAAQ,MACRI,OAAQ,CAAEO,QAAOc,aAAYH,OAAMC,UAO1BG,EAA8BA,CAACJ,EAAO,EAAGC,EAAO,MACpDzB,EAAAA,EAAAA,GAAQ,CACbC,IAAK,8BACLC,OAAQ,MACRI,OAAQ,CAAEkB,OAAMC,UAOPI,EAAmBzB,IACvBJ,EAAAA,EAAAA,GAAQ,CACbC,IAAK,eAAeG,IACpBF,OAAQ,QAOC4B,EAAgB1B,IACpBJ,EAAAA,EAAAA,GAAQ,CACbC,IAAK,eAAeG,SACpBF,OAAQ,SAOC6B,EAAsB3B,IAC1BJ,EAAAA,EAAAA,GAAQ,CACbC,IAAK,eAAeG,WACpBF,OAAQ,SAOC8B,EAAiBA,CAAC5B,EAAIL,KAC1BC,EAAAA,EAAAA,GAAQ,CACbC,IAAK,eAAeG,WACpBF,OAAQ,OACRH,SAOSkC,EAAuBA,CAACT,EAAO,EAAGC,EAAO,MAC7CzB,EAAAA,EAAAA,GAAQ,CACbC,IAAK,sBACLC,OAAQ,MACRI,OAAQ,CAAEkB,OAAMC,S,0KC1Jb,MAAMS,EAAiBA,KACrBlC,EAAAA,EAAAA,GAAQ,CACbC,IAAK,YACLC,OAAQ,Q,siBCgJZ,MAAMiC,GAASC,EAAAA,EAAAA,MAuBTC,GAAUC,EAAAA,EAAAA,IAAI,MACdC,GAAaD,EAAAA,EAAAA,KAAI,GACjBE,GAAcF,EAAAA,EAAAA,KAAI,GAElBG,GAAOH,EAAAA,EAAAA,IAAI,CACfI,aAAc,KACdxB,WAAY,GACZL,MAAO,KACP8B,gBAAiB,EACjBC,OAAQ,KAGJC,EAAqBA,CAACC,EAAMC,EAAOC,KAClCD,GAA0B,IAAjBA,EAAM1B,OAET0B,EAAM1B,OAAS,EACxB2B,EAAS,IAAIC,MAAM,iBAEnBD,IAJAA,EAAS,IAAIC,MAAM,iBAQjBC,EAAQ,CACZR,aAAc,CACZ,CAAES,UAAU,EAAMC,QAAS,UAAWC,QAAS,WAEjDnC,WAAY,CACV,CAAEiC,UAAU,EAAMG,UAAWT,EAAoBQ,QAAS,WAE5DV,gBAAiB,CACf,CAAEQ,UAAU,EAAMC,QAAS,YAAaC,QAAS,QACjD,CAAEE,KAAM,SAAUC,IAAK,EAAGC,IAAK,GAAIL,QAAS,iBAAkBC,QAAS,UAIrEK,GAAcpB,EAAAA,EAAAA,IAAI,IAClBqB,GAASrB,EAAAA,EAAAA,IAAI,IACbsB,GAActB,EAAAA,EAAAA,IAAI,MAGlBuB,EAAgBC,GACbA,EAAKC,UAAYC,KAAKC,MAAQ,MAIjCC,EAAkBC,UACtB,IACE,MAAMC,QAAYlC,IACD,MAAbkC,EAAIC,OACNX,EAAYX,MAAQqB,EAAIrE,MAAQ,GAEpC,CAAE,MAAOuE,GACPC,EAAAA,GAAUD,MAAM,aAClB,GAIIE,EAAsBL,UAE1B,GAAI1B,EAAKM,MAAM7B,YAAcuB,EAAKM,MAAM7B,WAAWG,OAAS,EAG1D,OAFAkD,EAAAA,GAAUE,QAAQ,qBAClBhC,EAAKM,MAAM7B,WAAauB,EAAKM,MAAM7B,WAAWwD,MAAM,EAAG,UAKnDC,KAIFA,EAAaR,UACjB3B,EAAYO,OAAQ,EACpB,IAEE,MAAM7B,EAAcuB,EAAKM,MAAM7B,YAAcuB,EAAKM,MAAM7B,WAAWG,OAAS,EACxEoB,EAAKM,MAAM7B,WACX,KACEkD,QAAYnD,EAAAA,EAAAA,IAAUC,GAC5B,GAAiB,MAAbkD,EAAIC,OACNV,EAAOZ,MAAQqB,EAAIrE,MAAQ,GAEvB0C,EAAKM,MAAMlC,OAAO,CACpB,MAAM+D,EAAMjB,EAAOZ,MAAM8B,KAAKC,GAAKA,EAAE1E,KAAOqC,EAAKM,MAAMlC,OACnD+D,IACFhB,EAAYb,MAAQ,IAAK6B,GAE7B,CAEJ,CAAE,MAAON,GACPS,QAAQT,MAAM,YAAaA,GAC3B,MAAMU,EAAeV,EAAMW,UAAUlF,MAAMqD,SAAWkB,EAAMlB,SAAW,WACvEmB,EAAAA,GAAUD,MAAMU,EAClB,CAAE,QACAxC,EAAYO,OAAQ,CACtB,GAIImC,EAAmBrE,IACvB,IAAKA,EAEH,YADA+C,EAAYb,MAAQ,MAItB,MAAM6B,EAAMjB,EAAOZ,MAAM8B,KAAKC,GAAKA,EAAE1E,KAAOS,GACxC+D,IACFhB,EAAYb,MAAQ,IAAK6B,KAKvBO,EAAoBA,KACxB1C,EAAKM,MAAMlC,MAAQ,KACnB+C,EAAYb,MAAQ,KAEpB4B,KAIIS,EAAajB,UACZ9B,EAAQU,aAEPV,EAAQU,MAAMsC,SAASlB,UAC3B,GAAKmB,EAGL,GAAK7C,EAAKM,MAAM7B,YAA+C,IAAjCuB,EAAKM,MAAM7B,WAAWG,OAApD,CAKAkB,EAAWQ,OAAQ,EACnB,IACE,MAAMqB,QAAY9C,EAAAA,EAAAA,IAAe,CAC/BoB,aAAcD,EAAKM,MAAML,aACzBxB,WAAYuB,EAAKM,MAAM7B,WACvBL,MAAO4B,EAAKM,MAAMlC,OAAS,KAC3B8B,gBAAiBF,EAAKM,MAAMJ,gBAC5BC,OAAQH,EAAKM,MAAMH,QAAU,OAGd,MAAbwB,EAAIC,OACNE,EAAAA,GAAUgB,QAAQ,kBAClBpD,EAAOqD,KAAK,eAEhB,CAAE,MAAOlB,GACPS,QAAQT,MAAM,UAAWA,GACzB,MAAMU,EAAeV,EAAMW,UAAUlF,MAAMqD,SAAWkB,EAAMlB,SAAW,SACvEmB,EAAAA,GAAUD,MAAMU,EAClB,CAAE,QACAzC,EAAWQ,OAAQ,CACrB,CAtBA,MAFEwB,EAAAA,GAAUD,MAAM,kBA6BhBmB,EAAYA,KAChBpD,EAAQU,OAAO2C,cACfjD,EAAKM,MAAQ,CACXL,aAAc,KACdxB,WAAY,GACZL,MAAO,KACP8B,gBAAiB,EACjBC,OAAQ,IAEVe,EAAOZ,MAAQ,GACfa,EAAYb,MAAQ,M,OAGtB4C,EAAAA,EAAAA,IAAU,KACRzB,IACAS,M,8YAzVAiB,EAAAA,EAAAA,IA2IM,MA3INC,EA2IM,EA1IJC,EAAAA,EAAAA,IAGM,MAHNC,EAGM,C,aAFJD,EAAAA,EAAAA,IAAa,UAAT,QAAI,KACRE,EAAAA,EAAAA,IAAiDC,EAAA,CAArCC,QAAKC,EAAA,KAAAA,EAAA,GAAAC,GAAEC,EAAAC,QAAQC,S,kBAAQ,IAAE,IAAAJ,EAAA,KAAAA,EAAA,K,QAAF,MAAE,O,SAGvCH,EAAAA,EAAAA,IAoIUQ,EAAA,M,iBAnIR,IAkIU,EAlIVR,EAAAA,EAAAA,IAkIUS,EAAA,C,QAlIG,UAAJnE,IAAID,EAAWqE,MAAOjE,EAAAM,MAAOG,MAAOA,EAAO,cAAY,S,kBAC9D,IAUe,EAVf8C,EAAAA,EAAAA,IAUeW,EAAA,CAVDC,MAAM,OAAOC,KAAK,gB,kBAC9B,IAQE,EARFb,EAAAA,EAAAA,IAQEc,EAAA,C,WAPSrE,EAAAM,MAAKL,a,qCAALD,EAAAM,MAAKL,aAAY0D,GAC1B7C,KAAK,WACLwD,YAAY,SACZC,OAAO,mBACP,eAAa,sBACZ,gBAAenD,EAChBoD,MAAA,gB,gCAIJjB,EAAAA,EAAAA,IAoBeW,EAAA,CApBDC,MAAM,OAAOC,KAAK,c,kBAC9B,IAeY,EAfZb,EAAAA,EAAAA,IAeYkB,EAAA,C,WAdDzE,EAAAM,MAAK7B,W,qCAALuB,EAAAM,MAAK7B,WAAUkF,GACxBW,YAAY,gBACZI,WAAA,GACAC,SAAA,GACC,oBAAmB,EACpBH,MAAA,eACCI,SAAQ7C,G,kBAGP,IAA8B,G,aADhCoB,EAAAA,EAAAA,IAKE0B,EAAAA,GAAA,MAAAC,EAAAA,EAAAA,IAJkB7D,EAAAX,MAAXyE,K,WADTC,EAAAA,EAAAA,IAKEC,EAAA,CAHCC,IAAKH,EAAQpH,GACbwG,MAAOY,EAAQI,KACf7E,MAAOyE,EAAQpH,I,0EAGpB0F,EAAAA,EAAAA,IAEM,OAFDmB,MAAA,yDAA0D,iBAE/D,M,OAGFjB,EAAAA,EAAAA,IAkEeW,EAAA,CAlEDC,MAAM,OAAOC,KAAK,S,kBAE9B,IAyBM,CAzBKpE,EAAAM,MAAKlC,OAAS+C,EAAAb,Q,WAAzB6C,EAAAA,EAAAA,IAyBM,MAzBNiC,EAyBM,EAxBJ7B,EAAAA,EAAAA,IAgBUQ,EAAA,CAhBDsB,OAAO,QAAQC,MAAM,qB,kBAC5B,IAcM,EAdNjC,EAAAA,EAAAA,IAcM,MAdNkC,EAcM,EAbJlC,EAAAA,EAAAA,IAGM,MAHNmC,EAGM,EAFJnC,EAAAA,EAAAA,IAAoD,OAApDoC,GAAoDC,EAAAA,EAAAA,IAA1BvE,EAAAb,MAAY6E,MAAI,IAC1C5B,EAAAA,EAAAA,IAA4EoC,EAAA,C,WAA1DxE,EAAAb,MAAYsF,U,qCAAZzE,EAAAb,MAAYsF,UAASjC,GAAEkC,SAAA,GAAS,gBAAW7G,KAAK,S,0BAEpEqE,EAAAA,EAAAA,IAQM,MARNyC,EAQM,EAPJzC,EAAAA,EAAAA,IAGO,OAHP0C,EAGO,EAFLxC,EAAAA,EAAAA,IAAqCyC,EAAA,M,iBAA5B,IAAkB,EAAlBzC,EAAAA,EAAAA,KAAkB0C,EAAAA,EAAAA,IAAAC,EAAAA,mB,eAAU,KACrCR,EAAAA,EAAAA,IAAGvE,EAAAb,MAAY6F,SAAO,KAEZhF,EAAAb,MAAY8F,W,WAAxBjD,EAAAA,EAAAA,IAEO,OAFPkD,EAAuD,SACjDX,EAAAA,EAAAA,IAAGvE,EAAAb,MAAY8F,SAASE,QAAQ,IAAK,OAC3C,K,4BAIN/C,EAAAA,EAAAA,IAMYC,EAAA,CALV1C,KAAK,UACL0D,MAAA,sBACCf,QAAOf,G,kBACT,IAED,IAAAgB,EAAA,MAAAA,EAAA,M,QAFC,YAED,O,sBAIFP,EAAAA,EAAAA,IAmCM,MAAAoD,EAAA,E,qBAlCJpD,EAAAA,EAAAA,IA0BM,MA1BNqD,EA0BM,CAzB8B,IAAlBtF,EAAAZ,MAAO1B,QAAiBmB,EAAAO,O,4BAAxC0E,EAAAA,EAAAA,IAAmFyB,EAAA,C,MAA9BC,YAAY,oBACjEnD,EAAAA,EAAAA,IAuBiBoD,EAAA,C,WAvBQ3G,EAAAM,MAAKlC,M,qCAAL4B,EAAAM,MAAKlC,MAAKuF,GAAE2B,MAAM,kBAAmBV,SAAQnC,G,kBAElE,IAAqB,G,aADvBU,EAAAA,EAAAA,IAqBW0B,EAAAA,GAAA,MAAAC,EAAAA,EAAAA,IApBK5D,EAAAZ,MAAP6B,K,WADT6C,EAAAA,EAAAA,IAqBW4B,EAAA,CAnBR1B,IAAK/C,EAAIxE,GACTwG,MAAOhC,EAAIxE,GACZ2H,MAAM,a,kBAEN,IAcM,EAdNjC,EAAAA,EAAAA,IAcM,MAdNwD,EAcM,EAbJxD,EAAAA,EAAAA,IAGM,MAHNyD,EAGM,EAFJzD,EAAAA,EAAAA,IAA4C,OAA5C0D,GAA4CrB,EAAAA,EAAAA,IAAlBvD,EAAIgD,MAAI,IAClC5B,EAAAA,EAAAA,IAAoEoC,EAAA,C,WAAlDxD,EAAIyD,U,yBAAJzD,EAAIyD,UAASjC,EAAEkC,SAAA,GAAS,gBAAW7G,KAAK,S,gDAE5DqE,EAAAA,EAAAA,IAQM,MARN2D,EAQM,EAPJ3D,EAAAA,EAAAA,IAGO,OAHP4D,EAGO,EAFL1D,EAAAA,EAAAA,IAAqCyC,EAAA,M,iBAA5B,IAAkB,EAAlBzC,EAAAA,EAAAA,KAAkB0C,EAAAA,EAAAA,IAAAC,EAAAA,mB,eAAU,KACrCR,EAAAA,EAAAA,IAAGvD,EAAIgE,SAAO,KAEJhE,EAAI+E,gB,WAAhB/D,EAAAA,EAAAA,IAEO,OAFPgE,GAEOzB,EAAAA,EAAAA,IADFvD,EAAI+E,eAAa,K,kFApBhBnH,EAAAO,UA2BhBiD,EAAAA,EAAAA,IAMYC,EAAA,CALV1C,KAAK,OACL0D,MAAA,sBACCf,QAAKC,EAAA,KAAAA,EAAA,GAAAC,IAAE3D,EAAAM,MAAKlC,MAAQ,KAAM+C,EAAAb,MAAc,Q,kBAC1C,IAED,IAAAoD,EAAA,MAAAA,EAAA,M,QAFC,WAED,O,kBAIJH,EAAAA,EAAAA,IAQeW,EAAA,CARDC,MAAM,SAASC,KAAK,mB,kBAChC,IAME,EANFb,EAAAA,EAAAA,IAME6D,EAAA,C,WALSpH,EAAAM,MAAKJ,gB,qCAALF,EAAAM,MAAKJ,gBAAeyD,GAC5B5C,IAAK,EACLC,IAAK,GACNsD,YAAY,YACZE,MAAA,gB,gCAIJjB,EAAAA,EAAAA,IASeW,EAAA,CATDC,MAAM,KAAKC,KAAK,U,kBAC5B,IAOE,EAPFb,EAAAA,EAAAA,IAOE8D,EAAA,C,WANSrH,EAAAM,MAAKH,O,qCAALH,EAAAM,MAAKH,OAAMwD,GACpB7C,KAAK,WACJwG,KAAM,EACPhD,YAAY,cACZiD,UAAU,MACV,sB,gCAIJhE,EAAAA,EAAAA,IAKeW,EAAA,M,iBAJb,IAEY,EAFZX,EAAAA,EAAAA,IAEYC,EAAA,CAFD1C,KAAK,UAAW2C,QAAOd,EAAa6E,QAAS1H,EAAAQ,O,kBAAY,IAEpE,IAAAoD,EAAA,MAAAA,EAAA,M,QAFoE,UAEpE,O,qBACAH,EAAAA,EAAAA,IAA4CC,EAAA,CAAhCC,QAAOT,GAAS,C,iBAAE,IAAE,IAAAU,EAAA,MAAAA,EAAA,M,QAAF,MAAE,O,yDClI1C,MAAM+D,GAA2B,OAAgB,EAAQ,CAAC,CAAC,YAAY,qBAEvE,O","sources":["webpack://Chunyin/./src/api/bar.js","webpack://Chunyin/./src/api/activity.js","webpack://Chunyin/./src/api/alcohol.js","webpack://Chunyin/./src/views/activity/CreateActivity.vue","webpack://Chunyin/./src/views/activity/CreateActivity.vue?ab86"],"sourcesContent":["import request from './request'\n\n/**\n * 注册酒吧（提交申请）\n */\nexport const registerBar = (data) => {\n  return request({\n    url: '/bars/register',\n    method: 'post',\n    data\n  })\n}\n\n/**\n * 获取酒吧详情\n */\nexport const getBarDetail = (id) => {\n  return request({\n    url: `/bars/${id}`,\n    method: 'get'\n  })\n}\n\n/**\n * 搜索附近的酒吧\n */\nexport const searchNearbyBars = (params) => {\n  return request({\n    url: '/bars/nearby',\n    method: 'get',\n    params\n  })\n}\n\n/**\n * 按城市搜索酒吧\n */\nexport const searchBarsByCity = (city) => {\n  return request({\n    url: `/bars/city/${city}`,\n    method: 'get'\n  })\n}\n\n/**\n * 按名称搜索酒吧\n */\nexport const searchBarsByName = (params) => {\n  return request({\n    url: '/bars/search',\n    method: 'get',\n    params\n  })\n}\n\n/**\n * 获取当前用户提交的酒吧申请列表\n */\nexport const getMyApplications = () => {\n  return request({\n    url: '/bars/applications/my',\n    method: 'get'\n  })\n}\n\n/**\n * 审核酒吧申请（管理员功能）\n */\nexport const reviewBarApplication = (id, params) => {\n  return request({\n    url: `/bars/applications/${id}/review`,\n    method: 'put',\n    params\n  })\n}\n\n/**\n * 添加酒吧评价\n */\nexport const addBarReview = (data) => {\n  return request({\n    url: '/bars/reviews',\n    method: 'post',\n    data\n  })\n}\n\n/**\n * 获取酒吧的评价列表\n */\nexport const getBarReviews = (barId) => {\n  return request({\n    url: `/bars/${barId}/reviews`,\n    method: 'get'\n  })\n}\n\n/**\n * 删除评价\n */\nexport const deleteBarReview = (reviewId) => {\n  return request({\n    url: `/bars/reviews/${reviewId}`,\n    method: 'delete'\n  })\n}\n\n/**\n * 获取推荐的酒吧列表\n */\nexport const getRecommendedBars = (params) => {\n  return request({\n    url: '/bars/recommend',\n    method: 'get',\n    params\n  })\n}\n\n/**\n * 获取商家拥有的酒吧列表（用于创建活动时选择）\n */\nexport const getMyBars = (alcoholIds) => {\n  const params = {}\n  // 只有当alcoholIds存在且不为空数组时才传递\n  if (alcoholIds && Array.isArray(alcoholIds) && alcoholIds.length > 0) {\n    // axios会自动将数组转换为重复的参数：alcoholIds=1&alcoholIds=2\n    params.alcoholIds = alcoholIds\n  }\n  return request({\n    url: '/bars/my',\n    method: 'get',\n    params\n  })\n}\n\n","import request from './request'\n\n/**\n * 创建活动\n */\nexport const createActivity = (data) => {\n  return request({\n    url: '/activities',\n    method: 'post',\n    data\n  })\n}\n\n/**\n * 根据酒类标签推荐酒吧\n */\nexport const recommendBarsByAlcoholIds = (alcoholIds, latitude, longitude, limit = 10) => {\n  // 严格验证参数\n  if (!alcoholIds) {\n    return Promise.reject(new Error('请至少选择一个酒类标签'))\n  }\n  if (!Array.isArray(alcoholIds)) {\n    return Promise.reject(new Error('alcoholIds必须是数组'))\n  }\n  if (alcoholIds.length === 0) {\n    return Promise.reject(new Error('请至少选择一个酒类标签'))\n  }\n  \n  // 过滤掉无效值\n  const validIds = alcoholIds.filter(id => id != null && id !== undefined && !isNaN(id))\n  if (validIds.length === 0) {\n    return Promise.reject(new Error('请至少选择一个有效的酒类标签'))\n  }\n  \n  // 使用axios的params配置，会自动处理数组参数为 alcoholIds=1&alcoholIds=2 格式\n  const params = {\n    alcoholIds: validIds, // axios会自动将数组转换为重复的参数\n    limit: limit\n  }\n  \n  // 只有当值不为null和undefined时才添加\n  if (latitude != null && latitude !== undefined && !isNaN(latitude)) {\n    params.latitude = latitude\n  }\n  if (longitude != null && longitude !== undefined && !isNaN(longitude)) {\n    params.longitude = longitude\n  }\n  \n  return request({\n    url: '/activities/bars/recommend',\n    method: 'get',\n    params: params\n  })\n}\n\n/**\n * 根据酒类推荐酒吧（保留用于兼容）\n * @deprecated 使用 recommendBarsByAlcoholIds 代替\n */\nexport const recommendBarsByBeverage = (beverageId, latitude, longitude, limit = 10) => {\n  return request({\n    url: '/activities/bars/recommend-by-beverage',\n    method: 'get',\n    params: { beverageId, latitude, longitude, limit }\n  })\n}\n\n/**\n * 搜索酒吧（模糊搜索）\n */\nexport const searchBars = (keyword, limit = 20) => {\n  return request({\n    url: '/activities/bars/search',\n    method: 'get',\n    params: { keyword, limit }\n  })\n}\n\n/**\n * 获取我发起的活动\n */\nexport const getMyCreatedActivities = (page = 1, size = 10) => {\n  return request({\n    url: '/activities/my-created',\n    method: 'get',\n    params: { page, size }\n  })\n}\n\n/**\n * 获取推荐的活动\n */\nexport const getRecommendedActivities = (barId, beverageId, page = 1, size = 10) => {\n  return request({\n    url: '/activities/recommended',\n    method: 'get',\n    params: { barId, beverageId, page, size }\n  })\n}\n\n/**\n * 获取我参与的活动\n */\nexport const getMyParticipatedActivities = (page = 1, size = 10) => {\n  return request({\n    url: '/activities/my-participated',\n    method: 'get',\n    params: { page, size }\n  })\n}\n\n/**\n * 获取活动详情\n */\nexport const getActivityById = (id) => {\n  return request({\n    url: `/activities/${id}`,\n    method: 'get'\n  })\n}\n\n/**\n * 参与活动\n */\nexport const joinActivity = (id) => {\n  return request({\n    url: `/activities/${id}/join`,\n    method: 'post'\n  })\n}\n\n/**\n * 取消参与活动\n */\nexport const cancelJoinActivity = (id) => {\n  return request({\n    url: `/activities/${id}/cancel`,\n    method: 'post'\n  })\n}\n\n/**\n * 审核活动（管理员）\n */\nexport const reviewActivity = (id, data) => {\n  return request({\n    url: `/activities/${id}/review`,\n    method: 'post',\n    data\n  })\n}\n\n/**\n * 获取待审核的活动列表（管理员）\n */\nexport const getPendingActivities = (page = 1, size = 10) => {\n  return request({\n    url: '/activities/pending',\n    method: 'get',\n    params: { page, size }\n  })\n}\n\n","import request from './request'\n\n/**\n * 获取所有酒类标签列表\n */\nexport const getAlcoholList = () => {\n  return request({\n    url: '/alcohols',\n    method: 'get'\n  })\n}\n\n","<template>\n  <div class=\"create-activity\">\n    <div class=\"page-header\">\n      <h2>发起活动</h2>\n      <el-button @click=\"$router.back()\">返回</el-button>\n    </div>\n\n    <el-card>\n      <el-form ref=\"formRef\" :model=\"form\" :rules=\"rules\" label-width=\"120px\">\n        <el-form-item label=\"活动时间\" prop=\"activityTime\">\n          <el-date-picker\n            v-model=\"form.activityTime\"\n            type=\"datetime\"\n            placeholder=\"选择活动时间\"\n            format=\"YYYY-MM-DD HH:mm\"\n            value-format=\"YYYY-MM-DDTHH:mm:ss\"\n            :disabled-date=\"disabledDate\"\n            style=\"width: 100%\"\n          />\n        </el-form-item>\n\n        <el-form-item label=\"酒类标签\" prop=\"alcoholIds\">\n          <el-select\n            v-model=\"form.alcoholIds\"\n            placeholder=\"请选择酒类标签（最多2个）\"\n            filterable\n            multiple\n            :max-collapse-tags=\"2\"\n            style=\"width: 100%\"\n            @change=\"handleAlcoholChange\"\n          >\n            <el-option\n              v-for=\"alcohol in alcoholList\"\n              :key=\"alcohol.id\"\n              :label=\"alcohol.name\"\n              :value=\"alcohol.id\"\n            />\n          </el-select>\n          <div style=\"color: #909399; font-size: 12px; margin-top: 5px;\">\n            最多可选择2个酒类标签\n          </div>\n        </el-form-item>\n\n        <el-form-item label=\"酒吧选择\" prop=\"barId\">\n          <!-- 如果已选择酒吧，只显示选定的酒吧 -->\n          <div v-if=\"form.barId && selectedBar\" class=\"selected-bar-section\">\n            <el-card shadow=\"hover\" class=\"selected-bar-card\">\n              <div class=\"bar-option\">\n                <div class=\"bar-option-header\">\n                  <span class=\"bar-name\">{{ selectedBar.name }}</span>\n                  <el-rate v-model=\"selectedBar.avgRating\" disabled show-score size=\"small\" />\n                </div>\n                <div class=\"bar-option-info\">\n                  <span class=\"bar-address\">\n                    <el-icon><LocationFilled /></el-icon>\n                    {{ selectedBar.address }}\n                  </span>\n                  <span v-if=\"selectedBar.distance\" class=\"bar-distance\">\n                    距离: {{ selectedBar.distance.toFixed(2) }} 公里\n                  </span>\n                </div>\n              </div>\n            </el-card>\n            <el-button\n              type=\"primary\"\n              style=\"margin-top: 10px\"\n              @click=\"handleReselectBar\"\n            >\n              重新选择酒吧\n            </el-button>\n          </div>\n\n          <!-- 如果未选择酒吧，显示商家拥有的酒吧列表 -->\n          <div v-else>\n            <div v-loading=\"barsLoading\" class=\"bar-select-section\">\n              <el-empty v-if=\"myBars.length === 0 && !barsLoading\" description=\"您还没有酒吧，请先注册酒吧\" />\n              <el-radio-group v-model=\"form.barId\" class=\"bar-radio-group\" @change=\"handleBarSelect\">\n                <el-radio\n                  v-for=\"bar in myBars\"\n                  :key=\"bar.id\"\n                  :label=\"bar.id\"\n                  class=\"bar-radio\"\n                >\n                  <div class=\"bar-option\">\n                    <div class=\"bar-option-header\">\n                      <span class=\"bar-name\">{{ bar.name }}</span>\n                      <el-rate v-model=\"bar.avgRating\" disabled show-score size=\"small\" />\n                    </div>\n                    <div class=\"bar-option-info\">\n                      <span class=\"bar-address\">\n                        <el-icon><LocationFilled /></el-icon>\n                        {{ bar.address }}\n                      </span>\n                      <span v-if=\"bar.mainBeverages\" class=\"bar-beverages\" style=\"color: #909399; font-size: 12px;\">\n                        {{ bar.mainBeverages }}\n                      </span>\n                    </div>\n                  </div>\n                </el-radio>\n              </el-radio-group>\n            </div>\n            <el-button\n              type=\"text\"\n              style=\"margin-top: 10px\"\n              @click=\"form.barId = null; selectedBar = null\"\n            >\n              不选择酒吧\n            </el-button>\n          </div>\n        </el-form-item>\n\n        <el-form-item label=\"参与人数上限\" prop=\"maxParticipants\">\n          <el-input-number\n            v-model=\"form.maxParticipants\"\n            :min=\"2\"\n            :max=\"50\"\n            placeholder=\"请输入参与人数上限\"\n            style=\"width: 100%\"\n          />\n        </el-form-item>\n\n        <el-form-item label=\"备注\" prop=\"remark\">\n          <el-input\n            v-model=\"form.remark\"\n            type=\"textarea\"\n            :rows=\"4\"\n            placeholder=\"请输入活动备注（可选）\"\n            maxlength=\"500\"\n            show-word-limit\n          />\n        </el-form-item>\n\n        <el-form-item>\n          <el-button type=\"primary\" @click=\"submitForm\" :loading=\"submitting\">\n            提交审核\n          </el-button>\n          <el-button @click=\"resetForm\">重置</el-button>\n        </el-form-item>\n      </el-form>\n    </el-card>\n  </div>\n</template>\n\n<script setup>\nimport { ref, onMounted } from 'vue'\nimport { useRouter } from 'vue-router'\nimport { ElMessage } from 'element-plus'\nimport { LocationFilled } from '@element-plus/icons-vue'\nimport { createActivity } from '@/api/activity'\nimport { getAlcoholList } from '@/api/alcohol'\nimport { getMyBars } from '@/api/bar'\n\nconst router = useRouter()\n\n// 获取用户位置\nconst getUserLocation = () => {\n  return new Promise((resolve, reject) => {\n    if (!navigator.geolocation) {\n      reject(new Error('浏览器不支持地理位置API'))\n      return\n    }\n    navigator.geolocation.getCurrentPosition(\n      (position) => {\n        resolve({\n          latitude: position.coords.latitude,\n          longitude: position.coords.longitude\n        })\n      },\n      (error) => {\n        reject(error)\n      }\n    )\n  })\n}\n\nconst formRef = ref(null)\nconst submitting = ref(false)\nconst barsLoading = ref(false)\n\nconst form = ref({\n  activityTime: null,\n  alcoholIds: [],\n  barId: null,\n  maxParticipants: 2,\n  remark: ''\n})\n\nconst validateAlcoholIds = (rule, value, callback) => {\n  if (!value || value.length === 0) {\n    callback(new Error('请至少选择一个酒类标签'))\n  } else if (value.length > 2) {\n    callback(new Error('最多只能选择2个酒类标签'))\n  } else {\n    callback()\n  }\n}\n\nconst rules = {\n  activityTime: [\n    { required: true, message: '请选择活动时间', trigger: 'change' }\n  ],\n  alcoholIds: [\n    { required: true, validator: validateAlcoholIds, trigger: 'change' }\n  ],\n  maxParticipants: [\n    { required: true, message: '请输入参与人数上限', trigger: 'blur' },\n    { type: 'number', min: 2, max: 50, message: '参与人数上限应在2-50之间', trigger: 'blur' }\n  ]\n}\n\nconst alcoholList = ref([])\nconst myBars = ref([])\nconst selectedBar = ref(null)\n\n// 禁用过去的日期\nconst disabledDate = (time) => {\n  return time.getTime() < Date.now() - 8.64e7 // 禁用今天之前的日期\n}\n\n// 加载酒类标签列表\nconst loadAlcoholList = async () => {\n  try {\n    const res = await getAlcoholList()\n    if (res.code === 200) {\n      alcoholList.value = res.data || []\n    }\n  } catch (error) {\n    ElMessage.error('加载酒类标签列表失败')\n  }\n}\n\n// 酒类标签变化时重新加载商家酒吧（用于排序）\nconst handleAlcoholChange = async () => {\n  // 限制最多选择2个\n  if (form.value.alcoholIds && form.value.alcoholIds.length > 2) {\n    ElMessage.warning('最多只能选择2个酒类标签')\n    form.value.alcoholIds = form.value.alcoholIds.slice(0, 2)\n    return\n  }\n\n  // 重新加载商家酒吧，根据标签排序\n  await loadMyBars()\n}\n\n// 加载商家拥有的酒吧\nconst loadMyBars = async () => {\n  barsLoading.value = true\n  try {\n    // 只有当alcoholIds存在且不为空时才传递\n    const alcoholIds = (form.value.alcoholIds && form.value.alcoholIds.length > 0) \n      ? form.value.alcoholIds \n      : null\n    const res = await getMyBars(alcoholIds)\n    if (res.code === 200) {\n      myBars.value = res.data || []\n      // 如果已经选择了酒吧，更新selectedBar\n      if (form.value.barId) {\n        const bar = myBars.value.find(b => b.id === form.value.barId)\n        if (bar) {\n          selectedBar.value = { ...bar }\n        }\n      }\n    }\n  } catch (error) {\n    console.error('加载商家酒吧失败:', error)\n    const errorMessage = error.response?.data?.message || error.message || '加载商家酒吧失败'\n    ElMessage.error(errorMessage)\n  } finally {\n    barsLoading.value = false\n  }\n}\n\n// 酒吧选择处理\nconst handleBarSelect = (barId) => {\n  if (!barId) {\n    selectedBar.value = null\n    return\n  }\n  // 从商家酒吧列表中找到选中的酒吧\n  const bar = myBars.value.find(b => b.id === barId)\n  if (bar) {\n    selectedBar.value = { ...bar }\n  }\n}\n\n// 重新选择酒吧\nconst handleReselectBar = () => {\n  form.value.barId = null\n  selectedBar.value = null\n  // 重新加载商家酒吧\n  loadMyBars()\n}\n\n// 提交表单\nconst submitForm = async () => {\n  if (!formRef.value) return\n\n  await formRef.value.validate(async (valid) => {\n    if (!valid) return\n\n    // 确保alcoholIds有值\n    if (!form.value.alcoholIds || form.value.alcoholIds.length === 0) {\n      ElMessage.error('请至少选择一个酒类标签')\n      return\n    }\n\n    submitting.value = true\n    try {\n      const res = await createActivity({\n        activityTime: form.value.activityTime,\n        alcoholIds: form.value.alcoholIds,\n        barId: form.value.barId || null,\n        maxParticipants: form.value.maxParticipants,\n        remark: form.value.remark || null\n      })\n\n      if (res.code === 200) {\n        ElMessage.success('活动创建成功，等待管理员审核')\n        router.push('/activities')\n      }\n    } catch (error) {\n      console.error('创建活动失败:', error)\n      const errorMessage = error.response?.data?.message || error.message || '创建活动失败'\n      ElMessage.error(errorMessage)\n    } finally {\n      submitting.value = false\n    }\n  })\n}\n\n// 重置表单\nconst resetForm = () => {\n  formRef.value?.resetFields()\n  form.value = {\n    activityTime: null,\n    alcoholIds: [],\n    barId: null,\n    maxParticipants: 2,\n    remark: ''\n  }\n  myBars.value = []\n  selectedBar.value = null\n}\n\nonMounted(() => {\n  loadAlcoholList()\n  loadMyBars()\n})\n</script>\n\n<style scoped>\n.create-activity {\n  padding: 20px;\n  max-width: 1000px;\n  margin: 0 auto;\n}\n\n.page-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 20px;\n}\n\n.page-header h2 {\n  margin: 0;\n}\n\n.bar-select-section {\n  max-height: 400px;\n  overflow-y: auto;\n  padding: 10px;\n  border: 1px solid #dcdfe6;\n  border-radius: 4px;\n}\n\n.bar-radio-group {\n  width: 100%;\n}\n\n.bar-radio {\n  display: block;\n  margin-bottom: 15px;\n  padding: 10px;\n  border: 1px solid #e4e7ed;\n  border-radius: 4px;\n  transition: all 0.3s;\n}\n\n.bar-radio:hover {\n  border-color: #409eff;\n  background-color: #f5f7fa;\n}\n\n.bar-option {\n  width: 100%;\n}\n\n.bar-option-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 5px;\n}\n\n.bar-name {\n  font-weight: bold;\n  font-size: 16px;\n}\n\n.bar-option-info {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  color: #666;\n  font-size: 14px;\n}\n\n.bar-address {\n  display: flex;\n  align-items: center;\n  gap: 5px;\n}\n\n.bar-distance {\n  color: #409eff;\n}\n\n.bar-search-section {\n  margin-top: 10px;\n}\n\n.selected-bar-section {\n  margin-top: 10px;\n}\n\n.selected-bar-card {\n  margin-bottom: 10px;\n}\n\n.selected-bar-card .bar-option {\n  padding: 10px;\n}\n</style>\n\n","import script from \"./CreateActivity.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./CreateActivity.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./CreateActivity.vue?vue&type=style&index=0&id=f129dde0&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-f129dde0\"]])\n\nexport default __exports__"],"names":["registerBar","data","request","url","method","getBarDetail","id","searchNearbyBars","params","searchBarsByCity","city","searchBarsByName","getMyApplications","addBarReview","getBarReviews","barId","deleteBarReview","reviewId","getRecommendedBars","getMyBars","alcoholIds","Array","isArray","length","createActivity","getMyCreatedActivities","page","size","getRecommendedActivities","beverageId","getMyParticipatedActivities","getActivityById","joinActivity","cancelJoinActivity","reviewActivity","getPendingActivities","getAlcoholList","router","useRouter","formRef","ref","submitting","barsLoading","form","activityTime","maxParticipants","remark","validateAlcoholIds","rule","value","callback","Error","rules","required","message","trigger","validator","type","min","max","alcoholList","myBars","selectedBar","disabledDate","time","getTime","Date","now","loadAlcoholList","async","res","code","error","ElMessage","handleAlcoholChange","warning","slice","loadMyBars","bar","find","b","console","errorMessage","response","handleBarSelect","handleReselectBar","submitForm","validate","valid","success","push","resetForm","resetFields","onMounted","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_createVNode","_component_el_button","onClick","_cache","$event","_ctx","$router","back","_component_el_card","_component_el_form","model","_component_el_form_item","label","prop","_component_el_date_picker","placeholder","format","style","_component_el_select","filterable","multiple","onChange","_Fragment","_renderList","alcohol","_createBlock","_component_el_option","key","name","_hoisted_3","shadow","class","_hoisted_4","_hoisted_5","_hoisted_6","_toDisplayString","_component_el_rate","avgRating","disabled","_hoisted_7","_hoisted_8","_component_el_icon","_unref","LocationFilled","address","distance","_hoisted_9","toFixed","_hoisted_10","_hoisted_11","_component_el_empty","description","_component_el_radio_group","_component_el_radio","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_16","mainBeverages","_hoisted_17","_component_el_input_number","_component_el_input","rows","maxlength","loading","__exports__"],"ignoreList":[],"sourceRoot":""}