(self["webpackChunkChunyin"]=self["webpackChunkChunyin"]||[]).push([[77],{77:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return X}});t(4114);var s=t(641),l=t(33),n=t(953),o=t(5220),r=t(8548),u=t(4402),i=t(6617);const c={class:"ranking-container"},d={class:"time-tabs"},v=["onClick"],p={class:"tab-icon"},k={class:"tab-label"},m={class:"ranking-content"},f={key:0,class:"loading"},h={key:1,class:"empty"},y={key:2,class:"posts-grid"},g={key:0,class:"rank-icon"},b={key:1,class:"rank-number"},C={key:3,class:"load-more"},_={key:4,class:"no-more"};var L={__name:"Ranking",setup(e){const a=(0,o.rd)(),t=[{value:"DAY",label:"‰ªäÊó•",icon:"üìÖ"},{value:"WEEK",label:"Êú¨Âë®",icon:"üìÜ"},{value:"MONTH",label:"Êú¨Êúà",icon:"üìä"},{value:"ALL",label:"ÂÖ®ÈÉ®",icon:"üèÜ"}],L=(0,n.KR)("WEEK"),E=(0,n.KR)([]),F=(0,n.KR)(!1),X=(0,n.KR)(1),R=(0,n.KR)(12),M=(0,n.KR)(!0),K=async(e=!1)=>{if(!F.value){F.value=!0;try{e&&(X.value=1,E.value=[]);const a=await u.x.getHotPosts(L.value,X.value,R.value),t=a.data,s=t.items||[];e?E.value=s:E.value.push(...s),M.value=s.length>=R.value}catch(a){console.error("Failed to load hot posts:",a)}finally{F.value=!1}}},w=e=>{L.value!==e&&(L.value=e,K(!0))},$=()=>{X.value++,K(!1)},W=e=>{a.push(`/posts/${e}`)},A=e=>0===e?"rank-1":1===e?"rank-2":2===e?"rank-3":"rank-other",I=e=>{const a=["ü•á","ü•à","ü•â"];return a[e]||""};return(0,s.sV)(()=>{K(!0)}),(e,a)=>{const o=(0,s.g2)("el-icon"),u=(0,s.g2)("el-empty"),X=(0,s.g2)("el-button");return(0,s.uX)(),(0,s.CE)("div",c,[a[2]||(a[2]=(0,s.Lk)("div",{class:"ranking-header"},[(0,s.Lk)("h1",{class:"title"},"ÁÉ≠Èó®ÊéíË°åÊ¶ú"),(0,s.Lk)("p",{class:"subtitle"},"ÂèëÁé∞Âπ≥Âè∞ÊúÄÂèóÊ¨¢ËøéÁöÑÁ≤æÂΩ©ÂÜÖÂÆπ")],-1)),(0,s.Lk)("div",d,[((0,s.uX)(),(0,s.CE)(s.FK,null,(0,s.pI)(t,e=>(0,s.Lk)("div",{key:e.value,class:(0,l.C4)(["time-tab",{active:L.value===e.value}]),onClick:a=>w(e.value)},[(0,s.Lk)("span",p,(0,l.v_)(e.icon),1),(0,s.Lk)("span",k,(0,l.v_)(e.label),1)],10,v)),64))]),(0,s.Lk)("div",m,[F.value&&0===E.value.length?((0,s.uX)(),(0,s.CE)("div",f,[(0,s.bF)(o,{class:"is-loading"},{default:(0,s.k6)(()=>[(0,s.bF)((0,n.R1)(r.Loading))]),_:1}),a[0]||(a[0]=(0,s.Lk)("span",null,"Âä†ËΩΩ‰∏≠...",-1))])):0===E.value.length?((0,s.uX)(),(0,s.CE)("div",h,[(0,s.bF)(u,{description:"ÊöÇÊó†ÁÉ≠Èó®Âä®ÊÄÅ"})])):((0,s.uX)(),(0,s.CE)("div",y,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(E.value,(e,a)=>((0,s.uX)(),(0,s.CE)("div",{key:e.id,class:"post-item"},[(0,s.Lk)("div",{class:(0,l.C4)(["rank-badge",A(a)])},[a<3?((0,s.uX)(),(0,s.CE)("span",g,(0,l.v_)(I(a)),1)):((0,s.uX)(),(0,s.CE)("span",b,(0,l.v_)(a+1),1))],2),(0,s.bF)(i.A,{post:e,onSelect:a=>W(e.id)},null,8,["post","onSelect"])]))),128))])),!F.value&&M.value?((0,s.uX)(),(0,s.CE)("div",C,[(0,s.bF)(X,{onClick:$,loading:F.value},{default:(0,s.k6)(()=>[...a[1]||(a[1]=[(0,s.eW)("Âä†ËΩΩÊõ¥Â§ö",-1)])]),_:1},8,["loading"])])):(0,s.Q3)("",!0),!M.value&&E.value.length>0?((0,s.uX)(),(0,s.CE)("div",_," Â∑≤Âä†ËΩΩÂÖ®ÈÉ®ÂÜÖÂÆπ ")):(0,s.Q3)("",!0)])])}}},E=t(6262);const F=(0,E.A)(L,[["__scopeId","data-v-3256b1e0"]]);var X=F},6617:function(e,a,t){"use strict";t.d(a,{A:function(){return A}});var s=t(641),l=t(33),n=t(953),o=t(4353),r=t.n(o),u=t(8660),i=t.n(u),c=t(8548);const d={key:0,class:"recommend-badge"},v={key:1,class:"card-media"},p=["src","alt"],k={class:"image-overlay"},m={class:"overlay-item"},f={class:"overlay-item"},h={key:0,class:"count"},y={key:2,class:"card-media no-image"},g={class:"no-image-text"},b={class:"image-overlay"},C={class:"overlay-item"},_={class:"overlay-item"},L={class:"card-body"},E={class:"content"},F={key:0,class:"tags"},X={class:"card-meta"},R={class:"author"},M={class:"name"},K={class:"time"};var w={__name:"PostCard",props:{post:{type:Object,required:!0},layout:{type:String,default:"masonry"}},emits:["select"],setup(e){r().extend(i());const a=e=>e?e.length>29?`${e.slice(0,29)}...`:e:"",t=e=>e?e.length>60?`${e.slice(0,60)}...`:e:"ÂàÜ‰∫´Ê≠§ÂàªÁöÑÁÅµÊÑü",o=e=>{if(!e)return"";const a=r()(e),t=r()(),s=t.diff(a,"minute");if(s<60)return`${s||1}ÂàÜÈíüÂâç`;const l=t.diff(a,"hour");return l<24?`${l}Â∞èÊó∂Ââç`:a.isSame(t,"year")?a.format("MÊúàDÊó•"):a.format("YYYYÂπ¥MÊúàDÊó•")};return(r,u)=>{const i=(0,s.g2)("el-icon"),w=(0,s.g2)("el-tag"),$=(0,s.g2)("el-avatar");return(0,s.uX)(),(0,s.CE)("div",{class:(0,l.C4)(["post-card",e.layout,{"is-recommended":e.post.isRecommended}]),onClick:u[0]||(u[0]=a=>r.$emit("select",e.post))},[e.post.isRecommended?((0,s.uX)(),(0,s.CE)("div",d,[(0,s.bF)(i,null,{default:(0,s.k6)(()=>[(0,s.bF)((0,n.R1)(c.MagicStick))]),_:1}),u[1]||(u[1]=(0,s.Lk)("span",null,"Áåú‰Ω†ÂñúÊ¨¢",-1))])):(0,s.Q3)("",!0),e.post.imageUrls?.length?((0,s.uX)(),(0,s.CE)("div",v,[(0,s.Lk)("img",{src:e.post.imageUrls[0],alt:e.post.content||`${e.post.author?.username||"Áî®Êà∑"}ÁöÑÂàÜ‰∫´ÂõæÁâá`},null,8,p),(0,s.Lk)("div",k,[(0,s.Lk)("span",m,[(0,s.bF)(i,null,{default:(0,s.k6)(()=>[(0,s.bF)((0,n.R1)(c.View))]),_:1}),(0,s.eW)((0,l.v_)(e.post.viewCount||0),1)]),(0,s.Lk)("span",f,[(0,s.bF)(i,null,{default:(0,s.k6)(()=>[(0,s.bF)((0,n.R1)(c.GobletFull))]),_:1}),(0,s.eW)((0,l.v_)(e.post.likeCount||0),1)])]),e.post.imageUrls.length>1?((0,s.uX)(),(0,s.CE)("span",h,"+"+(0,l.v_)(e.post.imageUrls.length-1),1)):(0,s.Q3)("",!0)])):((0,s.uX)(),(0,s.CE)("div",y,[(0,s.Lk)("p",g,(0,l.v_)(t(e.post.content)),1),(0,s.Lk)("div",b,[(0,s.Lk)("span",C,[(0,s.bF)(i,null,{default:(0,s.k6)(()=>[(0,s.bF)((0,n.R1)(c.View))]),_:1}),(0,s.eW)((0,l.v_)(e.post.viewCount||0),1)]),(0,s.Lk)("span",_,[(0,s.bF)(i,null,{default:(0,s.k6)(()=>[(0,s.bF)((0,n.R1)(c.GobletFull))]),_:1}),(0,s.eW)((0,l.v_)(e.post.likeCount||0),1)])])])),(0,s.Lk)("div",L,[(0,s.Lk)("p",E,(0,l.v_)(a(e.post.content)),1),e.post.tags?.length?((0,s.uX)(),(0,s.CE)("div",F,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e.post.tags.slice(0,2),e=>((0,s.uX)(),(0,s.Wv)(w,{key:e,size:"small",effect:"light"},{default:(0,s.k6)(()=>[(0,s.eW)(" # "+(0,l.v_)(e),1)]),_:2},1024))),128))])):(0,s.Q3)("",!0)]),(0,s.Lk)("div",X,[(0,s.Lk)("div",R,[(0,s.bF)($,{src:e.post.author?.avatarUrl,size:28,alt:`${e.post.author?.username||"Áî®Êà∑"}ÁöÑÂ§¥ÂÉè`},null,8,["src","alt"]),(0,s.Lk)("p",M,(0,l.v_)(e.post.author?.username),1)]),(0,s.Lk)("span",K,(0,l.v_)(o(e.post.createdAt)),1)])],2)}}},$=t(6262);const W=(0,$.A)(w,[["__scopeId","data-v-2be613fd"]]);var A=W},8660:function(e){!function(a,t){e.exports=t()}(0,function(){"use strict";return function(e,a,t){e=e||{};var s=a.prototype,l={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function n(e,a,t,l){return s.fromToBase(e,a,t,l)}t.en.relativeTime=l,s.fromToBase=function(a,s,n,o,r){for(var u,i,c,d=n.$locale().relativeTime||l,v=e.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],p=v.length,k=0;k<p;k+=1){var m=v[k];m.d&&(u=o?t(a).diff(n,m.d,!0):n.diff(a,m.d,!0));var f=(e.rounding||Math.round)(Math.abs(u));if(c=u>0,f<=m.r||!m.r){f<=1&&k>0&&(m=v[k-1]);var h=d[m.l];r&&(f=r(""+f)),i="string"==typeof h?h.replace("%d",f):h(f,s,m.l,c);break}}if(s)return i;var y=c?d.future:d.past;return"function"==typeof y?y(i):y.replace("%s",i)},s.to=function(e,a){return n(e,a,this,!0)},s.from=function(e,a){return n(e,a,this)};var o=function(e){return e.$u?t.utc():t()};s.toNow=function(e){return this.to(o(this),e)},s.fromNow=function(e){return this.from(o(this),e)}}})}}]);
//# sourceMappingURL=77.00104f70.js.map