"use strict";(self["webpackChunkChunyin"]=self["webpackChunkChunyin"]||[]).push([[77],{77:function(e,a,l){l.r(a),l.d(a,{default:function(){return X}});l(4114);var s=l(641),t=l(33),n=l(953),o=l(5220),u=l(8548),i=l(4402),c=l(6617);const r={class:"ranking-container"},v={class:"time-tabs"},d=["onClick"],k={class:"tab-icon"},p={class:"tab-label"},m={class:"ranking-content"},g={key:0,class:"loading"},b={key:1,class:"empty"},y={key:2,class:"posts-grid"},C={key:0,class:"rank-icon"},_={key:1,class:"rank-number"},f={key:3,class:"load-more"},h={key:4,class:"no-more"};var L={__name:"Ranking",setup(e){const a=(0,o.rd)(),l=[{value:"DAY",label:"‰ªäÊó•",icon:"üìÖ"},{value:"WEEK",label:"Êú¨Âë®",icon:"üìÜ"},{value:"MONTH",label:"Êú¨Êúà",icon:"üìä"},{value:"ALL",label:"ÂÖ®ÈÉ®",icon:"üèÜ"}],L=(0,n.KR)("WEEK"),E=(0,n.KR)([]),F=(0,n.KR)(!1),X=(0,n.KR)(1),R=(0,n.KR)(12),K=(0,n.KR)(!0),W=async(e=!1)=>{if(!F.value){F.value=!0;try{e&&(X.value=1,E.value=[]);const a=await i.x.getHotPosts(L.value,X.value,R.value),l=a.data,s=l.items||[];e?E.value=s:E.value.push(...s),K.value=s.length>=R.value}catch(a){console.error("Failed to load hot posts:",a)}finally{F.value=!1}}},$=e=>{L.value!==e&&(L.value=e,W(!0))},w=()=>{X.value++,W(!1)},A=e=>{a.push(`/posts/${e}`)},I=e=>0===e?"rank-1":1===e?"rank-2":2===e?"rank-3":"rank-other",Q=e=>{const a=["ü•á","ü•à","ü•â"];return a[e]||""};return(0,s.sV)(()=>{W(!0)}),(e,a)=>{const o=(0,s.g2)("el-icon"),i=(0,s.g2)("el-empty"),X=(0,s.g2)("el-button");return(0,s.uX)(),(0,s.CE)("div",r,[a[2]||(a[2]=(0,s.Lk)("div",{class:"ranking-header"},[(0,s.Lk)("h1",{class:"title"},"ÁÉ≠Èó®ÊéíË°åÊ¶ú"),(0,s.Lk)("p",{class:"subtitle"},"ÂèëÁé∞Âπ≥Âè∞ÊúÄÂèóÊ¨¢ËøéÁöÑÁ≤æÂΩ©ÂÜÖÂÆπ")],-1)),(0,s.Lk)("div",v,[((0,s.uX)(),(0,s.CE)(s.FK,null,(0,s.pI)(l,e=>(0,s.Lk)("div",{key:e.value,class:(0,t.C4)(["time-tab",{active:L.value===e.value}]),onClick:a=>$(e.value)},[(0,s.Lk)("span",k,(0,t.v_)(e.icon),1),(0,s.Lk)("span",p,(0,t.v_)(e.label),1)],10,d)),64))]),(0,s.Lk)("div",m,[F.value&&0===E.value.length?((0,s.uX)(),(0,s.CE)("div",g,[(0,s.bF)(o,{class:"is-loading"},{default:(0,s.k6)(()=>[(0,s.bF)((0,n.R1)(u.Loading))]),_:1}),a[0]||(a[0]=(0,s.Lk)("span",null,"Âä†ËΩΩ‰∏≠...",-1))])):0===E.value.length?((0,s.uX)(),(0,s.CE)("div",b,[(0,s.bF)(i,{description:"ÊöÇÊó†ÁÉ≠Èó®Âä®ÊÄÅ"})])):((0,s.uX)(),(0,s.CE)("div",y,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(E.value,(e,a)=>((0,s.uX)(),(0,s.CE)("div",{key:e.id,class:"post-item"},[(0,s.Lk)("div",{class:(0,t.C4)(["rank-badge",I(a)])},[a<3?((0,s.uX)(),(0,s.CE)("span",C,(0,t.v_)(Q(a)),1)):((0,s.uX)(),(0,s.CE)("span",_,(0,t.v_)(a+1),1))],2),(0,s.bF)(c.A,{post:e,onSelect:a=>A(e.id)},null,8,["post","onSelect"])]))),128))])),!F.value&&K.value?((0,s.uX)(),(0,s.CE)("div",f,[(0,s.bF)(X,{onClick:w,loading:F.value},{default:(0,s.k6)(()=>[...a[1]||(a[1]=[(0,s.eW)("Âä†ËΩΩÊõ¥Â§ö",-1)])]),_:1},8,["loading"])])):(0,s.Q3)("",!0),!K.value&&E.value.length>0?((0,s.uX)(),(0,s.CE)("div",h," Â∑≤Âä†ËΩΩÂÖ®ÈÉ®ÂÜÖÂÆπ ")):(0,s.Q3)("",!0)])])}}},E=l(6262);const F=(0,E.A)(L,[["__scopeId","data-v-3256b1e0"]]);var X=F},6617:function(e,a,l){l.d(a,{A:function(){return I}});var s=l(641),t=l(33),n=l(953),o=l(4353),u=l.n(o),i=l(8660),c=l.n(i),r=l(8548);const v={key:0,class:"recommend-badge"},d={key:1,class:"card-media"},k=["src","alt"],p={class:"image-overlay"},m={class:"overlay-item"},g={class:"overlay-item"},b={key:0,class:"count"},y={key:2,class:"card-media no-image"},C={class:"no-image-text"},_={class:"image-overlay"},f={class:"overlay-item"},h={class:"overlay-item"},L={class:"card-body"},E={class:"content"},F={key:0,class:"tags"},X={class:"card-meta"},R={class:"author"},K={class:"name"},W={class:"time"};var $={__name:"PostCard",props:{post:{type:Object,required:!0},layout:{type:String,default:"masonry"}},emits:["select"],setup(e){u().extend(c());const a=e=>e?e.length>29?`${e.slice(0,29)}...`:e:"",l=e=>e?e.length>60?`${e.slice(0,60)}...`:e:"ÂàÜ‰∫´Ê≠§ÂàªÁöÑÁÅµÊÑü",o=e=>{if(!e)return"";const a=u()(e),l=u()(),s=l.diff(a,"minute");if(s<60)return`${s||1}ÂàÜÈíüÂâç`;const t=l.diff(a,"hour");return t<24?`${t}Â∞èÊó∂Ââç`:a.isSame(l,"year")?a.format("MÊúàDÊó•"):a.format("YYYYÂπ¥MÊúàDÊó•")};return(u,i)=>{const c=(0,s.g2)("el-icon"),$=(0,s.g2)("el-tag"),w=(0,s.g2)("el-avatar");return(0,s.uX)(),(0,s.CE)("div",{class:(0,t.C4)(["post-card",e.layout,{"is-recommended":e.post.isRecommended}]),onClick:i[0]||(i[0]=a=>u.$emit("select",e.post))},[e.post.isRecommended?((0,s.uX)(),(0,s.CE)("div",v,[(0,s.bF)(c,null,{default:(0,s.k6)(()=>[(0,s.bF)((0,n.R1)(r.MagicStick))]),_:1}),i[1]||(i[1]=(0,s.Lk)("span",null,"Áåú‰Ω†ÂñúÊ¨¢",-1))])):(0,s.Q3)("",!0),e.post.imageUrls?.length?((0,s.uX)(),(0,s.CE)("div",d,[(0,s.Lk)("img",{src:e.post.imageUrls[0],alt:e.post.content||`${e.post.author?.username||"Áî®Êà∑"}ÁöÑÂàÜ‰∫´ÂõæÁâá`},null,8,k),(0,s.Lk)("div",p,[(0,s.Lk)("span",m,[(0,s.bF)(c,null,{default:(0,s.k6)(()=>[(0,s.bF)((0,n.R1)(r.View))]),_:1}),(0,s.eW)((0,t.v_)(e.post.viewCount||0),1)]),(0,s.Lk)("span",g,[(0,s.bF)(c,null,{default:(0,s.k6)(()=>[(0,s.bF)((0,n.R1)(r.GobletFull))]),_:1}),(0,s.eW)((0,t.v_)(e.post.likeCount||0),1)])]),e.post.imageUrls.length>1?((0,s.uX)(),(0,s.CE)("span",b,"+"+(0,t.v_)(e.post.imageUrls.length-1),1)):(0,s.Q3)("",!0)])):((0,s.uX)(),(0,s.CE)("div",y,[(0,s.Lk)("p",C,(0,t.v_)(l(e.post.content)),1),(0,s.Lk)("div",_,[(0,s.Lk)("span",f,[(0,s.bF)(c,null,{default:(0,s.k6)(()=>[(0,s.bF)((0,n.R1)(r.View))]),_:1}),(0,s.eW)((0,t.v_)(e.post.viewCount||0),1)]),(0,s.Lk)("span",h,[(0,s.bF)(c,null,{default:(0,s.k6)(()=>[(0,s.bF)((0,n.R1)(r.GobletFull))]),_:1}),(0,s.eW)((0,t.v_)(e.post.likeCount||0),1)])])])),(0,s.Lk)("div",L,[(0,s.Lk)("p",E,(0,t.v_)(a(e.post.content)),1),e.post.tags?.length?((0,s.uX)(),(0,s.CE)("div",F,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e.post.tags.slice(0,2),e=>((0,s.uX)(),(0,s.Wv)($,{key:e,size:"small",effect:"light"},{default:(0,s.k6)(()=>[(0,s.eW)(" # "+(0,t.v_)(e),1)]),_:2},1024))),128))])):(0,s.Q3)("",!0)]),(0,s.Lk)("div",X,[(0,s.Lk)("div",R,[(0,s.bF)(w,{src:e.post.author?.avatarUrl,size:28,alt:`${e.post.author?.username||"Áî®Êà∑"}ÁöÑÂ§¥ÂÉè`},null,8,["src","alt"]),(0,s.Lk)("p",K,(0,t.v_)(e.post.author?.username),1)]),(0,s.Lk)("span",W,(0,t.v_)(o(e.post.createdAt)),1)])],2)}}},w=l(6262);const A=(0,w.A)($,[["__scopeId","data-v-2be613fd"]]);var I=A}}]);
//# sourceMappingURL=77.fabff78e.js.map