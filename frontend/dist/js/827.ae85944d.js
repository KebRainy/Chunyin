"use strict";(self["webpackChunkChunyin"]=self["webpackChunkChunyin"]||[]).push([[827],{7827:function(e,a,l){l.r(a),l.d(a,{default:function(){return m}});l(4114);var r=l(641),s=l(953),u=l(5220),t=l(2636),n=l(6400),o=l(163);const d={class:"auth-container"};var p={__name:"Login",setup(e){const a=(0,u.rd)(),l=(0,n.k)(),p=(0,s.KR)(),i=(0,s.KR)(!1),c=(0,s.Kh)({username:"",password:""}),m={username:[{required:!0,message:"请输入用户名或邮箱",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]},f=()=>{p.value.validate(async e=>{if(e){i.value=!0;try{const e=await(0,t.iD)(c);l.setUserInfo(e.data.profile),o.nk.success("登录成功"),a.push("/")}catch(r){const e=r?.response?.data?.message||r.message||"登录失败，请检查账号和密码";o.nk.error(e)}finally{i.value=!1}}})},k=()=>{a.push("/register")};return(e,a)=>{const l=(0,r.g2)("el-input"),s=(0,r.g2)("el-form-item"),u=(0,r.g2)("el-button"),t=(0,r.g2)("el-form"),n=(0,r.g2)("el-card");return(0,r.uX)(),(0,r.CE)("div",d,[(0,r.bF)(n,{class:"auth-card"},{default:(0,r.k6)(()=>[a[4]||(a[4]=(0,r.Lk)("h2",null,"登录醇饮社区",-1)),(0,r.bF)(t,{model:c,rules:m,ref_key:"formRef",ref:p,"label-width":"90px"},{default:(0,r.k6)(()=>[(0,r.bF)(s,{label:"用户名 / 邮箱",prop:"username"},{default:(0,r.k6)(()=>[(0,r.bF)(l,{modelValue:c.username,"onUpdate:modelValue":a[0]||(a[0]=e=>c.username=e),placeholder:"请输入用户名或邮箱"},null,8,["modelValue"])]),_:1}),(0,r.bF)(s,{label:"密码",prop:"password"},{default:(0,r.k6)(()=>[(0,r.bF)(l,{modelValue:c.password,"onUpdate:modelValue":a[1]||(a[1]=e=>c.password=e),type:"password","show-password":"",placeholder:"请输入密码"},null,8,["modelValue"])]),_:1}),(0,r.bF)(s,null,{default:(0,r.k6)(()=>[(0,r.bF)(u,{type:"primary",loading:i.value,onClick:f},{default:(0,r.k6)(()=>[...a[2]||(a[2]=[(0,r.eW)("登录",-1)])]),_:1},8,["loading"]),(0,r.bF)(u,{type:"text",onClick:k},{default:(0,r.k6)(()=>[...a[3]||(a[3]=[(0,r.eW)("注册新账号",-1)])]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})])}}},i=l(6262);const c=(0,i.A)(p,[["__scopeId","data-v-407d10a8"]]);var m=c}}]);
//# sourceMappingURL=827.ae85944d.js.map