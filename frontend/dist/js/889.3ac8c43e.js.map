{"version":3,"file":"js/889.3ac8c43e.js","mappings":"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","sources":["webpack://demo2/./src/views/user/Settings.vue","webpack://demo2/./src/views/user/Settings.vue?06b9","webpack://demo2/./src/api/user.js"],"sourcesContent":["<template>\r\n  <div class=\"settings-page\">\r\n    <div class=\"settings-card\">\r\n      <div class=\"card-header\">\r\n        <div>\r\n          <p class=\"eyebrow\">Profile</p>\r\n          <h2>个人资料</h2>\r\n        </div>\r\n      </div>\r\n      <el-form :model=\"form\" label-width=\"100px\" class=\"settings-form\" @submit.prevent=\"saveSettings\">\r\n        <el-form-item label=\"头像\">\r\n          <div class=\"avatar-section\">\r\n            <el-avatar :src=\"avatarPreview\" :size=\"96\" :alt=\"`${form.username || '用户'}的头像预览`\" />\r\n            <el-upload\r\n              class=\"avatar-upload\"\r\n              action=\"/api/files/upload?category=AVATAR\"\r\n              :show-file-list=\"false\"\r\n              :on-success=\"handleAvatarSuccess\"\r\n              :before-upload=\"beforeAvatarUpload\"\r\n              accept=\"image/*\"\r\n            >\r\n              <el-button>更改头像</el-button>\r\n            </el-upload>\r\n          </div>\r\n        </el-form-item>\r\n\r\n        <div class=\"form-grid\">\r\n          <el-form-item label=\"用户名\">\r\n            <el-input v-model=\"form.username\" placeholder=\"输入用户名\" />\r\n          </el-form-item>\r\n          <el-form-item label=\"邮箱\">\r\n            <el-input v-model=\"form.email\" type=\"email\" placeholder=\"输入邮箱\" />\r\n          </el-form-item>\r\n          <el-form-item label=\"性别\">\r\n            <el-radio-group v-model=\"form.gender\" style=\"display: flex; flex-direction: column;\">\r\n              <el-radio value=\"MALE\">男</el-radio>\r\n              <el-radio value=\"FEMALE\">女</el-radio>\r\n              <el-radio value=\"SECRET\">保密</el-radio>\r\n            </el-radio-group>\r\n          </el-form-item>\r\n          <el-form-item label=\"生日\">\r\n            <el-date-picker\r\n              v-model=\"form.birthday\"\r\n              type=\"date\"\r\n              placeholder=\"选择生日\"\r\n            />\r\n          </el-form-item>\r\n        </div>\r\n\r\n        <el-form-item label=\"个性签名\">\r\n          <el-input\r\n            v-model=\"form.bio\"\r\n            type=\"textarea\"\r\n            placeholder=\"输入个性签名\"\r\n            rows=\"3\"\r\n            maxlength=\"200\"\r\n            show-word-limit\r\n          />\r\n        </el-form-item>\r\n\r\n        <div class=\"form-actions\">\r\n          <el-button @click=\"resetForm\">取消</el-button>\r\n          <el-button type=\"primary\" @click=\"saveSettings\">保存设置</el-button>\r\n        </div>\r\n      </el-form>\r\n    </div>\r\n\r\n    <div class=\"settings-card\">\r\n      <div class=\"card-header\">\r\n        <div>\r\n          <p class=\"eyebrow\">Security</p>\r\n          <h3>账户安全</h3>\r\n        </div>\r\n      </div>\r\n      <div class=\"setting-item\">\r\n        <div>\r\n          <p class=\"item-title\">修改密码</p>\r\n          <p class=\"item-desc\">为保障账户安全，建议定期更新密码</p>\r\n        </div>\r\n        <el-button text type=\"primary\" @click=\"showPasswordChange\">修改</el-button>\r\n      </div>\r\n      <div class=\"setting-item\">\r\n        <div>\r\n          <p class=\"item-title\">导出我的数据</p>\r\n          <p class=\"item-desc\">下载近 30 天的所有内容记录</p>\r\n        </div>\r\n        <el-button text @click=\"exportData\">导出</el-button>\r\n      </div>\r\n      <div class=\"setting-item danger\">\r\n        <div>\r\n          <p class=\"item-title\">删除账户</p>\r\n          <p class=\"item-desc\">删除后将无法恢复所有数据</p>\r\n        </div>\r\n        <el-button text type=\"danger\" @click=\"deleteAccount\">删除</el-button>\r\n      </div>\r\n    </div>\r\n\r\n    <el-dialog title=\"修改密码\" v-model=\"passwordDialogVisible\" width=\"400px\">\r\n      <el-form :model=\"passwordForm\" label-width=\"80px\">\r\n        <el-form-item label=\"原密码\">\r\n          <el-input\r\n            v-model=\"passwordForm.oldPassword\"\r\n            type=\"password\"\r\n            placeholder=\"输入原密码\"\r\n          />\r\n        </el-form-item>\r\n        <el-form-item label=\"新密码\">\r\n          <el-input\r\n            v-model=\"passwordForm.newPassword\"\r\n            type=\"password\"\r\n            placeholder=\"输入新密码\"\r\n          />\r\n        </el-form-item>\r\n        <el-form-item label=\"确认密码\">\r\n          <el-input\r\n            v-model=\"passwordForm.confirmPassword\"\r\n            type=\"password\"\r\n            placeholder=\"确认新密码\"\r\n          />\r\n        </el-form-item>\r\n      </el-form>\r\n      <template #footer>\r\n        <el-button @click=\"passwordDialogVisible = false\">取消</el-button>\r\n        <el-button type=\"primary\" @click=\"changePassword\">确定</el-button>\r\n      </template>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref } from 'vue'\r\nimport { useUserStore } from '@/store/modules/user'\r\nimport { ElMessage, ElMessageBox } from 'element-plus'\r\nimport { updateProfile, changePassword as changePasswordApi } from '@/api/user'\r\n\r\nconst userStore = useUserStore()\r\nconst avatarPreview = ref(userStore.userInfo?.avatarUrl)\r\nconst passwordDialogVisible = ref(false)\r\n\r\nconst form = ref({\r\n  username: userStore.userInfo?.username || '',\r\n  bio: userStore.userInfo?.bio || '',\r\n  gender: userStore.userInfo?.gender || 'SECRET',\r\n  email: userStore.userInfo?.email || '',\r\n  birthday: userStore.userInfo?.birthday ? new Date(userStore.userInfo.birthday) : null,\r\n  avatarImageId: null\r\n})\r\n\r\nconst passwordForm = ref({\r\n  oldPassword: '',\r\n  newPassword: '',\r\n  confirmPassword: ''\r\n})\r\n\r\nconst toDateString = (value) => {\r\n  if (!value) return null\r\n  const date = new Date(value)\r\n  if (Number.isNaN(date.getTime())) {\r\n    return null\r\n  }\r\n  return date.toISOString().slice(0, 10)\r\n}\r\n\r\nconst beforeAvatarUpload = (file) => {\r\n  const isImage = file.type.startsWith('image/')\r\n  const isLt5M = file.size / 1024 / 1024 < 5\r\n\r\n  if (!isImage) {\r\n    ElMessage.error('只能上传图片文件')\r\n    return false\r\n  }\r\n  if (!isLt5M) {\r\n    ElMessage.error('头像大小不能超过 5MB')\r\n    return false\r\n  }\r\n  return true\r\n}\r\n\r\nconst handleAvatarSuccess = (response) => {\r\n  if (response.code === 200 && response.data?.id) {\r\n    avatarPreview.value = response.data.url\r\n    form.value.avatarImageId = response.data.id\r\n    ElMessage.success('头像上传成功')\r\n  } else {\r\n    ElMessage.error('上传失败，请重试')\r\n  }\r\n}\r\n\r\nconst saveSettings = async () => {\r\n  try {\r\n    await updateProfile({\r\n      username: form.value.username,\r\n      bio: form.value.bio,\r\n      gender: form.value.gender,\r\n      email: form.value.email,\r\n      birthday: toDateString(form.value.birthday),\r\n      avatarImageId: form.value.avatarImageId\r\n    })\r\n    await userStore.fetchUserInfo()\r\n    ElMessage.success('设置已保存')\r\n  } catch (error) {\r\n    ElMessage.error('保存失败')\r\n  }\r\n}\r\n\r\nconst resetForm = () => {\r\n  form.value = {\r\n    username: userStore.userInfo?.username || '',\r\n    bio: userStore.userInfo?.bio || '',\r\n    gender: userStore.userInfo?.gender || 'SECRET',\r\n    email: userStore.userInfo?.email || '',\r\n    birthday: userStore.userInfo?.birthday ? new Date(userStore.userInfo.birthday) : null,\r\n    avatarImageId: null\r\n  }\r\n}\r\n\r\nconst showPasswordChange = () => {\r\n  passwordDialogVisible.value = true\r\n}\r\n\r\nconst changePassword = async () => {\r\n  if (passwordForm.value.newPassword !== passwordForm.value.confirmPassword) {\r\n    ElMessage.error('两次输入的密码不一致')\r\n    return\r\n  }\r\n  if (passwordForm.value.newPassword.length < 6) {\r\n    ElMessage.error('密码长度不能少于6位')\r\n    return\r\n  }\r\n\r\n  try {\r\n    await changePasswordApi({\r\n      oldPassword: passwordForm.value.oldPassword,\r\n      newPassword: passwordForm.value.newPassword\r\n    })\r\n    ElMessage.success('密码修改成功')\r\n    passwordDialogVisible.value = false\r\n    passwordForm.value = {\r\n      oldPassword: '',\r\n      newPassword: '',\r\n      confirmPassword: ''\r\n    }\r\n  } catch (error) {\r\n    ElMessage.error('密码修改失败')\r\n  }\r\n}\r\n\r\nconst exportData = () => {\r\n  ElMessage.info('数据导出功能开发中...')\r\n}\r\n\r\nconst deleteAccount = () => {\r\n  ElMessageBox.confirm(\r\n    '删除账户后，所有数据将被永久删除，且无法恢复。是否继续？',\r\n    '警告',\r\n    {\r\n      confirmButtonText: '删除',\r\n      cancelButtonText: '取消',\r\n      type: 'warning'\r\n    }\r\n  ).then(async () => {\r\n    try {\r\n      // TODO: 调用API删除账户\r\n      ElMessage.success('账户已删除')\r\n    } catch (error) {\r\n      ElMessage.error('删除失败')\r\n    }\r\n  }).catch(() => {})\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.settings-page {\r\n  max-width: 900px;\r\n  margin: 0 auto;\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 24px;\r\n}\r\n\r\n.settings-card {\r\n  background: #fff;\r\n  border-radius: 28px;\r\n  border: 1px solid #eceff5;\r\n  box-shadow: 0 16px 36px rgba(15, 23, 42, 0.05);\r\n  padding: 24px 28px;\r\n}\r\n\r\n.card-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin-bottom: 16px;\r\n}\r\n\r\n.eyebrow {\r\n  margin: 0;\r\n  text-transform: uppercase;\r\n  letter-spacing: 2px;\r\n  font-size: 12px;\r\n  color: #909399;\r\n}\r\n\r\n.settings-form {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 12px;\r\n}\r\n\r\n.avatar-section {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 20px;\r\n}\r\n\r\n.form-grid {\r\n  display: grid;\r\n  grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));\r\n  gap: 16px;\r\n}\r\n\r\n.form-actions {\r\n  display: flex;\r\n  justify-content: flex-end;\r\n  gap: 12px;\r\n  padding-top: 12px;\r\n}\r\n\r\n.setting-item {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  padding: 16px 0;\r\n  border-top: 1px solid #f0f2f5;\r\n}\r\n\r\n.setting-item.danger .item-title {\r\n  color: #e53935;\r\n}\r\n\r\n.item-title {\r\n  margin: 0;\r\n  font-weight: 600;\r\n  color: #1f2d3d;\r\n}\r\n\r\n.item-desc {\r\n  margin: 4px 0 0;\r\n  color: #909399;\r\n  font-size: 13px;\r\n}\r\n\r\n@media (max-width: 600px) {\r\n  .settings-card {\r\n    padding: 20px;\r\n  }\r\n\r\n  .setting-item {\r\n    flex-direction: column;\r\n    align-items: flex-start;\r\n    gap: 12px;\r\n  }\r\n\r\n  .form-actions {\r\n    flex-direction: column;\r\n    align-items: stretch;\r\n  }\r\n}\r\n</style>\r\n","import script from \"./Settings.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./Settings.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./Settings.vue?vue&type=style&index=0&id=56aff8b5&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-56aff8b5\"]])\n\nexport default __exports__","import request from './request'\r\n\r\nexport const fetchUserProfile = (id) => {\r\n  return request({\r\n    url: `/users/${id}`,\r\n    method: 'get'\r\n  })\r\n}\r\n\r\nexport const updateProfile = (data) => {\r\n  return request({\r\n    url: '/users/profile',\r\n    method: 'put',\r\n    data\r\n  })\r\n}\r\n\r\nexport const changePassword = (data) => {\r\n  return request({\r\n    url: '/users/password',\r\n    method: 'put',\r\n    data\r\n  })\r\n}\r\n\r\nexport const followUser = (id) => {\r\n  return request({\r\n    url: `/users/${id}/follow`,\r\n    method: 'post'\r\n  })\r\n}\r\n\r\nexport const unfollowUser = (id) => {\r\n  return request({\r\n    url: `/users/${id}/follow`,\r\n    method: 'delete'\r\n  })\r\n}\r\n\r\nexport const getFollowees = () => {\r\n  return request({\r\n    url: '/users/followees',\r\n    method: 'get'\r\n  })\r\n}\r\n\r\nexport const getCollections = (params) => {\r\n  return request({\r\n    url: '/collections',\r\n    method: 'get',\r\n    params\r\n  })\r\n}\r\n\r\nexport const getFootprints = (params) => {\r\n  return request({\r\n    url: '/footprints',\r\n    method: 'get',\r\n    params\r\n  })\r\n}\r\n\r\nexport const recordFootprint = (data) => {\r\n  return request({\r\n    url: '/footprints',\r\n    method: 'post',\r\n    data\r\n  })\r\n}\r\n"],"names":["userStore","useUserStore","avatarPreview","ref","userInfo","avatarUrl","passwordDialogVisible","form","username","bio","gender","email","birthday","Date","avatarImageId","passwordForm","oldPassword","newPassword","confirmPassword","toDateString","value","date","Number","isNaN","getTime","toISOString","slice","beforeAvatarUpload","file","isImage","type","startsWith","isLt5M","size","ElMessage","error","handleAvatarSuccess","response","code","data","id","url","success","saveSettings","async","updateProfile","fetchUserInfo","resetForm","showPasswordChange","changePassword","length","changePasswordApi","exportData","info","deleteAccount","ElMessageBox","confirm","confirmButtonText","cancelButtonText","then","catch","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","class","_createVNode","_component_el_form","model","onSubmit","_withModifiers","_component_el_form_item","label","_hoisted_3","_component_el_avatar","src","alt","_component_el_upload","action","accept","_component_el_button","_cache","_hoisted_4","_component_el_input","$event","placeholder","_component_el_radio_group","style","_component_el_radio","_component_el_date_picker","rows","maxlength","_hoisted_5","onClick","_hoisted_6","_hoisted_7","text","_hoisted_8","_hoisted_9","_component_el_dialog","title","width","footer","_withCtx","__exports__","fetchUserProfile","request","method","followUser","unfollowUser","getFollowees","getCollections","params","getFootprints","recordFootprint"],"ignoreList":[],"sourceRoot":""}